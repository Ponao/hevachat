(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{152:function(e,t,a){},316:function(e,t,a){},376:function(e,t,a){e.exports=a(696)},605:function(e,t,a){},606:function(e,t,a){},612:function(e,t,a){},655:function(e,t){},693:function(e,t,a){},694:function(e,t,a){},695:function(e,t,a){},696:function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"dialogsGet",(function(){return gt})),a.d(s,"dialogsLoad",(function(){return ft})),a.d(s,"dialogGet",(function(){return yt})),a.d(s,"dialogLoad",(function(){return bt})),a.d(s,"updateOnline",(function(){return Et})),a.d(s,"setForward",(function(){return vt})),a.d(s,"sendMessage",(function(){return Ot})),a.d(s,"editMessage",(function(){return St})),a.d(s,"readMessages",(function(){return _t})),a.d(s,"retrySendMessage",(function(){return jt})),a.d(s,"deleteMessage",(function(){return Rt})),a.d(s,"deleteLocalMessage",(function(){return kt})),a.d(s,"loadMessages",(function(){return At}));var o={};a.r(o),a.d(o,"roomsGet",(function(){return ua})),a.d(o,"roomsAdd",(function(){return da})),a.d(o,"roomsLoad",(function(){return ma})),a.d(o,"joinRoom",(function(){return ha})),a.d(o,"leaveRoom",(function(){return ga})),a.d(o,"sendMessage",(function(){return fa})),a.d(o,"editMessage",(function(){return ya})),a.d(o,"deleteMessage",(function(){return ba})),a.d(o,"deleteLocalMessage",(function(){return Ea})),a.d(o,"retrySendMessage",(function(){return va})),a.d(o,"readMessages",(function(){return Oa})),a.d(o,"loadMessages",(function(){return Sa}));var n={};a.r(n),a.d(n,"notificationsGet",(function(){return Ta})),a.d(n,"notificationRead",(function(){return Ia}));var r={};a.r(r),a.d(r,"loginUser",(function(){return Fa})),a.d(r,"logoutUser",(function(){return Da})),a.d(r,"updateRoomLang",(function(){return La})),a.d(r,"uploadAvatar",(function(){return Pa}));var i={};a.r(i),a.d(i,"userGet",(function(){return _s})),a.d(i,"friendsGet",(function(){return js})),a.d(i,"requestedGet",(function(){return Rs})),a.d(i,"pendingGet",(function(){return ks})),a.d(i,"setUsers",(function(){return As})),a.d(i,"setActiveUserId",(function(){return xs})),a.d(i,"sendRequest",(function(){return Ts})),a.d(i,"acceptRequest",(function(){return Is})),a.d(i,"removeRequest",(function(){return Ns}));var c={};a.r(c),a.d(c,"call",(function(){return Cs})),a.d(c,"accept",(function(){return Ms})),a.d(c,"stop",(function(){return ws})),a.d(c,"clear",(function(){return Fs}));a(223),a(233),a(234),a(377),a(247),a(424);var l=a(0),p=a.n(l),u=a(37),d=a.n(u),m=(a(605),a(5)),h=a(4),g=a(7),f=a(6),y=(a(606),p.a.createContext()),b=(a(607),a(10)),E=a(325),v=a.n(E),O=a(321),S=a.n(O),_=a(106),j=a.n(_),R=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return p.a.createElement("div",{className:"user-avatar",style:this.props.style},this.props.avatar&&p.a.createElement("img",{alt:this.props.name,src:this.props.avatar.min,style:this.props.avatarStyle,className:"user-avatar-image"}),p.a.createElement("span",null,this.props.name.toUpperCase()),this.props.online&&p.a.createElement("span",{className:"online-status"}),this.props.status&&p.a.createElement(p.a.Fragment,null,"accept"===this.props.status&&p.a.createElement("span",{className:"notification-status"},p.a.createElement(S.a,{style:{color:"#fff",fontSize:14}})),"invite"===this.props.status&&p.a.createElement("span",{className:"notification-status"},p.a.createElement(v.a,{style:{color:"#fff",fontSize:14}})),"request"===this.props.status&&p.a.createElement("span",{className:"notification-status"},p.a.createElement(j.a,{style:{color:"#fff",fontSize:14}}))))}}]),a}(p.a.Component),k=(a(612),a(163)),A=a.n(k),x=a(162),T=a.n(x),I=a(334),N=a.n(I),C=a(160),M=a.n(C),w=a(28),F=a.n(w),D=a(8),L=a(9),P=a(1),B={isAuth:!1,warning:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(P.a)(Object(P.a)(Object(P.a)({},e),t.payload),{},{isAuth:!0});case"USER_LOGOUT":return{isAuth:!1,warning:!1};case"USER_UPDATE_ROOM_LANG":return Object(P.a)(Object(P.a)({},e),{},{roomLang:t.payload});case"USER_SET_AVATAR":return Object(P.a)(Object(P.a)({},e),{},{avatar:t.payload});case"USER_EDIT":return Object(P.a)(Object(P.a)({},e),{},{name:{first:t.payload.firstName,last:t.payload.lastName},city:t.payload.city});case"USER_SET_LANG":return Object(P.a)(Object(P.a)({},e),{},{lang:t.payload});case"USER_SET_WARNING":return Object(P.a)(Object(P.a)({},e),{},{warning:t.payload});default:return e}},z=a(14),G={isFetching:!0,getted:!1,activeRoom:!1,isError:!1,rooms:[],canLoad:!1,force:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROOMS_GET":return Object(P.a)(Object(P.a)({},e),{},{rooms:t.payload,isFetching:!1,getted:!0,canLoad:20===t.payload.length});case"ROOMS_PRELOAD":return Object(P.a)(Object(P.a)({},e),{},{rooms:[].concat(Object(z.a)(e.rooms),Object(z.a)(t.payload)),canLoad:20===t.payload.length});case"ROOMS_SET_GET":return Object(P.a)(Object(P.a)({},e),{},{isFetching:!0,getted:!1,isError:!1});case"ROOMS_GET_ERROR":return Object(P.a)(Object(P.a)({},e),{},{isFetching:!1,getted:!0,isError:!0});case"ROOMS_ADD":return Object(P.a)(Object(P.a)({},e),{},{rooms:[t.payload].concat(Object(z.a)(e.rooms))});case"ROOMS_EDIT_ROOM":return Object(P.a)(Object(P.a)({},e),{},{rooms:e.rooms.map((function(e){return t.payload._id===e._id?Object(P.a)(Object(P.a)({},e),{},{title:t.payload.title,isPrivate:t.payload.isPrivate}):e}))});case"ROOMS_DELETE_ROOM":return Object(P.a)(Object(P.a)({},e),{},{rooms:Object(z.a)(e.rooms.filter((function(e){return e._id!==t.payload})))});case"ROOMS_JOIN_ROOM":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},t.payload.room),{},{typers:[],canLoad:t.payload.canLoad,isLoading:!1,remoteStream:!1,muted:t.payload.muted})});case"ROOMS_SET_MUTED":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{muted:t.payload})});case"ROOMS_JOIN_ERROR":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:{error:t.payload}});case"ROOMS_USER_LEAVE_IN_ROOM":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{users:Object(z.a)(e.activeRoom.users.filter((function(e){return e._id!==t.payload})))})});case"ROOMS_SET_FORCE":return Object(P.a)(Object(P.a)({},e),{},{force:t.payload});case"ROOMS_USER_JOIN_IN_ROOM":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{users:[].concat(Object(z.a)(e.activeRoom.users),[t.payload])})});case"ROOMS_EDIT_IN_ROOM":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{title:t.payload.title,isPrivate:t.payload.isPrivate})});case"ROOMS_LEAVE_ROOM":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:!1});case"ROOMS_USER_JOIN_ROOM":return Object(P.a)(Object(P.a)({},e),{},{rooms:e.rooms.map((function(e){return t.payload.roomId===e._id?Object(P.a)(Object(P.a)({},e),{},{users:[t.payload.user].concat(Object(z.a)(e.users))}):e}))});case"ROOMS_USER_LEAVE_ROOM":return Object(P.a)(Object(P.a)({},e),{},{rooms:e.rooms.map((function(e){return t.payload.roomId===e._id?Object(P.a)(Object(P.a)({},e),{},{users:Object(z.a)(e.users.filter((function(e){return e._id!==t.payload.userId})))}):e}))});case"ROOMS_ADD_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:[].concat(Object(z.a)(e.activeRoom.dialog.messages),[t.payload])})})});case"ROOMS_SUCCESS_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:e.activeRoom.dialog.messages.map((function(e){return t.payload._id===e._id?Object(P.a)(Object(P.a)({},e),{},{isLoading:!1,_id:t.payload._newId,files:e.files.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{file:!1})})),sounds:e.sounds.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{file:!1})})),images:e.images.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{file:!1})}))}):e}))})})});case"ROOMS_ERROR_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:e.activeRoom.dialog.messages.map((function(e){return t.payload===e._id?Object(P.a)(Object(P.a)({},e),{},{isLoading:!1,isError:!0}):e}))})})});case"ROOMS_EDIT_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:e.activeRoom.dialog.messages.map((function(e){return t.payload._id===e._id?Object(P.a)(Object(P.a)(Object(P.a)({},e),t.payload),{},{isEdit:!0}):e}))})})});case"ROOMS_DELETE_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:Object(z.a)(e.activeRoom.dialog.messages.filter((function(e){return!t.payload.find((function(t){return t===e._id}))})))})})});case"ROOMS_READ_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:e.activeRoom.dialog.messages.map((function(e){return e.isRead||e.user._id!==t.payload?e:Object(P.a)(Object(P.a)({},e),{},{isRead:!0})}))})})});case"ROOMS_READ_MESSAGES":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:e.activeRoom.dialog.messages.map((function(e){return e.isRead||e.user._id===t.payload?e:Object(P.a)(Object(P.a)({},e),{},{isRead:!0})}))})})});case"ROOMS_SET_REMOTE_STREAM":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{remoteStream:t.payload})});case"ROOMS_SET_LOADING":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{canLoad:!1,isLoading:!0})});case"ROOMS_LOAD_MESSAGES":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{isLoading:!1,canLoad:t.payload.canLoad,dialog:Object(P.a)(Object(P.a)({},e.activeRoom.dialog),{},{messages:[].concat(Object(z.a)(t.payload.messages),Object(z.a)(e.activeRoom.dialog.messages))})})});case"ROOMS_ADD_TYPER":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{typers:[t.payload].concat(Object(z.a)(e.activeRoom.typers))})});case"ROOMS_REMOVE_TYPER":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{typers:Object(z.a)(e.activeRoom.typers.filter((function(e){return e._id!==t.payload})))})});case"ROOMS_SET_SPEAKING_STATUS":return Object(P.a)(Object(P.a)({},e),{},{activeRoom:Object(P.a)(Object(P.a)({},e.activeRoom),{},{users:e.activeRoom.users.map((function(e){return e._id===t.payload.userId?Object(P.a)(Object(P.a)({},e),{},{speaking:t.payload.speaking}):e}))})});default:return e}},q={micOn:!1,musicOn:!0,cameraOn:!1},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MEDIA_TOGGLE_MICROPHONE":return Object(P.a)(Object(P.a)({},e),{},{micOn:t.payload});case"MEDIA_TOGGLE_MUSIC":return Object(P.a)(Object(P.a)({},e),{},{musicOn:t.payload});case"MEDIA_TOGGLE_CAMERA":return Object(P.a)(Object(P.a)({},e),{},{cameraOn:t.payload});default:return e}},H={isFetching:!0,dialogs:[],forwardMessages:[],canLoad:!1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DIALOGS_GET":return Object(P.a)(Object(P.a)({},e),{},{dialogs:t.payload.dialogs,isFetching:!1,noReadCount:t.payload.noReadCount,canLoad:20===t.payload.dialogs.length});case"DIALOGS_ADD":return Object(P.a)(Object(P.a)({},e),{},{dialogs:[t.payload].concat(Object(z.a)(e.dialogs))});case"DIALOGS_PRELOAD":return Object(P.a)(Object(P.a)({},e),{},{dialogs:[].concat(Object(z.a)(e.dialogs),Object(z.a)(t.payload)),canLoad:20===t.payload.length});case"DIALOGS_LOAD":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{messages:t.payload.messages,getted:!0,canLoad:t.payload.canLoad}):e}))});case"DIALOGS_ADD_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{messages:[].concat(Object(z.a)(e.messages),[t.payload.message]),lastMessage:t.payload.message,noRead:t.payload.noRead?e.noRead+1:e.noRead}):e})).sort((function(e,t){return e.lastMessage&&t.lastMessage?(e=new Date(e.lastMessage.createdAt))>(t=new Date(t.lastMessage.createdAt))?-1:e<t?1:0:0})),noReadCount:t.payload.noReadCount?e.noReadCount+1:e.noReadCount});case"DIALOGS_SUCCESS_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{messages:e.messages.map((function(e){return t.payload._id===e._id?Object(P.a)(Object(P.a)({},e),{},{isLoading:!1,_id:t.payload._newId,files:e.files.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{file:!1})})),sounds:e.sounds.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{file:!1})})),images:e.images.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{file:!1})}))}):e})),lastMessage:Object(P.a)(Object(P.a)({},e.lastMessage),{},{isLoading:!1})}):e}))});case"DIALOGS_ERROR_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{messages:e.messages.map((function(e){return t.payload._id===e._id?Object(P.a)(Object(P.a)({},e),{},{isLoading:!1,isError:!0}):e})),lastMessage:Object(P.a)(Object(P.a)({},e.lastMessage),{},{isLoading:!1,isError:!0})}):e}))});case"DIALOGS_UPDATE_ONLINE":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.userId===e.user._id?Object(P.a)(Object(P.a)({},e),{},{user:Object(P.a)(Object(P.a)({},e.user),{},{online:t.payload.online,onlineAt:t.payload.onlineAt})}):e}))});case"DIALOGS_READ_MESSAGES":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{messages:e.messages.map((function(e){return e.isRead||e.user._id!==t.payload.userId?e:Object(P.a)(Object(P.a)({},e),{},{isRead:!0})})),noRead:t.payload.noRead?0:e.noRead,lastMessage:Object(P.a)(Object(P.a)({},e.lastMessage),{},{isRead:!0})}):e})),noReadCount:t.payload.noReadCount?e.noReadCount-1:e.noReadCount});case"DIALOGS_EDIT_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{messages:e.messages.map((function(e){return t.payload.message._id===e._id?Object(P.a)(Object(P.a)(Object(P.a)({},e),t.payload.message),{},{isEdit:!0}):e})),lastMessage:t.payload.editLast?Object(P.a)(Object(P.a)({},e.lastMessage),t.payload.message):e.lastMessage}):e}))});case"DIALOGS_DELETE_MESSAGE":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{messages:Object(z.a)(e.messages.filter((function(e){return!t.payload.messageIds.find((function(t){return t===e._id}))}))),lastMessage:t.payload.lastMessage,noRead:t.payload.noRead||0===t.payload.noRead?t.payload.noRead:e.noRead}):e})).sort((function(e,t){return e.lastMessage&&t.lastMessage?(e=new Date(e.lastMessage.createdAt))>(t=new Date(t.lastMessage.createdAt))?-1:e<t?1:0:0})),noReadCount:t.payload.noReadCount||0===t.payload.noReadCount?t.payload.noReadCount:e.noReadCount});case"DIALOGS_SET_LOADING":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload===e._id?Object(P.a)(Object(P.a)({},e),{},{canLoad:!1,isLoading:!0}):e}))});case"DIALOGS_LOAD_MESSAGES":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.dialogId===e._id?Object(P.a)(Object(P.a)({},e),{},{isLoading:!1,canLoad:t.payload.canLoad,messages:[].concat(Object(z.a)(t.payload.messages),Object(z.a)(e.messages))}):e}))});case"DIALOGS_SET_TYPER":return Object(P.a)(Object(P.a)({},e),{},{dialogs:e.dialogs.map((function(e){return t.payload.userId===e.user._id?Object(P.a)(Object(P.a)({},e),{},{typing:t.payload.typing}):e}))});case"DIALOGS_SET_FORWARD":return Object(P.a)(Object(P.a)({},e),{},{forwardMessages:t.payload});default:return e}},Q={isFetching:!0,getted:!1,activeUserId:!1,isError:!1,canLoad:!1,users:[],friends:{users:[],getted:!1,canLoad:!1,isFetching:!0},requested:{users:[],getted:!1,canLoad:!1,isFetching:!0},pending:{users:[],getted:!1,canLoad:!1,isFetching:!0}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_SET":return Object(P.a)(Object(P.a)({},e),{},{users:t.payload.friends,canLoad:t.payload.canLoad,isFetching:!1,getted:!0});case"USERS_ADD":return Object(P.a)(Object(P.a)({},e),{},{users:[t.payload].concat(Object(z.a)(e.users))});case"USERS_SET_ACTIVE_USER_ID":return Object(P.a)(Object(P.a)({},e),{},{activeUserId:t.payload});case"USERS_SET_FRIEND_STATUS":return Object(P.a)(Object(P.a)({},e),{},{users:e.users.map((function(e){return t.payload.userId===e._id?Object(P.a)(Object(P.a)({},e),{},{friendStatus:t.payload.friendStatus}):e}))});case"USERS_FRIENDS_GET":return Object(P.a)(Object(P.a)({},e),{},{friends:Object(P.a)(Object(P.a)({},e.friends),{},{users:t.payload.users,canLoad:t.payload.canLoad,isFetching:!1,getted:!0})});case"USERS_REQUESTED_GET":return Object(P.a)(Object(P.a)({},e),{},{requested:Object(P.a)(Object(P.a)({},e.requested),{},{users:t.payload.users,canLoad:t.payload.canLoad,isFetching:!1,getted:!0})});case"USERS_PENDING_GET":return Object(P.a)(Object(P.a)({},e),{},{pending:Object(P.a)(Object(P.a)({},e.pending),{},{users:t.payload.users,canLoad:t.payload.canLoad,isFetching:!1,getted:!0})});case"USERS_FRIENDS_REMOVE":return Object(P.a)(Object(P.a)({},e),{},{friends:Object(P.a)(Object(P.a)({},e.friends),{},{users:Object(z.a)(e.friends.users.filter((function(e){return t.payload.userId!==e._id})))})});case"USERS_REQUESTED_REMOVE":return Object(P.a)(Object(P.a)({},e),{},{requested:Object(P.a)(Object(P.a)({},e.requested),{},{users:Object(z.a)(e.requested.users.filter((function(e){return t.payload.userId!==e._id})))})});case"USERS_PENDING_REMOVE":return Object(P.a)(Object(P.a)({},e),{},{pending:Object(P.a)(Object(P.a)({},e.pending),{},{users:Object(z.a)(e.pending.users.filter((function(e){return t.payload.userId!==e._id})))})});case"USERS_FRIENDS_ADD":return Object(P.a)(Object(P.a)({},e),{},{friends:Object(P.a)(Object(P.a)({},e.friends),{},{users:[t.payload.user].concat(Object(z.a)(e.friends.users))})});case"USERS_REQUESTED_ADD":return Object(P.a)(Object(P.a)({},e),{},{requested:Object(P.a)(Object(P.a)({},e.requested),{},{users:[t.payload.user].concat(Object(z.a)(e.requested.users))})});case"USERS_PENDING_ADD":return Object(P.a)(Object(P.a)({},e),{},{pending:Object(P.a)(Object(P.a)({},e.pending),{},{users:[t.payload.user].concat(Object(z.a)(e.pending.users))})});default:return e}},$={isFetching:!0,getted:!1,activeRoom:!1,isError:!1,notifications:[],noRead:0},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATIONS_GET":return Object(P.a)(Object(P.a)({},e),{},{notifications:t.payload,isFetching:!1,getted:!0});case"NOTIFICATIONS_ADD":return Object(P.a)(Object(P.a)({},e),{},{notifications:[t.payload].concat(Object(z.a)(e.notifications)),noRead:e.noRead+1});case"NOTIFICATIONS_READ":return Object(P.a)(Object(P.a)({},e),{},{notifications:e.notifications.map((function(e){return t.payload===e._id?Object(P.a)(Object(P.a)({},e),{},{isRead:!0}):e})),noRead:e.noRead-1});case"NOTIFICATIONS_SET_NO_READ":return Object(P.a)(Object(P.a)({},e),{},{noRead:t.payload});case"NOTIFICATIONS_REMOVE":return Object(P.a)(Object(P.a)({},e),{},{notifications:Object(z.a)(e.notifications.filter((function(e){return e._id!==t.payload})))});default:return e}},X={user:!1,status:"none",remoteStream:!1,media:"audio",force:{user:!1,status:!1}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALL_SET_USER":return Object(P.a)(Object(P.a)({},e),{},{user:t.payload.user,status:t.payload.status});case"CALL_SET_STATUS":return Object(P.a)(Object(P.a)({},e),{},{status:t.payload});case"CALL_SET_REMOTE_STREAM":return Object(P.a)(Object(P.a)({},e),{},{remoteStream:t.payload});case"CALL_SET_MEDIA":return Object(P.a)(Object(P.a)({},e),{},{media:t.payload});case"CALL_SET_FORCE":return Object(P.a)(Object(P.a)({},e),{},{force:{user:t.payload.user,status:t.payload.status}});default:return e}},ee={images:[],index:0},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SLIDER_SET":return Object(P.a)(Object(P.a)({},e),{},{images:t.payload.images,index:t.payload.index});default:return e}},ae={ban:!1,date:"",numDate:0},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BAN_SET":return Object(P.a)(Object(P.a)({},e),{},{ban:!0,date:t.payload.date,numDate:t.payload.numDate});default:return e}},oe={toasts:[],force:{id:!1,type:!1}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOASTS_ADD":return Object(P.a)(Object(P.a)({},e),{},{toasts:[Object(P.a)(Object(P.a)({},t.payload.toast),{},{toastType:t.payload.toastType})].concat(Object(z.a)(e.toasts))});case"TOASTS_REMOVE":return Object(P.a)(Object(P.a)({},e),{},{toasts:Object(z.a)(e.toasts.filter((function(e){return e._id!==t.payload})))});case"TOAST_SET_FORCE":return Object(P.a)(Object(P.a)({},e),{},{force:{id:t.payload.id,type:t.payload.type}});default:return e}},re={connecting:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_SET_STATUS_NETWORK":return Object(P.a)(Object(P.a)({},e),{},{connecting:t.payload});default:return e}},ce=Object(L.c)({user:U,rooms:W,media:J,dialogs:V,users:Y,notifications:K,call:Z,slider:te,ban:se,toasts:ne,app:ie}),le=a(327),pe=Object(L.d)(ce,Object(L.a)(le.a));function ue(e,t){var a=e+Math.random()*(t+1-e);return Math.floor(a)}function de(e,t){for(var a,s=0;s<t.length;s++)t[s].path===e&&(a="Hevachat | "+t[s].title);document.title=a||"Hevachat"}function me(e){document.title="Hevachat | "+e}var he=a(215),ge=a.n(he),fe=a(328),ye=a(329),be=a.n(ye),Ee=a(48),ve=(a(697),a(331)),Oe=a.n(ve),Se=!1,_e=!1,je=!1,Re=!1,ke=!1,Ae=!1,xe=!!document.documentMode,Te=!xe&&!!window.StyleMedia,Ie=RTCPeerConnection||window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,Ne=window.RTCSessionDescription||window.mozRTCSessionDescription||window.RTCSessionDescription,Ce={offerToReceiveAudio:!0,offerToReceiveVideo:!0},Me={offerToReceiveAudio:!0,offerToReceiveVideo:!1},we={iceServers:[{urls:"stun:173.194.66.127:19302"},{urls:"turn:89.223.100.223:3478",credential:"TkYUraQew3RjwTA2JPjAaWL1Q7FIamc",username:"hevachat"}]},Fe={iceServers:[{urls:"stun:stun01.sipphone.com"},{urls:"stun:stun.ekiga.net"},{urls:"stun:stun.fwdnet.net"},{urls:"stun:stun.ideasip.com"},{urls:"stun:stun.iptel.org"},{urls:"stun:stun.rixtelecom.se"},{urls:"stun:stun.schlund.de"},{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stunserver.org"},{urls:"stun:stun.softjoys.com"},{urls:"stun:stun.voiparound.com"},{urls:"stun:stun.voipbuster.com"},{urls:"stun:stun.voipstunt.com"},{urls:"stun:stun.voxgratia.org"},{urls:"stun:stun.xten.com"},{urls:"turn:89.223.100.223:3478",credential:"TkYUraQew3RjwTA2JPjAaWL1Q7FIamc",username:"hevachat"}]};function De(e){return e((new(window.AudioContext||window.webkitAudioContext)).createMediaStreamDestination().stream)}var Le=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;function Pe(e,t){xe||Te?navigator.mediaDevices.getUserMedia(e).then((function(e){t(e)})).catch((function(e){De(t)})):Le(e,t,(function(){e.video?Le({audio:!0,video:!1},t,(function(){De(t)})):De(t)}))}function Be(e){e.candidate&&mt.sendRoomIceCandidate({roomId:_e,candidate:e.candidate})}function Ue(e,t,a){if(e)return console.log(e);mt.sendCallOfferSdp({userId:je,offerSdp:t,media:a})}function ze(e){e.candidate&&mt.sendCallIceCandidate({userId:je,candidate:e.candidate})}var Ge=function(){Re&&(Re.getAudioTracks()[0].enabled=!Re.getAudioTracks()[0].enabled,pe.dispatch({type:"MEDIA_TOGGLE_MICROPHONE",payload:Re.getAudioTracks()[0].enabled}))},We=function(){ke&&(ke.getAudioTracks()[0].enabled=!ke.getAudioTracks()[0].enabled,pe.dispatch({type:"MEDIA_TOGGLE_MUSIC",payload:ke.getAudioTracks()[0].enabled}))},qe=function(e){_e=e,Pe({audio:!0,video:!1},(function(e){(Re=e).getAudioTracks()[0].enabled=!1,Se=new Ie(we);var t,a=Object(Ee.a)(e.getTracks());try{for(a.s();!(t=a.n()).done;){var s=t.value;Se.addTrack(s,e)}}catch(o){a.e(o)}finally{a.f()}Se.onicecandidate=Be,Se.createOffer(Me).then((function(e){Se.setLocalDescription(e),function(e,t){if(e)return console.log(e);mt.sendRoomOfferSdp({roomId:_e,offerSdp:t.sdp})}(null,e)}))}))},Je=function(e){var t=e.roomId,a=e.lang;"active"!==!!pe.getState().call.status&&(Se&&(Se.close(),Se=!1),_e&&(mt.leaveRoom({roomId:t,lang:a}),_e=!1),Re&&(Re.getTracks().forEach((function(e){e.stop()})),Re=!1),ke&&(ke.getTracks().forEach((function(e){e.stop()})),ke=!1),Ae&&(Ae.stop(),Ae=!1),pe.dispatch({type:"MEDIA_TOGGLE_MICROPHONE",payload:!1}),pe.dispatch({type:"MEDIA_TOGGLE_MUSIC",payload:!0}))},He=function(e){if(e.candidate)var t=setInterval((function(){Se&&(clearInterval(t),Se.addIceCandidate(e))}),100)},Ve=function(e){try{var t=new Ne({type:"answer",sdp:e});Se.setRemoteDescription(t);var a,s=new MediaStream,o=Object(Ee.a)(Se.getReceivers());try{for(o.s();!(a=o.n()).done;){var n=a.value;s.addTrack(n.track)}}catch(r){o.e(r)}finally{o.f()}ke=s,pe.dispatch({type:"ROOMS_SET_REMOTE_STREAM",payload:s}),(Ae=Oe()(Re,{})).on("speaking",(function(){mt.sendRoomSpeaking({roomId:_e})})),Ae.on("stopped_speaking",(function(){mt.sendRoomStopSpeaking({roomId:_e})}))}catch(i){}},Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];je=e,Pe({audio:!0,video:!0},(function(e){(Re=e).getVideoTracks()[0]&&(Re.getVideoTracks()[0].enabled=!1),Se=new Ie(Fe);var a,s=Object(Ee.a)(e.getTracks());try{for(s.s();!(a=s.n()).done;){var o=a.value;Se.addTrack(o,e)}}catch(n){s.e(n)}finally{s.f()}Se.onicecandidate=ze,t&&Se.createOffer(Ce).then((function(e){Se.setLocalDescription(e),Ue(null,e,"audio")})),pe.dispatch({type:"MEDIA_TOGGLE_MICROPHONE",payload:!0})}))},Ye=function(){if(Se&&(Se.close(),Se=!1),je&&(je=!1),Re){var e,t=Object(Ee.a)(Re.getTracks());try{for(t.s();!(e=t.n()).done;){e.value.stop()}}catch(o){t.e(o)}finally{t.f()}Re=!1}if(ke){var a,s=Object(Ee.a)(ke.getTracks());try{for(s.s();!(a=s.n()).done;){a.value.stop()}}catch(o){s.e(o)}finally{s.f()}ke=!1,pe.dispatch({type:"CALL_SET_REMOTE_STREAM",payload:!1})}pe.dispatch({type:"CALL_SET_REMOTE_STREAM",payload:!1}),pe.dispatch({type:"MEDIA_TOGGLE_MICROPHONE",payload:!1}),pe.dispatch({type:"MEDIA_TOGGLE_MUSIC",payload:!0}),pe.dispatch({type:"MEDIA_TOGGLE_CAMERA",payload:!1}),pe.dispatch({type:"CALL_SET_MEDIA",payload:"audio"})},$e=function(){Re&&Re.getVideoTracks()[0]&&(Re.getVideoTracks()[0].enabled=!Re.getVideoTracks()[0].enabled,pe.dispatch({type:"MEDIA_TOGGLE_CAMERA",payload:Re.getVideoTracks()[0].enabled}),mt.toggleCameraCall(je,Re.getVideoTracks()[0].enabled?"video":"audio"))},Ke=function(e){var t=e.offerSdp,a=e.media,s=setInterval((function(){Se&&(clearInterval(s),Se.setRemoteDescription(t),Se.createAnswer(Ce).then((function(e){Se.setLocalDescription(e),mt.sendCallAnswerSdp({userId:je,answerSdp:e});var t=new MediaStream;if(ke){var s,o=Object(Ee.a)(ke.getTracks());try{for(o.s();!(s=o.n()).done;){s.value.stop()}}catch(c){o.e(c)}finally{o.f()}ke=!1}var n,r=Object(Ee.a)(Se.getReceivers());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.addTrack(i.track)}}catch(c){r.e(c)}finally{r.f()}ke=t,pe.dispatch({type:"CALL_SET_REMOTE_STREAM",payload:t}),pe.dispatch({type:"CALL_SET_MEDIA",payload:a})})))}),100)},Xe=function(e){var t=setInterval((function(){if(Se){clearInterval(t),Se.setRemoteDescription(e);var a=new MediaStream;if(ke){var s,o=Object(Ee.a)(ke.getTracks());try{for(o.s();!(s=o.n()).done;){s.value.stop()}}catch(c){o.e(c)}finally{o.f()}ke=!1}var n,r=Object(Ee.a)(Se.getReceivers());try{for(r.s();!(n=r.n()).done;){var i=n.value;a.addTrack(i.track)}}catch(c){r.e(c)}finally{r.f()}ke=a,pe.dispatch({type:"CALL_SET_REMOTE_STREAM",payload:ke})}}),100)},Ze=function(e){if(e)var t=setInterval((function(){Se&&(clearInterval(t),Se.addIceCandidate(e))}),100)},et="https://hevachat.com:8080",tt=[{time:60,label:"1 minute"},{time:1800,label:"30 minute"},{time:3600,label:"1 hour"},{time:86400,label:"24 hour"},{time:604800,label:"7 days"},{time:2419200,label:"1 month"},{time:999999999,label:"Forever"}],at=new(window.AudioContext||window.webkitAudioContext),st=new Audio("".concat(et,"/sounds/NewMessage.mp3")),ot=new Audio("".concat(et,"/sounds/Beep.mp3")),nt=new Audio("".concat(et,"/sounds/Rington.mp3"));setInterval((function(){at.resume().then((function(){}))}),3e3),ot.addEventListener("ended",(function(){ot.currentTime=0;var e=ot.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.log(e)}))})),nt.addEventListener("ended",(function(){nt.currentTime=0;var e=nt.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.log(e)}))}));var rt=function(){st.currentTime=0;var e=st.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.log(e)}))},it=function(){ot.currentTime=0,ot.pause()},ct=function(){nt.currentTime=0,nt.pause()},lt=!1,pt=!1,ut=!1,dt=0,mt={init:function(e){lt||((lt=be()(et,{transports:["websocket","polling","flashsocket"]})).on("disconnect",(function(){pe.dispatch({type:"APP_SET_STATUS_NETWORK",payload:!0})})),lt.on("connect",(function(){if(lt.emit("auth",e),fetch("".concat(et,"/api/call/check"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(t){var a=t.have,s=t.call;a&&fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:s.userFrom._id})}).then((function(e){return e.json()})).then((function(e){var t=e.user;e.friendStatus;pe.dispatch({type:"CALL_SET_USER",payload:{user:t,status:"incoming"}})}))})),dt>0){fetch("".concat(et,"/api/user/me"),{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(t){var a=t.user,s=t.dialogs,o=t.noReadCount,n=t.noReadNotifications,r=t.ban,i=t.numDate,c=t.date;if(r)pe.dispatch({type:"BAN_SET",payload:{numDate:i,date:c}});else{a.apiToken=e,pe.dispatch({type:"USER_LOGIN",payload:a});for(var l=0;l<s.length;l++)s[l].user=s[l].users.find((function(e){return e._id!==pe.getState().user._id})),s[l].user||(s[l].user=s[l].users[0]),s[l].typing=!1,s[l].getted=!1,s[l].isLoading=!1,s[l].lastMessage&&(s[l].lastMessage.isLoading=!1,s[l].lastMessage.isError=!1),s[l].lastMessage&&s[l].lastMessage.user._id===pe.getState().user._id&&(s[l].noRead=0);if(pe.dispatch({type:"DIALOGS_GET",payload:{dialogs:s,noReadCount:o}}),pe.dispatch({type:"NOTIFICATIONS_SET_NO_READ",payload:n}),"chats"===window.location.pathname.slice(1,6)){var p=window.location.pathname.slice(7,31);fetch("".concat(et,"/api/dialog/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:p})}).then((function(e){return e.json()})).then((function(e){var t=e.dialog,a=e.messages;t.messages=a.reverse(),pe.dispatch({type:"DIALOGS_LOAD",payload:{dialogId:t._id,messages:t.messages,canLoad:50===a.length}})}))}}})).catch((function(){localStorage.setItem("drafts",JSON.stringify([])),pe.dispatch({type:"USER_LOGOUT"})})),pe.getState().notifications.getted&&fetch("".concat(et,"/api/notification/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){pe.dispatch({type:"NOTIFICATIONS_GET",payload:e})})),pe.getState().rooms.getted&&(pe.dispatch({type:"ROOMS_SET_GET"}),fetch("".concat(et,"/api/room/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({lang:pe.getState().user.roomLang})}).then((function(e){return e.json()})).then((function(e){pe.dispatch({type:"ROOMS_GET",payload:e})})).catch((function(e){pe.dispatch({type:"ROOMS_GET_ERROR"})}))),pt&&lt.emit("leaveLang",pt),lt.emit("joinLang",pe.getState().user.roomLang),pt=pe.getState().user.roomLang;var t=pe.getState().rooms.activeRoom;t&&(Je({roomId:t._id,lang:t.lang}),pe.dispatch({type:"ROOMS_LEAVE_ROOM"}),fetch("".concat(et,"/api/room/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({id:t._id,socketId:lt.id})}).then((function(e){return e.json()})).then((function(e){if(e.error)return me("Error"),void pe.dispatch({type:"ROOMS_JOIN_ERROR",payload:e.errors[0]});var t=e.room,a=e.muted;t.dialog.messages=t.dialog.messages.reverse(),t.users.map((function(e){return e.speaking=!1,1})),me(t.title),pe.dispatch({type:"ROOMS_JOIN_ROOM",payload:{room:t,canLoad:50===t.dialog.messages.length,muted:a}}),ut&&clearTimeout(ut),a&&new Date(a.date).getTime()-(new Date).getTime()<=864e5&&(ut=setTimeout((function(){pe.getState().rooms.activeRoom&&pe.getState().rooms.activeRoom._id===t._id&&pe.getState().rooms.activeRoom.muted&&pe.getState().rooms.activeRoom.muted.date===a.date&&pe.dispatch({type:"ROOMS_SET_MUTED",payload:!1})}),new Date(a.date).getTime()-(new Date).getTime())),lt.emit("joinRoom",{roomId:t._id,lang:t.lang,userId:pe.getState().user._id});try{qe(t._id)}catch(s){lt.emit("leaveRoom",{roomId:t._id,lang:t.lang}),pe.dispatch({type:"ROOMS_JOIN_ERROR",payload:{param:"all",msg:"something_goes_wrong"}})}})).catch((function(e){pe.dispatch({type:"ROOMS_JOIN_ERROR",payload:{param:"all",msg:"something_goes_wrong"}})}))),pe.dispatch({type:"APP_SET_STATUS_NETWORK",payload:!1})}dt++})),lt.on("createRoom",(function(e){pe.dispatch({type:"ROOMS_ADD",payload:e})})),lt.on("editRoom",(function(e){pe.dispatch({type:"ROOMS_EDIT_ROOM",payload:e})})),lt.on("editInRoom",(function(e){pe.dispatch({type:"ROOMS_EDIT_IN_ROOM",payload:e})})),lt.on("deleteRoom",(function(e){pe.dispatch({type:"ROOMS_DELETE_ROOM",payload:e})})),lt.on("joinRoom",(function(e){var t=e.roomId,a=e.user;pe.dispatch({type:"ROOMS_USER_JOIN_ROOM",payload:{roomId:t,user:a}})})),lt.on("joinInRoom",(function(e){pe.dispatch({type:"ROOMS_USER_JOIN_IN_ROOM",payload:e})})),lt.on("leaveRoom",(function(e){var t=e.roomId,a=e.userId;pe.dispatch({type:"ROOMS_USER_LEAVE_ROOM",payload:{roomId:t,userId:a}})})),lt.on("leaveInRoom",(function(e){pe.dispatch({type:"ROOMS_USER_LEAVE_IN_ROOM",payload:e})})),lt.on("sendMessageRoom",(function(e){pe.dispatch({type:"ROOMS_ADD_MESSAGE",payload:e}),pe.getState().rooms.activeRoom.typers.find((function(t){return t._id===e.user._id}))&&pe.dispatch({type:"ROOMS_REMOVE_TYPER",payload:e.user._id})})),lt.on("deleteMessageRoom",(function(e){pe.dispatch({type:"ROOMS_DELETE_MESSAGE",payload:e})})),lt.on("readMessagesRoom",(function(e){pe.getState().rooms.activeRoom&&pe.getState().rooms.activeRoom._id===e&&pe.dispatch({type:"ROOMS_READ_MESSAGE",payload:pe.getState().user._id})})),lt.on("editMessageRoom",(function(e){pe.dispatch({type:"ROOMS_EDIT_MESSAGE",payload:e})})),lt.on("typingRoom",(function(e){pe.getState().rooms.activeRoom.typers.find((function(t){return t._id===e._id}))||(pe.dispatch({type:"ROOMS_ADD_TYPER",payload:e}),setTimeout((function(){pe.dispatch({type:"ROOMS_REMOVE_TYPER",payload:e._id})}),2500))})),lt.on("roomAnswerSdp",(function(e){Ve(e)})),lt.on("roomOnIceCandidate",(function(e){He(e)})),lt.on("roomSpeaking",(function(e){pe.dispatch({type:"ROOMS_SET_SPEAKING_STATUS",payload:{userId:e,speaking:!0}})})),lt.on("roomStopSpeaking",(function(e){pe.dispatch({type:"ROOMS_SET_SPEAKING_STATUS",payload:{userId:e,speaking:!1}})})),lt.on("sendMessageDialog",(function(t){var a=t.message,s=t.otherId;if(pe.getState().dialogs.dialogs.find((function(e){return e.user._id===a.user._id}))&&pe.getState().dialogs.dialogs.find((function(e){return e.user._id===a.user._id})).typing&&pe.dispatch({type:"DIALOGS_SET_TYPER",payload:{userId:a.user._id,typing:!1}}),pe.getState().dialogs.dialogs.find((function(e){return e._id===a.dialogId}))){var o=!1;a.user._id===pe.getState().user._id||pe.getState().dialogs.dialogs.find((function(e){return e._id===a.dialogId})).noRead||(o=!0),pe.dispatch({type:"DIALOGS_ADD_MESSAGE",payload:{message:a,dialogId:a.dialogId,noRead:a.user._id!==pe.getState().user._id,noReadCount:o}})}else fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:s})}).then((function(e){return e.json()})).then((function(e){var t=e.user,s=(e.friendStatus,{lastMessage:a,_id:a.dialogId,users:[pe.getState().user,t],user:t,getted:!1,typing:!1,noRead:1,messages:[]});pe.dispatch({type:"DIALOGS_ADD",payload:s})}));a.user._id!==pe.getState().user._id&&"/chats/".concat(a.user._id)!==window.location.pathname&&(rt(),pe.dispatch({type:"TOASTS_ADD",payload:{toast:a,toastType:"message"}}),setTimeout((function(){pe.dispatch({type:"TOASTS_REMOVE",payload:a._id})}),5e3)),a.user._id!==pe.getState().user._id&&pe.dispatch({type:"DIALOGS_UPDATE_ONLINE",payload:{userId:a.user._id,online:!0,onlineAt:Date.now()}})})),lt.on("sendNotification",(function(e){pe.getState().notifications.getted?pe.dispatch({type:"NOTIFICATIONS_ADD",payload:e}):pe.dispatch({type:"NOTIFICATIONS_SET_NO_READ",payload:pe.getState().notifications.noRead+1}),pe.dispatch({type:"TOASTS_ADD",payload:{toast:e,toastType:"notification"}}),setTimeout((function(){pe.dispatch({type:"TOASTS_REMOVE",payload:e._id})}),5e3),rt()})),lt.on("readNotification",(function(e){pe.dispatch({type:"NOTIFICATIONS_READ",payload:e})})),lt.on("removeNotification",(function(e){var t=e.id,a=e.read,s=pe.getState().notifications.noRead;a||s--,pe.dispatch({type:"NOTIFICATIONS_SET_NO_READ",payload:s}),pe.dispatch({type:"NOTIFICATIONS_REMOVE",payload:t}),pe.dispatch({type:"TOASTS_REMOVE",payload:t})})),lt.on("readMessagesDialog",(function(e){var t=e.dialogId,a=e.userId;pe.dispatch({type:"DIALOGS_READ_MESSAGES",payload:{dialogId:t,userId:a,noRead:a!==pe.getState().user._id,noReadCount:a!==pe.getState().user._id}});var s=pe.getState().dialogs.dialogs.find((function(e){return e._id===t}));a===pe.getState().user._id&&s&&pe.dispatch({type:"DIALOGS_UPDATE_ONLINE",payload:{userId:s.user._id,online:!0,onlineAt:Date.now()}})})),lt.on("editMessageDialog",(function(e){var t,a=e.message,s=e.dialogId,o=pe.getState().dialogs.dialogs.find((function(e){return e._id===s})).lastMessage;t=!!o&&a._id===o._id,pe.dispatch({type:"DIALOGS_EDIT_MESSAGE",payload:{message:a,dialogId:s,editLast:t}})})),lt.on("deleteMessageDialog",(function(e){var t=e.messageIds,a=e.dialogId,s=e.lastMessage,o=e.noRead,n=e.noReadCount;pe.dispatch({type:"DIALOGS_DELETE_MESSAGE",payload:{dialogId:a,messageIds:t,lastMessage:s,noRead:o,noReadCount:n}})})),lt.on("typingDialog",(function(e){pe.getState().dialogs.dialogs.find((function(t){return t.user._id===e}))&&(pe.dispatch({type:"DIALOGS_SET_TYPER",payload:{userId:e,typing:!0}}),setTimeout((function(){pe.dispatch({type:"DIALOGS_SET_TYPER",payload:{userId:e,typing:!1}})}),2500),e!==pe.getState().user._id&&pe.dispatch({type:"DIALOGS_UPDATE_ONLINE",payload:{userId:e,online:!0,onlineAt:Date.now()}}))})),lt.on("sendRequestFriend",(function(t){var a=t.userId,s=t.friendStatus;pe.dispatch({type:"USERS_SET_FRIEND_STATUS",payload:{userId:a,friendStatus:s}}),pe.getState().users.pending.getted&&pe.dispatch({type:"USERS_PENDING_REMOVE",payload:{userId:a}}),pe.getState().users.requested.getted&&(pe.getState().users.users.find((function(e){return e._id===a}))?pe.dispatch({type:"USERS_REQUESTED_ADD",payload:{user:pe.getState().users.users.find((function(e){return e._id===a}))}}):fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:a})}).then((function(e){return e.json()})).then((function(e){var t=e.user,a=e.friendStatus;t.friendStatus=a,pe.dispatch({type:"USERS_ADD",payload:t}),pe.dispatch({type:"USERS_REQUESTED_ADD",payload:{user:t}})})))})),lt.on("sendAcceptFriend",(function(t){var a=t.userId,s=t.friendStatus;pe.dispatch({type:"USERS_SET_FRIEND_STATUS",payload:{userId:a,friendStatus:s}}),pe.getState().users.pending.getted&&pe.dispatch({type:"USERS_PENDING_REMOVE",payload:{userId:a}}),pe.getState().users.friends.getted&&(pe.getState().users.users.find((function(e){return e._id===a}))?pe.dispatch({type:"USERS_FRIENDS_ADD",payload:{user:pe.getState().users.users.find((function(e){return e._id===a}))}}):fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:a})}).then((function(e){return e.json()})).then((function(e){var t=e.user,a=e.friendStatus;t.friendStatus=a,pe.dispatch({type:"USERS_ADD",payload:t}),pe.dispatch({type:"USERS_FRIENDS_ADD",payload:{user:t}})})))})),lt.on("sendRemoveFriend",(function(t){var a=t.userId,s=t.friendStatus;pe.dispatch({type:"USERS_SET_FRIEND_STATUS",payload:{userId:a,friendStatus:s}}),pe.getState().users.friends.getted&&1===s&&(pe.dispatch({type:"USERS_FRIENDS_REMOVE",payload:{userId:a}}),pe.getState().users.requested.getted&&(pe.getState().users.users.find((function(e){return e._id===a}))?pe.dispatch({type:"USERS_PENDING_ADD",payload:{user:pe.getState().users.users.find((function(e){return e._id===a}))}}):fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:a})}).then((function(e){return e.json()})).then((function(e){var t=e.user,a=e.friendStatus;t.friendStatus=a,pe.dispatch({type:"USERS_ADD",payload:t}),pe.dispatch({type:"USERS_PENDING_ADD",payload:{user:t}})})))),pe.getState().users.pending.getted&&0===s&&pe.dispatch({type:"USERS_PENDING_REMOVE",payload:{userId:a}}),pe.getState().users.requested.getted&&0===s&&pe.dispatch({type:"USERS_REQUESTED_REMOVE",payload:{userId:a}})})),lt.on("sendUserCall",(function(t){fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:t})}).then((function(e){return e.json()})).then((function(e){var t=e.user;e.friendStatus;!function(){nt.currentTime=0;var e=nt.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.log(e)}))}(),pe.dispatch({type:"CALL_SET_USER",payload:{user:t,status:"incoming"}})}))})),lt.on("sendUserAcceptCall",(function(e){pe.getState().call.user&&pe.getState().call.user._id===e&&(pe.dispatch({type:"CALL_SET_STATUS",payload:"active"}),Qe(e,!0),it())})),lt.on("callOnIceCandidate",(function(e){pe.getState().call.user&&Ze(e)})),lt.on("stopUserCall",(function(e){pe.getState().call.user&&pe.getState().call.user._id===e&&(it(),ct(),"outcoming"===pe.getState().call.status&&pe.dispatch({type:"CALL_SET_STATUS",payload:"canceled"}),"incoming"===pe.getState().call.status&&pe.dispatch({type:"CALL_SET_USER",payload:{user:!1,status:"none"}}),"active"===pe.getState().call.status&&(pe.dispatch({type:"CALL_SET_USER",payload:{user:!1,status:"none"}}),Ye()))})),lt.on("callOfferSdp",(function(e){var t=e.offerSdp,a=e.media;pe.getState().call.user&&Ke({offerSdp:t,media:a})})),lt.on("callAnswerSdp",(function(e){pe.getState().call.user&&Xe(e)})),lt.on("toggleCameraCall",(function(e){var t=e.userId,a=e.media;pe.getState().call.user&&pe.getState().call.user._id===t&&pe.dispatch({type:"CALL_SET_MEDIA",payload:a})})),lt.on("muteRoom",(function(e){var t=e.roomId,a=e.muted;pe.getState().rooms.activeRoom&&pe.getState().rooms.activeRoom._id===t&&(pe.dispatch({type:"ROOMS_SET_MUTED",payload:a}),ut&&clearTimeout(ut),1e3*a.numDate<=864e5&&(ut=setTimeout((function(){pe.getState().rooms.activeRoom&&pe.getState().rooms.activeRoom._id===t&&pe.getState().rooms.activeRoom.muted&&pe.getState().rooms.activeRoom.muted.date===a.date&&pe.dispatch({type:"ROOMS_SET_MUTED",payload:!1})}),1e3*a.numDate)))})),lt.on("unmuteRoom",(function(e){pe.getState().rooms.activeRoom&&pe.getState().rooms.activeRoom._id===e&&(pe.dispatch({type:"ROOMS_SET_MUTED",payload:!1}),ut&&clearTimeout(ut))})),lt.on("banRoom",(function(e){var t=e.roomId,a=e.ban;pe.getState().rooms.activeRoom&&pe.getState().rooms.activeRoom._id===t&&(Je({roomId:t,lang:pe.getState().rooms.activeRoom.lang}),pe.dispatch({type:"ROOMS_LEAVE_ROOM"}),pe.dispatch({type:"ROOMS_JOIN_ERROR",payload:{msg:"you_banned_in_this_room",ban:a}}))})),lt.on("sendWarning",(function(e){pe.dispatch({type:"USER_SET_WARNING",payload:e})})),lt.on("ban",Object(fe.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.reload();case 1:case"end":return e.stop()}}),e)})))))},getSocketId:function(){return lt.id},joinLang:function(e){pt&&lt.emit("leaveLang",pt),lt.emit("joinLang",e),pt=e},createRoom:function(e){var t=e.room,a=e.lang;lt.emit("createRoom",{room:t,lang:a})},joinRoom:function(e){var t=e.roomId,a=e.lang;lt.emit("joinRoom",{roomId:t,lang:a,userId:pe.getState().user._id})},leaveRoom:function(e){var t=e.roomId,a=e.lang;lt.emit("leaveRoom",{roomId:t,lang:a})},sendMessageRoom:function(e){var t=e.roomId,a=e.message;lt.emit("sendMessageRoom",{roomId:t,message:a})},typingRoom:function(e){lt.emit("typingRoom",e)},sendRoomIceCandidate:function(e){var t=e.roomId,a=e.candidate;lt.emit("roomIceCandidate",{roomId:t,candidate:a})},sendRoomOfferSdp:function(e){var t=e.roomId,a=e.offerSdp;lt.emit("roomOfferSdp",{roomId:t,offerSdp:a})},sendRoomSpeaking:function(e){var t=e.roomId;lt.emit("roomSpeaking",t)},sendRoomStopSpeaking:function(e){var t=e.roomId;lt.emit("roomStopSpeaking",t)},typingDialog:function(e,t){lt.emit("typingDialog",{otherId:e,userId:t})},sendCallOfferSdp:function(e){var t=e.userId,a=e.offerSdp,s=e.media;lt.emit("callOfferSdp",{userId:t,offerSdp:a,media:s})},sendCallAnswerSdp:function(e){var t=e.userId,a=e.answerSdp;lt.emit("callAnswerSdp",{userId:t,answerSdp:a})},sendCallIceCandidate:function(e){var t=e.userId,a=e.candidate;lt.emit("callIceCandidate",{userId:t,candidate:a})},toggleCameraCall:function(e,t){lt.emit("toggleCameraCall",{userId:e,media:t})}},ht=a(21),gt=function(e){return function(t){fetch("".concat(et,"/api/dialog/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){for(var a=function(t){var a=pe.getState().dialogs.dialogs.find((function(a){return a._id===e[t]._id}));a?e[t]=a:(e[t].user=e[t].users.find((function(e){return e._id!==pe.getState().user._id})),e[t].user||(e[t].user=e[t].users[0]),e[t].typers=[])},s=0;s<e.length;s++)a(s);t({type:"DIALOGS_GET",payload:e})}))}},ft=function(e){return function(t){pe.getState().dialogs.canLoad&&(t({type:"DIALOGS_PRELOAD",payload:[]}),fetch("".concat(et,"/api/dialog/load"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({lastDialogId:pe.getState().dialogs.dialogs[pe.getState().dialogs.dialogs.length-1]._id,firstDialogId:pe.getState().dialogs.dialogs[0]._id})}).then((function(e){return e.json()})).then((function(e){for(var a=function(t){var a=pe.getState().dialogs.dialogs.find((function(a){return a._id===e[t]._id}));a?e[t]=a:(e[t].user=e[t].users.find((function(e){return e._id!==pe.getState().user._id})),e[t].user||(e[t].user=e[t].users[0]),e[t].typers=[])},s=0;s<e.length;s++)a(s);t({type:"DIALOGS_PRELOAD",payload:e})})))}},yt=function(e,t){return function(a){fetch("".concat(et,"/api/dialog/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(t){var s=t.dialog,o=t.messages;s.error?a({type:"DIALOGS_ADD",payload:{getted:!0,isNotFound:!0,user:{_id:e}}}):(s.user=s.users.find((function(e){return e._id!==pe.getState().user._id})),s.user||(s.user=s.users[0]),s.typing=!1,s.getted=!0,s.messages=o.reverse(),s.lastMessage=!1,s.canLoad=50===o.length,s.isLoading=!1,a({type:"DIALOGS_ADD",payload:s}))}))}},bt=function(e,t){return function(a){fetch("".concat(et,"/api/dialog/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){var t=e.dialog,s=e.messages;t.messages=s.reverse(),a({type:"DIALOGS_LOAD",payload:{dialogId:t._id,messages:t.messages,canLoad:50===s.length}})}))}},Et=function(e,t){return function(a){fetch("".concat(et,"/api/user/get-online"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(t){var s=t.online,o=t.onlineAt;a({type:"DIALOGS_UPDATE_ONLINE",payload:{userId:e,online:s,onlineAt:o}})}))}},vt=function(e){return function(t){t({type:"DIALOGS_SET_FORWARD",payload:e})}},Ot=function(e,t){return function(a){for(var s=new FormData,o=ue(0,1e6),n=[],r=[],i=[],c=0;c<e.images.length;c++)s.append("images"+c,e.images[c].file),n.push(e.images[c]);for(var l=0;l<e.files.length;l++)s.append("files"+l,e.files[l].file),r.push(e.files[l]);for(var p=0;p<e.sounds.length;p++)s.append("sounds"+p,e.sounds[p].file),i.push(e.sounds[p]);var u={_id:o,user:pe.getState().user,text:e.text,images:n,sounds:i,files:r,isLoading:!0,isError:!1,isRead:!1,recentMessages:e.recentMessages,createdAt:Date.now(),type:"message"};a({type:"DIALOGS_ADD_MESSAGE",payload:{message:u,dialogId:e.dialogId}});var d=[];e.recentMessages.map((function(e){return d.push(e._id),1})),e.recentMessages=d,e.socketId=mt.getSocketId(),s.append("text",e.text),s.append("recentMessages",e.recentMessages),s.append("dialogId",e.dialogId),s.append("userId",e.userId),s.append("socketId",mt.getSocketId()),fetch("".concat(et,"/api/dialog/send-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:s}).then((function(e){return e.json()})).then((function(t){if(t.error)return"max_size"===t.errors[0].msg&&ht.b.error("Max file size upload 10 Mb.",{position:ht.b.POSITION.TOP_CENTER}),a({type:"DIALOGS_ERROR_MESSAGE",payload:{_id:o,dialogId:e.dialogId}});a({type:"DIALOGS_SUCCESS_MESSAGE",payload:{_id:o,_newId:t._id,dialogId:e.dialogId}})})).catch((function(){a({type:"DIALOGS_ERROR_MESSAGE",payload:{_id:o,dialogId:e.dialogId}})}))}},St=function(e,t){return function(a){for(var s=new FormData,o=[],n=[],r=[],i=[],c=[],l=[],p=0;p<e.images.length;p++)e.images[p].file?(s.append("images"+p,e.images[p].file),o.push(e.images[p])):i.push(e.images[p].id);for(var u=0;u<e.files.length;u++)e.files[u].file?(s.append("files"+u,e.files[u].file),n.push(e.files[u])):c.push(e.files[u].id);for(var d=0;d<e.sounds.length;d++)e.sounds[d].file?(s.append("sounds"+d,e.sounds[d].file),r.push(e.sounds[d])):l.push(e.sounds[d].id);var m={_id:e._id,user:pe.getState().user,text:e.text,images:e.images,sounds:e.sounds,files:e.files,isLoading:!0,isError:!1,recentMessages:e.recentMessages},h=pe.getState().dialogs.dialogs.find((function(t){return t._id===e.dialogId})).messages[pe.getState().dialogs.dialogs.find((function(t){return t._id===e.dialogId})).messages.length-1];a({type:"DIALOGS_EDIT_MESSAGE",payload:{message:m,dialogId:e.dialogId,editLast:h._id===e._id}});var g=[];e.recentMessages.map((function(e){return g.push(e._id),1})),e.recentMessages=g,e.socketId=mt.getSocketId(),s.append("_id",e._id),s.append("text",e.text),s.append("recentMessages",e.recentMessages),s.append("userId",e.userId),s.append("dialogId",e.dialogId),s.append("socketId",mt.getSocketId()),s.append("oldImages",i),s.append("oldSounds",l),s.append("oldFiles",c),fetch("".concat(et,"/api/dialog/edit-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:s}).then((function(e){return e.json()})).then((function(t){if(t.error)return"max_size"===t.errors[0].msg&&ht.b.error("Max file size upload 10 Mb.",{position:ht.b.POSITION.TOP_CENTER}),a({type:"DIALOGS_ERROR_MESSAGE",payload:{_id:e._id,dialogId:e.dialogId}});a({type:"DIALOGS_SUCCESS_MESSAGE",payload:{_id:e._id,_newId:e._id,dialogId:e.dialogId}})})).catch((function(){a({type:"DIALOGS_ERROR_MESSAGE",payload:{_id:e._id,dialogId:e.dialogId}})}))}},_t=function(e,t){var a=e.dialogId,s=e.userId,o=e.otherId;return function(e){var n=pe.getState().dialogs.dialogs.find((function(e){return e._id===a})).messages.filter((function(e){return!e.isRead&&e.user._id!==s}));setTimeout((function(){n.length&&e({type:"DIALOGS_READ_MESSAGES",payload:{dialogId:a,userId:o,noRead:!0,noReadCount:!0}})}),1),n.length&&fetch("".concat(et,"/api/dialog/read-messages"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dialogId:a,otherId:o,socketId:mt.getSocketId()})}).then().catch((function(){}))}},jt=function(e,t){return function(a){for(var s=e.dialogId,o=new FormData,n=[],r=[],i=[],c=0;c<e.images.length;c++)o.append("images"+c,e.images[c].file),n.push(e.images[c]);for(var l=0;l<e.files.length;l++)o.append("files"+l,e.files[l].file),r.push(e.files[l]);for(var p=0;p<e.sounds.length;p++)o.append("sounds"+p,e.sounds[p].file),i.push(e.sounds[p]);var u={_id:e._id,user:pe.getState().user,text:e.text,images:e.images,sounds:[],files:[],isLoading:!0,isError:!1,recentMessages:e.recentMessages,createdAt:Date.now(),type:"message"};a({type:"DIALOGS_DELETE_MESSAGE",payload:{dialogId:s,messageIds:[e._id],lastMessage:!1}}),a({type:"DIALOGS_ADD_MESSAGE",payload:{message:u,dialogId:e.dialogId}});var d=[];e.recentMessages.map((function(e){return d.push(e._id),1})),e.recentMessages=d,e.socketId=mt.getSocketId(),o.append("text",e.text),o.append("recentMessages",e.recentMessages),o.append("userId",e.userId),o.append("dialogId",e.dialogId),o.append("socketId",mt.getSocketId()),fetch("".concat(et,"/api/dialog/send-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:o}).then((function(e){return e.json()})).then((function(t){if(t.error)return a({type:"DIALOGS_ERROR_MESSAGE",payload:{_id:e._id,dialogId:e.dialogId}});a({type:"DIALOGS_SUCCESS_MESSAGE",payload:{_id:e._id,_newId:t._id,dialogId:e.dialogId}})})).catch((function(){a({type:"DIALOGS_ERROR_MESSAGE",payload:{_id:e._id,dialogId:e.dialogId}})}))}},Rt=function(e,t){var a=e.dialogId,s=e.otherId,o=e.deleteMessages;return function(e){var n,r=[];o.map((function(e){return r.push(e._id),1})),n=!(!pe.getState().dialogs.dialogs.find((function(e){return e._id===a}))||!pe.getState().dialogs.dialogs.find((function(e){return e._id===a})).messages.length)&&pe.getState().dialogs.dialogs.find((function(e){return e._id===a})).messages.filter((function(e){return!r.find((function(t){return t===e._id}))})).pop(),e({type:"DIALOGS_DELETE_MESSAGE",payload:{dialogId:a,messageIds:r,lastMessage:n}}),fetch("".concat(et,"/api/dialog/delete-message"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dialogId:a,otherId:s,messageIds:r,socketId:mt.getSocketId()})}).then().catch((function(){}))}},kt=function(e,t){return function(a){var s,o=[e];s=!(!pe.getState().dialogs.dialogs.find((function(e){return e._id===t}))||!pe.getState().dialogs.dialogs.find((function(e){return e._id===t})).messages.length)&&pe.getState().dialogs.dialogs.find((function(e){return e._id===t})).messages.filter((function(e){return!o.find((function(t){return t===e._id}))})).pop(),a({type:"DIALOGS_DELETE_MESSAGE",payload:{dialogId:t,messageIds:o,lastMessage:s}})}},At=function(e,t){var a=e.dialogId;return function(e){var s=pe.getState().dialogs.dialogs.find((function(e){return e._id===a})).messages[0];e({type:"DIALOGS_SET_LOADING",payload:a}),fetch("".concat(et,"/api/dialog/load-messages"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dialogId:a,lastMessageId:s._id})}).then((function(e){return e.json()})).then((function(t){e({type:"DIALOGS_LOAD_MESSAGES",payload:{dialogId:a,messages:t.reverse(),canLoad:50===t.length}})})).catch((function(){}))}},xt=a(720),Tt=a(721),It=a(31),Nt=a(725);var Ct,Mt,wt=a(64),Ft=(a(152),a(13)),Dt=a(47),Lt=a(719),Pt=a(11),Bt={ru:(Ct={settings:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",change_profile:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",language:"\u042f\u0437\u044b\u043a",logout:"\u0412\u044b\u0439\u0442\u0438",back:"\u041d\u0430\u0437\u0430\u0434",save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",next:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",firstName:"\u0418\u043c\u044f",lastName:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",city:"\u0413\u043e\u0440\u043e\u0434",last_name_not_empty:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439",first_name_not_empty:"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",title_not_empty:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",rooms:"\u041a\u043e\u043c\u043d\u0430\u0442\u044b",create_room:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443",something_goes_wrong:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a...",chats:"\u0427\u0430\u0442\u044b",notifications:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",contacts:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",friends:"\u0414\u0440\u0443\u0437\u044c\u044f",inbox:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",outbox:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435",you_dont_have_friends:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u0440\u0443\u0437\u0435\u0439, \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0438\u0445",search:"\u041f\u043e\u0438\u0441\u043a",message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",call:"\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c",accept:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c",decline:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c",not_indicated:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",plus_friend:"+ \u0414\u0440\u0443\u0433",remove:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",english:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439",russian:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",you:"\u0412\u044b",write_message:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",show_investments:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u044f",you_sure:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",delete_room:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443",invite_friends:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439",edit_room:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443",investments:"\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u044f",photos:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",sounds:"\u0410\u0443\u0434\u0438\u043e",files:"\u0424\u0430\u0439\u043b\u044b",online:"\u043e\u043d\u043b\u0430\u0439\u043d",missed_call:"\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0439 \u0437\u0432\u043e\u043d\u043e\u043a",outcoming_call:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0437\u0432\u043e\u043d\u043e\u043a",incoming_call:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0437\u0432\u043e\u043d\u043e\u043a",canceled_call:"\u041e\u0442\u043c\u0435\u043d\u0451\u043d\u043d\u044b\u0439 \u0437\u0432\u043e\u043d\u043e\u043a",select_language:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044f\u0437\u044b\u043a",users_not_found:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",user_not_found:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",reply:"\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c",forward:"\u041f\u0435\u0440\u0435\u0441\u043b\u0430\u0442\u044c",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",new_room:"\u041d\u043e\u0432\u0430\u044f \u043a\u043e\u043c\u043d\u0430\u0442\u0430",invite:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c",private_room:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u0430\u044f \u043a\u043e\u043c\u043d\u0430\u0442\u0430",start:"\u041d\u0430\u0447\u0430\u0442\u044c",select_users:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",new_chat:"\u041d\u043e\u0432\u044b\u0439 \u0447\u0430\u0442",invited_you_to_the_room:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u043b(\u0430) \u0432\u0430\u0441 \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0443",accept_your_friend_request:"\u041f\u0440\u0438\u043d\u044f\u043b(\u0430) \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0434\u0440\u0443\u0437\u044c\u044f",send_you_friend_request:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b(\u0430) \u0432\u0430\u043c \u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0434\u0440\u0443\u0437\u044c\u044f",you_are_not_invited:"\u0412\u044b \u043d\u0435 \u0431\u044b\u043b\u0438 \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u043d\u044b \u0432 \u044d\u0442\u0443 \u043a\u043e\u043c\u043d\u0430\u0442\u0443",january:"\u042f\u043d\u0432\u0430\u0440\u044c",february:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",march:"\u041c\u0430\u0440\u0442",april:"\u0410\u043f\u0440\u0435\u043b\u044c",may:"\u041c\u0430\u0439",june:"\u0418\u044e\u043d\u044c",july:"\u0418\u044e\u043b\u044c",august:"\u0410\u0432\u0433\u0443\u0441\u0442",september:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",october:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",november:"\u041d\u043e\u044f\u0431\u0440\u044c",december:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",jan:"\u042f\u043d\u0432",feb:"\u0424\u0435\u0432",mar:"\u041c\u0430\u0440",apr:"\u0410\u043f\u0440",jun:"\u0418\u044e\u043d",jul:"\u0418\u044e\u043b",aug:"\u0410\u0432\u0433",sep:"\u0421\u0435\u043d",oct:"\u041e\u043a\u0442",nov:"\u041d\u043e\u044f",dec:"\u0414\u0435\u043a",in:"\u0432",yerstaday:"\u0432\u0447\u0435\u0440\u0430",today:"\u0441\u0435\u0433\u043e\u0434\u043d\u044f",just_now:"\u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e",here_wiil_placed_your_notifications:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432\u0430\u0448\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",create_your_first_room:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u0435\u0440\u0432\u0443\u044e \u043a\u043e\u043c\u043d\u0430\u0442\u0443 \u0432 \u044d\u0442\u043e\u043c \u044f\u0437\u044b\u043a\u0435",you_dont_have_chats:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0447\u0430\u0442\u043e\u0432, \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0435\u0433\u043e",write_your_first_message:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u043f\u0435\u0440\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0434\u043b\u044f",typing:"\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442",attachment_messages:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",messages:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",have_max_rooms:"\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u043a\u043e\u043c\u043d\u0430\u0442",room_exist:"\u041a\u043e\u043c\u043d\u0430\u0442\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",have_active_call:"\u0418\u043c\u0435\u0435\u0442\u0441\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0437\u0432\u043e\u043d\u043e\u043a",error:"\u041e\u0448\u0438\u0431\u043a\u0430",force_accept_text:"\u0415\u0441\u043b\u0438 \u0432\u044b \u043f\u0440\u0438\u043c\u0438\u0442\u0435 \u043b\u0438\u0447\u043d\u044b\u0439 \u0437\u0432\u043e\u043d\u043e\u043a, \u0442\u043e \u0432\u0430\u0448 \u0437\u0432\u043e\u043d\u043e\u043a \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f.",force_join_text:"\u0415\u0441\u043b\u0438 \u0432\u044b \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u0442\u0435 \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0443, \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043b\u0438\u0447\u043d\u044b\u0439 \u0437\u0432\u043e\u043d\u043e\u043a \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f.",force_place_text:"\u0415\u0441\u043b\u0438 \u0432\u044b \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u0442\u0435 \u043b\u0438\u0447\u043d\u044b\u0439 \u0437\u0432\u043e\u043d\u043e\u043a, \u0442\u043e \u0432\u0430\u0448 \u0437\u0432\u043e\u043d\u043e\u043a \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f.",delete_room_text:"\u041f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0432\u044b \u0438 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0449\u0438\u0435 \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0435 \u043e\u0441\u0442\u0430\u043d\u0443\u0442\u0441\u044f \u0432 \u043d\u0435\u0439, \u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0439\u0442\u0438.",close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",user_busy:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u043d\u044f\u0442...",cancel_your_call:"\u043e\u0442\u043a\u043b\u043e\u043d\u0438\u043b \u0432\u0430\u0448 \u0437\u0432\u043e\u043d\u043e\u043a",empty_inv_files:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0444\u0430\u0439\u0434\u044b \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u0430",empty_inv_sounds:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0430\u0443\u0434\u0438\u043e \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u0430",empty_inv_images:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u0430",you_banned_in_this_room:"\u0412\u044b \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b \u0432 \u044d\u0442\u043e\u0439 \u043a\u043e\u043c\u043d\u0430\u0442\u0435",to:"\u0434\u043e",incoming_request_empty:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b",outgoing_request_empty:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b",day_1:"\u0434\u0435\u043d\u044c",day_2:"\u0434\u043d\u044f",day_5:"\u0434\u043d\u0435\u0439",minute_1:"\u043c\u0438\u043d\u0443\u0442\u0443",minute_2:"\u043c\u0438\u043d\u0443\u0442\u044b",minute_5:"\u043c\u0438\u043d\u0443\u0442",hour_1:"\u0447\u0430\u0441",hour_2:"\u0447\u0430\u0441\u0430",hour_5:"\u0447\u0430\u0441\u043e\u0432",week_1:"\u043d\u0435\u0434\u0435\u043b\u044e",week_2:"\u043d\u0435\u0434\u0435\u043b\u0438",week_5:"\u043d\u0435\u0434\u0435\u043b\u044c",ago:"\u043d\u0430\u0437\u0430\u0434"},Object(Pt.a)(Ct,"first_name_not_empty","\u0418\u043c\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),Object(Pt.a)(Ct,"first_name_is_string","\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0439"),Object(Pt.a)(Ct,"first_name_is_min","\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),Object(Pt.a)(Ct,"last_name_not_empty","\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439"),Object(Pt.a)(Ct,"last_name_is_string","\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0439"),Object(Pt.a)(Ct,"last_name_is_min","\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),Object(Pt.a)(Ct,"email_is_invalid","Email \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439"),Object(Pt.a)(Ct,"email_not_empty","Email \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),Object(Pt.a)(Ct,"password_is_min","\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),Object(Pt.a)(Ct,"email_or_password_wrong","Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439"),Object(Pt.a)(Ct,"email_already","Email \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442"),Object(Pt.a)(Ct,"connecting","\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"),Object(Pt.a)(Ct,"you_have_invite_users","\u0412\u044b \u0443\u0436\u0435 \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0430\u043b\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),Object(Pt.a)(Ct,"invited_sents","\u041f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b!"),Object(Pt.a)(Ct,"force_toast_text","\u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u0432\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u043e\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u043a\u043e\u043c\u043d\u0430\u0442\u044b."),Object(Pt.a)(Ct,"here_will_your_orders","\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432\u0430\u0448\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"),Object(Pt.a)(Ct,"my_orders","\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"),Object(Pt.a)(Ct,"booked","\u0417\u0430\u043a\u0430\u0437\u0430\u043d"),Object(Pt.a)(Ct,"paid","\u041e\u043f\u043b\u0430\u0447\u0435\u043d"),Object(Pt.a)(Ct,"active","\u0410\u043a\u0442\u0438\u0432\u0435\u043d"),Object(Pt.a)(Ct,"ended","\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0441\u044f"),Object(Pt.a)(Ct,"pay_success_true","\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u043f\u043b\u0430\u0447\u0435\u043d"),Object(Pt.a)(Ct,"pay_success_false","\u0417\u0430\u043a\u0430\u0437 \u043d\u0435 \u0431\u044b\u043b \u043e\u043f\u043b\u0430\u0447\u0435\u043d"),Object(Pt.a)(Ct,"pick_a_plan_continue","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043b\u0430\u043d \u0447\u0442\u043e \u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"),Object(Pt.a)(Ct,"buy","\u041a\u0443\u043f\u0438\u0442\u044c"),Object(Pt.a)(Ct,"hi","\u041f\u0440\u0438\u0432\u0435\u0442"),Object(Pt.a)(Ct,"already_tariff","\u0423 \u0432\u0430\u0441 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0442\u0430\u0440\u0438\u0444"),Ct),en:(Mt={settings:"Settings",change_profile:"Change profile",language:"Language",logout:"Logout",back:"Back",save:"Save",next:"Next",firstName:"First name",lastName:"Last name",city:"City",last_name_not_empty:"First name cannot be empty",first_name_not_empty:"Last name cannot be empty",title_not_empty:"Title cannot be empty",rooms:"Rooms",create_room:"Create room",something_goes_wrong:"Something goes wrong...",chats:"Chats",notifications:"Notifications",contacts:"Contacts",friends:"Friends",inbox:"Inbox",outbox:"Outbox",you_dont_have_friends:"You dont have friends, lets add him",search:"Search",message:"Message",call:"Call",accept:"Accept",decline:"Decline",not_indicated:"Not indicated",plus_friend:"+ Friend",remove:"Remove",english:"English",russian:"Russian",you:"You",write_message:"Write message...",show_investments:"Show investments",outcoming_call:"Outcoming call",incoming_call:"Incoming call",online:"online",invite:"Invite",delete_room:"Delete room",invite_friends:"Invite friends",edit_room:"Edit room",you_sure:"You sure?",delete:"Delete",investments:"Investments",photos:"Photos",sounds:"Sounds",files:"Files",missed_call:"Missed call",canceled_call:"Canceled call",select_language:"Select language",users_not_found:"Users not found",user_not_found:"User not found",reply:"Reply",forward:"Forward",title:"Title",new_room:"New room",private_room:"Private room",start:"Start",select_users:"Select users",new_chat:"New chat",invited_you_to_the_room:"Invited you to the room",accept_your_friend_request:"Accept your friend request",send_you_friend_request:"Send you friend request",you_are_not_invited:"You dont have invited in this room",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec",in:"in",yerstaday:"yerstaday",today:"Today",just_now:"just now",here_wiil_placed_your_notifications:"Here will placed your notifications",create_your_first_room:"Create your first room in this language",you_dont_have_chats:"You dont have chats, lets create new",write_your_first_message:"Write your first message to",typing:"typing",attachment_messages:"Attachment messages",messages:"Messages",have_max_rooms:"Create max limit rooms",room_exist:"A room with that name exists",have_active_call:"Have active call",error:"Error",force_accept_text:"If you accept a personal call, your room call will end.",force_join_text:"If you move to a room, the current personal call ends.",force_place_text:"If you make a personal call, then your call in the room will end.",delete_room_text:"After deleting, you and those present in the room will remain in it, but no one else will be able to enter.",close:"Close",user_busy:"The user is busy...",cancel_your_call:"canceled your call",empty_inv_files:"Here will placed files from this dialog",empty_inv_sounds:"Here will placed sounds from this dialog",empty_inv_images:"Here will placed images from this dialog",you_banned_in_this_room:"You blocked in this room",to:"to",incoming_request_empty:"Incoming requests will be displayed here",outgoing_request_empty:"Outgoing requests will be displayed here",day_1:"day",day_2:"days",day_5:"days",minute_1:"minute",minute_2:"minutes",minute_5:"minutes",hour_1:"hour",hour_2:"hours",hour_5:"hours",week_1:"week",week_2:"weeks",week_5:"weeks",ago:"ago"},Object(Pt.a)(Mt,"first_name_not_empty","First name must not be empty"),Object(Pt.a)(Mt,"first_name_is_string","First name must be a string"),Object(Pt.a)(Mt,"first_name_is_min","First name contain at least 2 characters"),Object(Pt.a)(Mt,"last_name_not_empty","Last name must not be empty"),Object(Pt.a)(Mt,"last_name_is_string","Last name must be a string"),Object(Pt.a)(Mt,"last_name_is_min","Last name contain at least 2 characters"),Object(Pt.a)(Mt,"email_is_invalid","Email is invalid"),Object(Pt.a)(Mt,"email_not_empty","Email must not be empty"),Object(Pt.a)(Mt,"password_is_min","Password must contain at least 8 characters "),Object(Pt.a)(Mt,"email_or_password_wrong","Email or password wrong"),Object(Pt.a)(Mt,"email_already","Email already uses"),Object(Pt.a)(Mt,"connecting","Connecting"),Object(Pt.a)(Mt,"you_have_invite_users","You've already invited some users"),Object(Pt.a)(Mt,"invited_sents","Invited sents!"),Object(Pt.a)(Mt,"force_toast_text","After the transition, you will be disconnected from the active room."),Object(Pt.a)(Mt,"here_will_your_orders","Your orders will be located here"),Object(Pt.a)(Mt,"my_orders","My orders"),Object(Pt.a)(Mt,"booked","Booked"),Object(Pt.a)(Mt,"paid","Paid"),Object(Pt.a)(Mt,"active","Active"),Object(Pt.a)(Mt,"ended","Ended"),Object(Pt.a)(Mt,"pay_success_true","Order successfully paid"),Object(Pt.a)(Mt,"pay_success_false","The order was not paid"),Object(Pt.a)(Mt,"pick_a_plan_continue","Pick a plan to continue"),Object(Pt.a)(Mt,"buy","Buy"),Object(Pt.a)(Mt,"hi","Hi"),Object(Pt.a)(Mt,"already_tariff","You already have an active tariff"),Mt)};function Ut(e){var t=new Date(e),a=t.getHours(),s=t.getMinutes();return 1===s.toString().length&&(s="0"+s),1===a.toString().length&&(a="0"+a),a+":"+s}function zt(e){var t=pe.getState().user.lang,a=new Date(e),s=a.getHours(),o=a.getMinutes();1===o.toString().length&&(o="0"+o),1===s.toString().length&&(s="0"+s);var n=(new Date).getDate()-a.getDate(),r=(new Date).getFullYear()-a.getFullYear(),i=a.getFullYear(),c=a.getMonth()+1,l=a.getDate();if(r>0)return i.toString()+"."+(c<10?"0"+c.toString():c.toString())+"."+(l<10?"0"+l.toString():l.toString());var p=[Bt[t].jan,Bt[t].feb,Bt[t].mar,Bt[t].apr,Bt[t].may,Bt[t].jun,Bt[t].jul,Bt[t].aug,Bt[t].sep,Bt[t].oct,Bt[t].nov,Bt[t].dec];return 0===n&&s+":"+o||1===n&&Bt[t].yerstaday||0===r&&l+" "+p[c-1]}function Gt(e){var t=pe.getState().user.lang,a=new Date(e),s=a.getHours(),o=a.getMinutes();1===o.toString().length&&(o="0"+o),1===s.toString().length&&(s="0"+s);var n=a.getFullYear(),r=a.getMonth()+1,i=a.getDate(),c=((new Date).getTime()-a.getTime())/1e3,l=(new Date).getDate()-a.getDate(),p=(new Date).getMonth()+1-(a.getMonth()+1);return isNaN(l)||l<0||p>=1?n.toString()+"."+(r<10?"0"+r.toString():r.toString())+"."+(i<10?"0"+i.toString()+" in "+s+":"+o:i.toString()+" in "+s+":"+o):0===l&&(c<60&&Bt[t].just_now||c<120&&"1 "+Bt[t].minute_1+" "+Bt[t].ago||c<3600&&Math.floor(c/60)+" "+Wt(Math.ceil(c/60),[Bt[t].minute_1,Bt[t].minute_2,Bt[t].minute_5])+" "+Bt[t].ago||c<7200&&"1 "+Bt[t].hour_1+" "+Bt[t].ago||c<86400&&Math.floor(c/3600)+" "+Wt(Math.ceil(c/3600),[Bt[t].hour_1,Bt[t].hour_2,Bt[t].hour_5])+" "+Bt[t].ago)||1===l&&Bt[t].yerstaday+" "+Bt[t].in+" "+s+":"+o||l<7&&l+" "+Wt(Math.ceil(l),[Bt[t].day_1,Bt[t].day_2,Bt[t].day_5])+" "+Bt[t].ago+" "+Bt[t].in+" "+s+":"+o||l<31&&Math.ceil(l/7)+" "+Wt(Math.ceil(l/7),[Bt[t].week_1,Bt[t].week_2,Bt[t].week_5])+" "+Bt[t].ago+" "+Bt[t].in+" "+s+":"+o}function Wt(e,t){var a=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:a>1&&a<5?t[1]:1==a?t[0]:t[2]}var qt=a(157),Jt=a.n(qt),Ht=a(158),Vt=a.n(Ht),Qt=a(156),Yt=a.n(Qt),$t=a(87),Kt=a.n($t),Xt=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={active:!1,left:0,top:0},e}return Object(h.a)(a,[{key:"toggleActive",value:function(e){var t=this,a=document.getElementById(this.props.from);if(a){var s=!1;(e.path||e.composedPath&&e.composedPath()).find((function(e){return e.id===t.props.from}))&&(e.stopPropagation(),s=!0);var o,n,r=a.getBoundingClientRect();this.props.bottom?(o=r.y+a.clientHeight,n=r.x,this.props.right&&(n=r.x+a.clientWidth)):(o=r.y,n=r.x+a.clientWidth),this.setState({left:n,top:o}),("click"===this.props.event&&(this.state.active||s)||"hover"===this.props.event)&&this.setState({active:!this.state.active})}}},{key:"componentDidMount",value:function(){"hover"===this.props.event&&(document.getElementById(this.props.from).addEventListener("mouseenter",this.toggleActive.bind(this)),document.getElementById(this.props.from).addEventListener("mouseleave",this.toggleActive.bind(this))),"click"===this.props.event&&(document.getElementById(this.props.from).addEventListener("click",this.toggleActive.bind(this)),document.body.addEventListener("click",this.toggleActive.bind(this)))}},{key:"componentWillUnmount",value:function(){"hover"===this.props.event&&(document.getElementById(this.props.from).removeEventListener("mouseenter",this.toggleActive.bind(this)),document.getElementById(this.props.from).removeEventListener("mouseleave",this.toggleActive.bind(this))),"click"===this.props.event&&(document.getElementById(this.props.from).removeEventListener("click",this.toggleActive.bind(this)),document.body.removeEventListener("click",this.toggleActive.bind(this)))}},{key:"render",value:function(){return p.a.createElement("div",{style:{left:this.state.left,top:this.state.top,transform:this.props.bottom?this.props.right?"translateX(-100%)":"none":null},className:"action-menu-container ".concat(this.state.active?"active":"")},p.a.createElement("div",{className:"action-menu"},this.props.actions.map((function(e,t){return e?p.a.createElement(Lt.a,{key:t,onClick:function(){e.action()},className:"action-button"},e.text):null}))))}}]),a}(p.a.Component),Zt=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={randomId:ue(0,1e5)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Ft.c,{style:{textDecoration:"none"},onClick:function(t){"/chats/".concat(e.props.user._id)===e.props.history.location.pathname&&t.preventDefault()},className:"dialog-link",to:"/chats/".concat(this.props.user._id)},p.a.createElement(Lt.a,{className:"dialog-item"},p.a.createElement(R,{avatar:!!this.props.user.avatar&&this.props.user.avatar,online:this.props.user.online,style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.user.color,")")},name:this.props.user.name.first.charAt(0)+this.props.user.name.last.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",{className:"user-name"},p.a.createElement("span",null,"".concat(this.props.user.name.first," ").concat(this.props.user.name.last))),!this.props.typing&&p.a.createElement("p",{className:"last-message"},this.props.lastMessage.user._id===this.props.myUser._id&&p.a.createElement("span",{style:{color:"#999999"}},this.props.langProps.you,":\xa0"),this.props.lastMessage.text&&p.a.createElement("span",{className:"content",style:{color:"call"===this.props.lastMessage.type?"#008FF7":null}},"call"===this.props.lastMessage.type?this.props.langProps[this.props.lastMessage.text]:this.props.lastMessage.text),!this.props.lastMessage.text&&1===this.props.lastMessage.images.length&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"content",style:{color:"#008FF7"}},"Photo")),!this.props.lastMessage.text&&this.props.lastMessage.images.length>1&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"content",style:{color:"#008FF7"}},this.props.langProps.photos," [",this.props.lastMessage.images.length,"]")),!this.props.lastMessage.text&&!this.props.lastMessage.images.length&&1===this.props.lastMessage.sounds.length&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"content",style:{color:"#008FF7"}},"Sound")),!this.props.lastMessage.text&&!this.props.lastMessage.images.length&&this.props.lastMessage.sounds.length>1&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"content",style:{color:"#008FF7"}},this.props.langProps.sounds," [",this.props.lastMessage.sounds.length,"]")),!this.props.lastMessage.text&&!this.props.lastMessage.images.length&&!this.props.lastMessage.sounds.length&&1===this.props.lastMessage.files.length&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"content",style:{color:"#008FF7"}},"File")),!this.props.lastMessage.text&&!this.props.lastMessage.images.length&&!this.props.lastMessage.sounds.length&&this.props.lastMessage.files.length>1&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"content",style:{color:"#008FF7"}},this.props.langProps.files," [",this.props.lastMessage.files.length,"]")),!this.props.lastMessage.text&&!this.props.lastMessage.images.length&&!this.props.lastMessage.sounds.length&&!this.props.lastMessage.files.length&&!!this.props.lastMessage.recentMessages.length&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"content",style:{color:"#008FF7"}},"Attachment messages [",this.props.lastMessage.recentMessages.length,"]"))),this.props.typing&&p.a.createElement("p",{className:"last-message typing"},"typing")),p.a.createElement("div",{className:"dialog-info"},p.a.createElement("span",{className:"time-at"},zt(this.props.lastMessage.createdAt)),p.a.createElement(wt.CSSTransitionGroup,{transitionName:"message-status-transition",transitionEnterTimeout:100,transitionLeaveTimeout:100},this.props.lastMessage.user._id===this.props.myUser._id&&!this.props.lastMessage.isError&&this.props.lastMessage.isLoading&&p.a.createElement(Yt.a,{style:{marginTop:2,fontSize:16,color:"#B8C3CF"}}),this.props.lastMessage.user._id===this.props.myUser._id&&!this.props.lastMessage.isError&&!this.props.lastMessage.isLoading&&!this.props.lastMessage.isRead&&p.a.createElement(Jt.a,{style:{marginTop:2,fontSize:16,color:"#B8C3CF"}}),this.props.lastMessage.user._id===this.props.myUser._id&&!this.props.lastMessage.isError&&!this.props.lastMessage.isLoading&&this.props.lastMessage.isRead&&p.a.createElement(Vt.a,{style:{marginTop:2,fontSize:16,color:"#008FF7"}}),this.props.lastMessage.user._id!==this.props.myUser._id&&!!this.props.noRead&&p.a.createElement("span",{className:"unread-messages-count"},this.props.noRead),this.props.lastMessage.user._id!==this.props.myUser._id&&!this.props.noRead&&p.a.createElement("span",{style:{height:18}}),this.props.lastMessage.user._id===this.props.myUser._id&&!this.props.lastMessage.isLoading&&this.props.lastMessage.isError&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Xt,{event:"hover",actions:[{text:"Retry",action:function(){var t=e.props.lastMessage;t.userId=e.props.user._id,t.dialogId=e.props.dialogId,e.props.dialogsActions.retrySendMessage(t,e.props.myUser.apiToken)}},{text:"Delete",action:function(){e.props.dialogsActions.deleteLocalMessage(e.props.lastMessage._id,e.props.dialogId)}}],from:"message-error-actions-"+this.state.randomId}),p.a.createElement(Kt.a,{className:"error",id:"message-error-actions-"+this.state.randomId,style:{marginTop:2,fontSize:16,color:"#FF3333"}}))))))}}]),a}(p.a.Component);var ea=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{myUser:e.user}}),(function(e){return{dialogsActions:Object(L.b)(s,e)}}))(Object(Dt.g)(Zt))),ta=a(332),aa=a.n(ta),sa=Object(It.a)((function(e){return{root:{backgroundColor:"#008FF7",position:"absolute",bottom:20,right:20,"&:hover":{backgroundColor:"#008FF7"}}}}))(xt.a),oa=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={showBtnAdd:!0,scrollTop:0},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.context.toggleHeader(!0)}},{key:"onScroll",value:function(){this.state.scrollTop<this.messagesBlock.getScrollTop()?this.state.showBtnAdd&&this.setState({showBtnAdd:!1}):this.state.showBtnAdd||this.setState({showBtnAdd:!0}),this.messagesBlock.getScrollHeight()-(this.messagesBlock.getClientHeight()+this.messagesBlock.getScrollTop())===0&&this.props.dialogsActions.dialogsLoad(this.props.user.apiToken),this.setState({scrollTop:this.messagesBlock.getScrollTop()})}},{key:"shouldComponentUpdate",value:function(e,t){return t.scrollTop===this.state.scrollTop}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"render",value:function(){var e,t=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-xl-3 col-lg-6 col-md-6 sidebar",style:{overflow:"hidden"}},p.a.createElement("h2",{className:"sidebar-title"},this.props.langProps.chats),p.a.createElement(w.Scrollbars,{ref:function(e){t.messagesBlock=e},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",onScroll:function(){t.onScroll()},style:{height:"calc(100% - 78px)"},autoHide:!0},this.props.dialogs.isFetching&&(e=p.a.createElement("div",{className:"room-item"},p.a.createElement(Tt.a,{variant:"circle",width:40,height:40}),p.a.createElement(Tt.a,{variant:"text",style:{marginLeft:12,flex:"1 1"}})),p.a.createElement(p.a.Fragment,null,e,e,e,e,e,e,e,e,e,e)),this.props.dialogs.dialogs.map((function(e,t){return e.lastMessage&&p.a.createElement(ea,{key:t,dialogId:e._id,typing:e.typing,noRead:e.noRead,lastMessage:e.lastMessage,user:e.user})}))),!this.props.dialogs.dialogs.find((function(e){return e.lastMessage}))&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(aa.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.you_dont_have_chats)),p.a.createElement(Nt.a,{title:"Create dialog",className:"scroll-to-bottom ".concat(this.state.showBtnAdd?"active":""),placement:"top"},p.a.createElement(sa,{color:"primary",size:"small","aria-label":"add",onClick:function(){t.props.history.push({search:"?act=newChat"})}},p.a.createElement(j.a,null)))))}}]),a}(p.a.Component);oa.contextType=y;var na=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms,dialogs:e.dialogs}}),(function(e){return{dialogsActions:Object(L.b)(s,e)}}))(Object(Dt.g)(oa))),ra=a(67),ia=a.n(ra),ca=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Ft.b,{style:{textDecoration:"none"},onClick:function(t){e.props.call.user&&(t.preventDefault(),pe.dispatch({type:"ROOMS_SET_FORCE",payload:e.props.room._id}))},to:"/rooms/".concat(this.props.room._id)},p.a.createElement(Lt.a,{className:"room-item",title:"Room ".concat(this.props.room.title)},p.a.createElement(R,{style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.room.color,")")},name:this.props.room.title.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,this.props.room.isPrivate&&p.a.createElement(ia.a,null),p.a.createElement("span",null,this.props.room.title)),p.a.createElement("div",{className:"users",style:{overflow:"hidden"}},this.props.room.users.map((function(e,t){return p.a.createElement(R,{key:t,avatar:!!e.avatar&&e.avatar,style:{minWidth:16,maxWidth:16,height:16,fontSize:8,backgroundColor:"rgb(".concat(e.color,")")},name:e.name.first.charAt(0)+e.name.last.charAt(0)})}))))))}}]),a}(p.a.Component),la=Object(D.b)((function(e){return{rooms:e.rooms,call:e.call}}))(ca),pa=!1,ua=function(e,t){return function(a){a({type:"ROOMS_SET_GET"}),fetch("".concat(et,"/api/room/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({lang:t})}).then((function(e){return e.json()})).then((function(e){a({type:"ROOMS_GET",payload:e}),mt.joinLang(t)})).catch((function(e){a({type:"ROOMS_GET_ERROR"})}))}},da=function(e){return function(t){t({type:"ROOMS_ADD",payload:e})}},ma=function(e,t){return function(a){pe.getState().rooms.canLoad&&(a({type:"ROOMS_PRELOAD",payload:[]}),fetch("".concat(et,"/api/room/load"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({lastRoomId:pe.getState().rooms.rooms[pe.getState().rooms.rooms.length-1]._id,firstRoomId:pe.getState().rooms.rooms[0]._id,lang:t})}).then((function(e){return e.json()})).then((function(e){a({type:"ROOMS_PRELOAD",payload:e})})))}},ha=function(e){var t=e.id,a=e.apiToken;return function(e){fetch("".concat(et,"/api/room/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({id:t,socketId:mt.getSocketId()})}).then((function(e){return e.json()})).then((function(t){if(t.error)return me("Error"),void e({type:"ROOMS_JOIN_ERROR",payload:t.errors[0]});var a=t.room,s=t.muted;a.dialog.messages=a.dialog.messages.reverse(),a.users.map((function(e){return e.speaking=!1,1})),me(a.title),e({type:"ROOMS_JOIN_ROOM",payload:{room:a,canLoad:50===a.dialog.messages.length,muted:s}}),pa&&clearTimeout(pa),s&&new Date(s.date).getTime()-(new Date).getTime()<=864e5&&(pa=setTimeout((function(){pe.getState().rooms.activeRoom&&pe.getState().rooms.activeRoom._id===a._id&&pe.getState().rooms.activeRoom.muted&&pe.getState().rooms.activeRoom.muted.date===s.date&&pe.dispatch({type:"ROOMS_SET_MUTED",payload:!1})}),new Date(s.date).getTime()-(new Date).getTime())),mt.joinRoom({roomId:a._id,lang:a.lang});try{qe(a._id)}catch(o){mt.leaveRoom({roomId:a._id,lang:a.lang}),e({type:"ROOMS_JOIN_ERROR",payload:{param:"all",msg:"something_goes_wrong"}})}})).catch((function(t){e({type:"ROOMS_JOIN_ERROR",payload:{param:"all",msg:"something_goes_wrong"}})}))}},ga=function(e,t){return function(a){Je({roomId:e,lang:t}),a({type:"ROOMS_LEAVE_ROOM"})}},fa=function(e,t){return function(a){for(var s=new FormData,o=ue(0,1e6),n=[],r=[],i=[],c=0;c<e.images.length;c++)s.append("images"+c,e.images[c].file),n.push(e.images[c]);for(var l=0;l<e.files.length;l++)s.append("files"+l,e.files[l].file),r.push(e.files[l]);for(var p=0;p<e.sounds.length;p++)s.append("sounds"+p,e.sounds[p].file),i.push(e.sounds[p]);var u={_id:o,user:pe.getState().user,text:e.text,images:n,sounds:i,files:r,isLoading:!0,isError:!1,isRead:!1,recentMessages:e.recentMessages,createdAt:Date.now(),type:"message"};a({type:"ROOMS_ADD_MESSAGE",payload:u});var d=[];e.recentMessages.map((function(e){return d.push(e._id),1})),e.recentMessages=d,e.socketId=mt.getSocketId(),s.append("text",e.text),s.append("recentMessages",e.recentMessages),s.append("roomId",e.roomId),s.append("dialogId",e.dialogId),s.append("socketId",mt.getSocketId()),fetch("".concat(et,"/api/room/send-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:s}).then((function(e){return e.json()})).then((function(e){if(e.error)return"max_size"===e.errors[0].msg&&ht.b.error("Max file size upload 10 Mb.",{position:ht.b.POSITION.TOP_CENTER}),a({type:"ROOMS_ERROR_MESSAGE",payload:o});a({type:"ROOMS_SUCCESS_MESSAGE",payload:{_id:o,_newId:e._id}})})).catch((function(){a({type:"ROOMS_ERROR_MESSAGE",payload:o})}))}},ya=function(e,t){return function(a){for(var s=new FormData,o=[],n=[],r=[],i=[],c=[],l=[],p=0;p<e.images.length;p++)e.images[p].file?(s.append("images"+p,e.images[p].file),o.push(e.images[p])):i.push(e.images[p].id);for(var u=0;u<e.files.length;u++)e.files[u].file?(s.append("files"+u,e.files[u].file),n.push(e.files[u])):c.push(e.files[u].id);for(var d=0;d<e.sounds.length;d++)e.sounds[d].file?(s.append("sounds"+d,e.sounds[d].file),r.push(e.sounds[d])):l.push(e.sounds[d].id);var m={_id:e._id,user:pe.getState().user,text:e.text,images:e.images,sounds:e.sounds,files:e.files,isLoading:!0,isError:!1,recentMessages:e.recentMessages};a({type:"ROOMS_EDIT_MESSAGE",payload:m});var h=[];e.recentMessages.map((function(e){return h.push(e._id),1})),e.recentMessages=h,e.socketId=mt.getSocketId(),e.roomId=pe.getState().rooms.activeRoom._id,s.append("_id",e._id),s.append("text",e.text),s.append("recentMessages",e.recentMessages),s.append("roomId",e.roomId),s.append("dialogId",e.dialogId),s.append("socketId",mt.getSocketId()),s.append("oldImages",i),s.append("oldSounds",l),s.append("oldFiles",c),fetch("".concat(et,"/api/room/edit-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:s}).then((function(e){return e.json()})).then((function(t){if(t.error)return"max_size"===t.errors[0].msg&&ht.b.error("Max file size upload 10 Mb.",{position:ht.b.POSITION.TOP_CENTER}),a({type:"ROOMS_ERROR_MESSAGE",payload:e._id});a({type:"ROOMS_SUCCESS_MESSAGE",payload:{_id:e._id,_newId:e._id}})})).catch((function(){a({type:"ROOMS_ERROR_MESSAGE",payload:e._id})}))}},ba=function(e,t){var a=e.roomId,s=e.deleteMessages;return function(e){var o=[];s.map((function(e){return o.push(e._id),1})),e({type:"ROOMS_DELETE_MESSAGE",payload:o}),fetch("".concat(et,"/api/room/delete-message"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({roomId:a,messageIds:o,socketId:mt.getSocketId()})}).then().catch((function(){}))}},Ea=function(e){return function(t){t({type:"ROOMS_DELETE_MESSAGE",payload:[e]})}},va=function(e,t){return function(a){for(var s=new FormData,o=[],n=[],r=[],i=0;i<e.images.length;i++)s.append("images"+i,e.images[i].file),o.push(e.images[i]);for(var c=0;c<e.files.length;c++)s.append("files"+c,e.files[c].file),n.push(e.files[c]);for(var l=0;l<e.sounds.length;l++)s.append("sounds"+l,e.sounds[l].file),r.push(e.sounds[l]);var p={_id:e._id,user:pe.getState().user,text:e.text,images:e.images,sounds:[],files:[],isLoading:!0,isError:!1,recentMessages:e.recentMessages,createdAt:Date.now(),type:"message"};a({type:"ROOMS_DELETE_MESSAGE",payload:[e._id]}),a({type:"ROOMS_ADD_MESSAGE",payload:p});var u=[];e.recentMessages.map((function(e){return u.push(e._id),1})),e.recentMessages=u,e.socketId=mt.getSocketId(),s.append("text",e.text),s.append("recentMessages",e.recentMessages),s.append("roomId",e.roomId),s.append("dialogId",e.dialogId),s.append("socketId",mt.getSocketId()),fetch("".concat(et,"/api/room/send-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:s}).then((function(e){return e.json()})).then((function(t){a({type:"ROOMS_SUCCESS_MESSAGE",payload:{_id:e._id,_newId:t._id}})})).catch((function(){a({type:"ROOMS_ERROR_MESSAGE",payload:e._id})}))}},Oa=function(e,t){var a=e.dialogId,s=e.userId,o=e.roomId;return function(e){var n=pe.getState().rooms.activeRoom.dialog.messages.filter((function(e){return!e.isRead&&e.user._id!==s}));setTimeout((function(){n.length&&e({type:"ROOMS_READ_MESSAGES",payload:s})}),750),n.length&&fetch("".concat(et,"/api/room/read-messages"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dialogId:a,roomId:o})}).then().catch((function(){}))}},Sa=function(e,t){var a=e.dialogId;e.userId,e.roomId;return function(e){var s=pe.getState().rooms.activeRoom.dialog.messages[0];e({type:"ROOMS_SET_LOADING"}),e({type:"ROOMS_LOAD_MESSAGES",payload:{messages:[],canLoad:!1}}),fetch("".concat(et,"/api/room/load-messages"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dialogId:a,lastMessageId:s._id})}).then((function(e){return e.json()})).then((function(t){e({type:"ROOMS_LOAD_MESSAGES",payload:{messages:t.reverse(),canLoad:50===t.length}})})).catch((function(){}))}},_a=a(722),ja=a(161),Ra=a.n(ja),ka=Object(It.a)((function(e){return{root:{backgroundColor:"#008FF7",position:"absolute",bottom:20,right:20,"&:hover":{backgroundColor:"#008FF7"}}}}))(xt.a),Aa=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={isOpenCreateRoom:!1,scrollTop:0,showBtnAdd:!0},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.context.toggleHeader(!0),this.props.rooms.getted||this.props.roomsActions.roomsGet(this.props.user.apiToken,this.props.user.roomLang)}},{key:"onScroll",value:function(){this.state.scrollTop<this.roomsBlock.getScrollTop()?this.state.showBtnAdd&&this.setState({showBtnAdd:!1}):this.state.showBtnAdd||this.setState({showBtnAdd:!0}),this.roomsBlock.getScrollHeight()-(this.roomsBlock.getClientHeight()+this.roomsBlock.getScrollTop())===0&&this.props.roomsActions.roomsLoad(this.props.user.apiToken,this.props.user.roomLang),this.setState({scrollTop:this.roomsBlock.getScrollTop()})}},{key:"shouldComponentUpdate",value:function(e,t){return t.scrollTop===this.state.scrollTop}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-xl-3 col-lg-6 col-md-6 sidebar",style:{overflow:"hidden"}},p.a.createElement("h2",{className:"sidebar-title"},this.props.langProps.rooms),p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",onScroll:function(){e.onScroll()},style:{height:"calc(100% - 78px)"},autoHide:!0},this.props.rooms.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.props.rooms.rooms.map((function(e,t){return p.a.createElement(la,{key:t,room:e})}))),!this.props.rooms.isFetching&&!this.props.rooms.isError&&!this.props.rooms.rooms.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(M.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.create_your_first_room)),!this.props.rooms.isFetching&&this.props.rooms.isError&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(Ra.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.something_goes_wrong),p.a.createElement("button",{onClick:function(){e.props.roomsActions.roomsGet(e.props.user.apiToken,e.props.user.roomLang)},className:"button-gray",type:"submit",style:{width:"max-content"}},"Retry")),p.a.createElement(Nt.a,{title:this.props.langProps.create_room,className:"scroll-to-bottom ".concat(this.state.showBtnAdd?"active":""),placement:"top"},p.a.createElement(ka,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?act=newRoom"})}},p.a.createElement(j.a,null)))))}}]),a}(p.a.Component);Aa.contextType=y;var xa=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms}}),(function(e){return{roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Aa))),Ta=function(e){return function(t){fetch("".concat(et,"/api/notification/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){t({type:"NOTIFICATIONS_GET",payload:e})}))}},Ia=function(e,t){return function(a){a({type:"NOTIFICATIONS_READ",payload:e}),fetch("".concat(et,"/api/notification/read"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({id:e,socketId:mt.getSocketId()})})}},Na=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={randomId:ue(0,1e5)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Lt.a,{className:"dialog-item",onClick:function(){e.props.notification.isRead||e.props.notificationsActions.notificationRead(e.props.notification._id,e.props.user.apiToken),"invite"===e.props.notification.type&&(e.props.call.user?pe.dispatch({type:"ROOMS_SET_FORCE",payload:e.props.notification.room._id}):e.props.history.push("/rooms/".concat(e.props.notification.room._id))),"accept"!==e.props.notification.type&&"request"!==e.props.notification.type||e.props.history.push({search:"?user=".concat(e.props.notification.user._id)})}},p.a.createElement(R,{avatar:!!this.props.notification.user.avatar&&this.props.notification.user.avatar,status:this.props.notification.type,style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.notification.user.color,")")},name:this.props.notification.user.name.first.charAt(0)+this.props.notification.user.name.last.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",{className:"user-name"},p.a.createElement("span",null,"".concat(this.props.notification.user.name.first," ").concat(this.props.notification.user.name.last))),"invite"===this.props.notification.type&&p.a.createElement("p",{className:"last-message"},p.a.createElement("span",{className:"notif-content"},this.props.langProps.invited_you_to_the_room,"\xa0",p.a.createElement("span",{style:{color:"#008FF7"}},this.props.notification.room.title))),"accept"===this.props.notification.type&&p.a.createElement("p",{className:"last-message"},p.a.createElement("span",{className:"notif-content"},this.props.langProps.accept_your_friend_request)),"request"===this.props.notification.type&&p.a.createElement("p",{className:"last-message"},p.a.createElement("span",{className:"notif-content"},this.props.langProps.send_you_friend_request))),p.a.createElement("div",{className:"dialog-info"},p.a.createElement("span",{className:"time-at"},zt(this.props.notification.createdAt)),p.a.createElement(wt.CSSTransitionGroup,{transitionName:"message-status-transition",transitionEnterTimeout:100,transitionLeaveTimeout:100},!this.props.notification.isRead&&p.a.createElement("span",{style:{background:"#FF3333",minWidth:10,height:10,marginTop:5},className:"unread-messages-count"}))))}}]),a}(p.a.Component);var Ca=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{call:e.call,user:e.user}}),(function(e){return{notificationsActions:Object(L.b)(n,e)}}))(Object(Dt.g)(Na))),Ma=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.context.toggleHeader(!0),this.props.notifications.getted||this.props.notificationsActions.notificationsGet(this.props.user.apiToken)}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-xl-3 col-lg-6 col-md-6 sidebar"},p.a.createElement("h2",{className:"sidebar-title"},this.props.langProps.notifications),p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",style:{height:"calc(100% - 78px)"},autoHide:!0},this.props.notifications.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.props.notifications.notifications.map((function(e,t){return p.a.createElement(Ca,{key:t,notification:e})}))),!this.props.notifications.isFetching&&!this.props.notifications.notifications.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(T.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.here_wiil_placed_your_notifications))))}}]),a}(p.a.Component);Ma.contextType=y;var wa=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,notifications:e.notifications}}),(function(e){return{notificationsActions:Object(L.b)(n,e)}}))(Object(Dt.g)(Ma))),Fa=function(e,t,a,s,o){return function(n){e.apiToken=o,n({type:"USER_LOGIN",payload:e});for(var r=0;r<t.length;r++)t[r].user=t[r].users.find((function(t){return t._id!==e._id})),t[r].user||(t[r].user=t[r].users[0]),t[r].typing=!1,t[r].getted=!1,t[r].isLoading=!1,t[r].lastMessage&&(t[r].lastMessage.isLoading=!1,t[r].lastMessage.isError=!1),t[r].lastMessage&&t[r].lastMessage.user._id===e._id&&(t[r].noRead=0);n({type:"DIALOGS_GET",payload:{dialogs:t,noReadCount:a}}),n({type:"NOTIFICATIONS_SET_NO_READ",payload:s})}},Da=function(){return function(e){e({type:"USER_LOGOUT"})}},La=function(e){return function(t){t({type:"USER_UPDATE_ROOM_LANG",payload:e})}},Pa=function(e,t){return function(a){if(e.target.files[0]){var s={path:(window.URL||window.webkitURL).createObjectURL(new Blob([e.target.files[0]],{type:e.target.files[0].type})),file:e.target.files[0],name:e.target.files[0].name,type:e.target.files[0].name.split(".").pop(),size:e.target.files[0].size/1e3},o=new FormData;o.append("avatar",s.file),fetch("".concat(et,"/api/user/upload-avatar"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:o}).then((function(e){return e.json()})).then((function(e){e.error&&"max_size"===e.errors[0].msg&&ht.b.error("Max file size upload 10 Mb.",{position:ht.b.POSITION.TOP_CENTER}),a({type:"USER_SET_AVATAR",payload:{original:s.path,min:s.path}})})).catch((function(){ht.b.error("Something goes worng",{position:ht.b.POSITION.TOP_CENTER})}))}}},Ba=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement("span",{style:{textDecoration:"none"},onClick:function(){e.props.onClick()}},p.a.createElement(Lt.a,{className:"room-item"},p.a.createElement(R,{style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600},name:this.props.title.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,p.a.createElement("span",null,this.props.title)))))}}]),a}(p.a.Component),Ua=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.context.toggleHeader(!0)}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"updateRoomLang",value:function(e){this.props.userActions.updateRoomLang(e),this.props.roomsActions.roomsGet(this.props.user.apiToken,e),mt.joinLang(e),this.props.onClick(),fetch("".concat(et,"/api/user/update-room-lang"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({lang:e})})}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-xl-3 col-lg-6 col-md-6 sidebar"},p.a.createElement("h2",{className:"sidebar-title"},this.props.langProps.language),p.a.createElement(Ba,{onClick:function(){e.updateRoomLang("eng")},title:this.props.langProps.english}),p.a.createElement(Ba,{onClick:function(){e.updateRoomLang("rus")},title:this.props.langProps.russian})))}}]),a}(p.a.Component);Ua.contextType=y;var za=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user}}),(function(e){return{userActions:Object(L.b)(r,e),roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Ua))),Ga=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={activeTab:"chat"===e.props.history.location.pathname.substring(1,5)?"messages":e.props.user.roomLang?"rooms":"languages"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return this.props.show&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-xl-3 col-lg-6 col-md-6 user-header"},p.a.createElement("ul",null,p.a.createElement("li",{onClick:function(){e.props.history.push({search:"?user=".concat(e.props.user._id)})}},p.a.createElement(R,{avatar:!!this.props.user.avatar&&this.props.user.avatar,style:{width:32,height:32,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.user.color,")")},name:this.props.user.name.first.charAt(0)+this.props.user.name.last.charAt(0)})),p.a.createElement("li",{style:{position:"relative"},className:"".concat("messages"===this.state.activeTab?"active":""),onClick:function(){e.setState({activeTab:"messages"})}},p.a.createElement(A.a,{style:{color:"#CCD1D6"}}),this.props.dialogs.noReadCount>0&&p.a.createElement("span",{className:"unread-messages-count",style:{top:11,right:"40%",transform:"translateX(50%)",backgroundColor:"#FF3333"}},this.props.dialogs.noReadCount)),p.a.createElement("li",{className:"".concat("rooms"===this.state.activeTab?"active":""),onClick:function(){e.setState({activeTab:"rooms"})}},p.a.createElement(M.a,{style:{color:"#CCD1D6"}})),p.a.createElement("li",{style:{position:"relative"},className:"".concat("notifications"===this.state.activeTab?"active":""),onClick:function(){e.setState({activeTab:"notifications"})}},p.a.createElement(T.a,{style:{color:"#CCD1D6"}}),this.props.notifications.noRead>0&&p.a.createElement("span",{className:"unread-messages-count",style:{top:11,right:"44%",transform:"translateX(50%)",backgroundColor:"#FF3333"}},this.props.notifications.noRead)),p.a.createElement("li",{className:"".concat("languages"===this.state.activeTab?"active":""),onClick:function(){e.setState({activeTab:"languages"})}},p.a.createElement(N.a,{style:{color:"#CCD1D6"}})))),"messages"===this.state.activeTab&&p.a.createElement(na,null),"rooms"===this.state.activeTab&&p.a.createElement(xa,null),"notifications"===this.state.activeTab&&p.a.createElement(wa,null),"languages"===this.state.activeTab&&p.a.createElement(za,{onClick:function(){e.setState({activeTab:"rooms"})}}))}}]),a}(p.a.Component),Wa=Object(D.b)((function(e){return{user:e.user,dialogs:e.dialogs,notifications:e.notifications}}))(Object(Dt.g)(Ga)),qa=a(20),Ja=a(723),Ha=(a(316),a(730)),Va=function(e){var t=e.style;return p.a.createElement("svg",{style:t,"aria-aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"vk",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",className:"svg-inline--fa fa-vk fa-w-18 fa-2x"},p.a.createElement("path",{fill:"currentColor",d:"M545 117.7c3.7-12.5 0-21.7-17.8-21.7h-58.9c-15 0-21.9 7.9-25.6 16.7 0 0-30 73.1-72.4 120.5-13.7 13.7-20 18.1-27.5 18.1-3.7 0-9.4-4.4-9.4-16.9V117.7c0-15-4.2-21.7-16.6-21.7h-92.6c-9.4 0-15 7-15 13.5 0 14.2 21.2 17.5 23.4 57.5v86.8c0 19-3.4 22.5-10.9 22.5-20 0-68.6-73.4-97.4-157.4-5.8-16.3-11.5-22.9-26.6-22.9H38.8c-16.8 0-20.2 7.9-20.2 16.7 0 15.6 20 93.1 93.1 195.5C160.4 378.1 229 416 291.4 416c37.5 0 42.1-8.4 42.1-22.9 0-66.8-3.4-73.1 15.4-73.1 8.7 0 23.7 4.4 58.7 38.1 40 40 46.6 57.9 69 57.9h58.9c16.8 0 25.3-8.4 20.4-25-11.2-34.9-86.9-106.7-90.3-111.5-8.7-11.2-6.2-16.2 0-26.2.1-.1 72-101.3 79.4-135.6z",class:""}))},Qa=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",error:!1,errors:[],isFetching:!1},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.state.email&&this.state.password&&(this.setState({isFetching:!0,error:!1,errors:[]}),fetch("".concat(et,"/auth/login"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.email.toLowerCase().replace(/\s+/g,""),password:this.state.password})}).then((function(e){return e.json()})).then((function(e){e.error?t.setState({error:!0,errors:e.errors}):(e.ban?pe.dispatch({type:"BAN_SET",payload:{numDate:e.numDate,date:e.date}}):(t.props.userActions.loginUser(e.user,e.dialogs,e.noReadCount,e.noReadNotifications,e.token),mt.init(e.token)),t.props.cookies.set("apiToken",e.token,{path:"/"}));t.setState({isFetching:!1})})))}},{key:"render",value:function(){var e=this;return this.state.isFetching?p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}):p.a.createElement("div",{className:"login-page"},p.a.createElement("h1",{className:"logo"},p.a.createElement("span",{style:{color:"#556677"}},"heva"),p.a.createElement("span",{style:{color:"#008FF7"}},"chat")),p.a.createElement("form",{onSubmit:function(t){e.onSubmit(t)},className:"form"},p.a.createElement("a",{className:"social-auth",href:"".concat(et,"/auth/login_vk?uuid=").concat(Ya(0,9999999))},p.a.createElement(Va,{style:{width:24,height:24,marginLeft:20,marginRight:15,color:"#5181b8"}}),"\u0412\u0445\u043e\u0434 \u0447\u0435\u0440\u0435\u0437 VK"),p.a.createElement("a",{className:"social-auth",href:"".concat(et,"/auth/login_fb?uuid=").concat(Ya(0,9999999))},p.a.createElement(Ha.a,{style:{marginLeft:20,marginRight:15,color:"#4267b2"}}),"\u0412\u0445\u043e\u0434 \u0447\u0435\u0440\u0435\u0437 FaceBook"),p.a.createElement("input",{value:this.state.email,onChange:function(t){e.setState({email:t.target.value})},className:"input-field",type:"text",name:"email",placeholder:"E-mail"}),this.state.errors.find((function(e){return"email"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"email"===e.param})).msg]),p.a.createElement("input",{value:this.state.password,onChange:function(t){e.setState({password:t.target.value})},className:"input-field",type:"password",name:"password",placeholder:"Password"}),this.state.errors.find((function(e){return"password"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"password"===e.param})).msg]),this.state.errors.find((function(e){return"all"===e.param}))&&p.a.createElement("span",{style:{marginTop:30},className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"all"===e.param})).msg]),p.a.createElement("button",{type:"submit",className:"button-gray"},"Log in"),p.a.createElement("p",{className:"nav-auth"},"New to the site? ",p.a.createElement(Ft.b,{to:"/register"},"Sign up"))))}}]),a}(p.a.Component);function Ya(e,t){var a=e+Math.random()*(t+1-e);return Math.floor(a)}var $a=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user}}),(function(e){return{userActions:Object(L.b)(r,e)}}))(Object(Ja.a)(Qa))),Ka=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={firstName:"",lastName:"",email:"",password:"",error:!1,errors:[],isFetching:!1},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.state.email&&this.state.password&&(this.setState({isFetching:!0,error:!1,errors:[]}),fetch("".concat(et,"/auth/register"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email.toLowerCase().replace(/\s+/g,""),password:this.state.password})}).then((function(e){return e.json()})).then((function(e){e.error?t.setState({error:!0,errors:e.errors}):(t.props.cookies.set("apiToken",e.token,{path:"/"}),t.props.userActions.loginUser(e.user,e.dialogs,e.noReadCount,e.noReadNotifications,e.token),mt.init(e.token));t.setState({isFetching:!1})})))}},{key:"render",value:function(){var e=this;return this.state.isFetching?p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}):p.a.createElement("div",{className:"login-page"},p.a.createElement("h1",{className:"logo"},p.a.createElement("span",{style:{color:"#556677"}},"heva"),p.a.createElement("span",{style:{color:"#008FF7"}},"chat")),p.a.createElement("form",{onSubmit:function(t){e.onSubmit(t)},className:"form"},p.a.createElement("input",{value:this.state.firstName,onChange:function(t){e.setState({firstName:t.target.value})},className:"input-field",type:"text",name:"firstName",placeholder:"First name"}),this.state.errors.find((function(e){return"firstName"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"firstName"===e.param})).msg]),p.a.createElement("input",{value:this.state.lastName,onChange:function(t){e.setState({lastName:t.target.value})},className:"input-field",type:"text",name:"lastName",placeholder:"Last name"}),this.state.errors.find((function(e){return"lastName"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"lastName"===e.param})).msg]),p.a.createElement("input",{value:this.state.email,onChange:function(t){e.setState({email:t.target.value})},className:"input-field",type:"text",name:"email",placeholder:"E-mail"}),this.state.errors.find((function(e){return"email"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"email"===e.param})).msg]),p.a.createElement("input",{value:this.state.password,onChange:function(t){e.setState({password:t.target.value})},className:"input-field",type:"password",name:"password",placeholder:"Password"}),this.state.errors.find((function(e){return"password"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"password"===e.param})).msg]),this.state.errors.find((function(e){return"all"===e.param}))&&p.a.createElement("span",{style:{marginTop:30},className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"all"===e.param})).msg]),p.a.createElement("button",{type:"submit",className:"button-gray"},"Sign up"),p.a.createElement("p",{className:"nav-auth"},"Already have account? ",p.a.createElement(Ft.b,{to:"/login"},"Log in"))))}}]),a}(p.a.Component);var Xa=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user}}),(function(e){return{userActions:Object(L.b)(r,e)}}))(Object(Ja.a)(Ka))),Za=a(38),es=a.n(Za),ts=a(167),as=a.n(ts),ss=a(337),os=a.n(ss),ns=a(107),rs=a.n(ns),is=a(88),cs=a.n(is),ls=a(165),ps=a.n(ls),us=a(338),ds=a.n(us),ms=a(339),hs=a.n(ms),gs=a(335),fs=a.n(gs),ys=a(336),bs=a.n(ys),Es=!1,vs=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={duration:"00:00",audio:!1,randomId:ue(0,1e7)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=document.getElementsByName(this.props.src),s=Object(Ee.a)(a);try{for(s.s();!(e=s.n()).done;){var o=e.value;o.volume=.5,this.setState({audio:o});break}}catch(r){s.e(r)}finally{s.f()}var n=document.getElementById(this.state.randomId);n.onpause=function(){n.parentElement.className="message-sound"},n.onplay=function(){n.parentElement.className="message-sound active"},n.onloadedmetadata=function(){t.getDuration()}}},{key:"getDuration",value:function(){function e(e){return e<10?"0"+e:e}var t,a=document.getElementsByName(this.props.src),s=0,o=Object(Ee.a)(a);try{for(o.s();!(t=o.n()).done;){s=t.value.duration;break}}catch(n){o.e(n)}finally{o.f()}this.setState({duration:e(parseInt(s/60))+":"+e(parseInt(s%60))})}},{key:"componentWillUnmount",value:function(){Es&&this.stopTimer(),document.getElementsByName(this.props.src)&&(document.getElementsByName(this.props.src).className="message-sound",this.state.audio.pause())}},{key:"playAudio",value:function(e){e.stopPropagation();var t=document.getElementsByClassName("message-sounds-element");this.stopTimer();var a,s=Object(Ee.a)(t);try{for(s.s();!(a=s.n()).done;){a.value.pause()}}catch(o){s.e(o)}finally{s.f()}document.getElementById(this.state.randomId).play(),this.startTimer()}},{key:"changeDurationAudio",value:function(e){e.stopPropagation();var t=100*e.nativeEvent.offsetX/this.rangeBlock.clientWidth,a=this.state.audio.duration/100*t;console.log(e.nativeEvent);var s,o=document.getElementsByName(this.props.src),n=Object(Ee.a)(o);try{for(n.s();!(s=n.n()).done;){s.value.currentTime=a}}catch(l){n.e(l)}finally{n.f()}var r,i=document.getElementsByName(this.props.src+"-range"),c=Object(Ee.a)(i);try{for(c.s();!(r=c.n()).done;){r.value.style.width=100*this.state.audio.currentTime/this.state.audio.duration+"%"}}catch(l){c.e(l)}finally{c.f()}}},{key:"startTimer",value:function(){var e=this;Es=setInterval((function(){var t,a=document.getElementsByName(e.props.src+"-range"),s=Object(Ee.a)(a);try{for(s.s();!(t=s.n()).done;){t.value.style.width=100*e.state.audio.currentTime/e.state.audio.duration+"%"}}catch(o){s.e(o)}finally{s.f()}}),100)}},{key:"stopTimer",value:function(){clearInterval(Es)}},{key:"viewDurationAudio",value:function(e){var t,a=100*e.nativeEvent.layerX/this.rangeBlock.clientWidth,s=this.state.audio.duration/100*a,o=document.getElementsByName(this.props.src+"-range"),n=Object(Ee.a)(o);try{for(n.s();!(t=n.n()).done;){t.value.style.width=100*s/this.state.audio.duration+"%"}}catch(r){n.e(r)}finally{n.f()}}},{key:"stopAudio",value:function(e){Es&&this.stopTimer(),e.stopPropagation();var t,a=document.getElementsByName(this.props.src),s=Object(Ee.a)(a);try{for(s.s();!(t=s.n()).done;){t.value.pause()}}catch(o){s.e(o)}finally{s.f()}}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"message-sound"},p.a.createElement("audio",{className:"message-sounds-element",id:this.state.randomId,name:this.props.src,src:this.props.src}),p.a.createElement("span",{className:"play",onClick:function(t){e.playAudio(t)}},p.a.createElement(fs.a,{style:{color:"#008FF7"}})),p.a.createElement("span",{className:"pause",onClick:function(t){e.stopAudio(t)}},p.a.createElement(bs.a,{style:{color:"#008FF7"}})),p.a.createElement("div",{className:"message-sound-info"},p.a.createElement("p",{className:"message-sounds-name"},this.props.fileName),p.a.createElement("p",{className:"message-sounds-duration"},this.state.duration)),p.a.createElement("div",{className:"message-sound-range",ref:function(t){e.rangeBlock=t},onMouseMove:function(t){e.viewDurationAudio(t)},onMouseEnter:function(){e.stopTimer()},onMouseLeave:function(){e.startTimer()},onClick:function(t){e.changeDurationAudio(t)}},p.a.createElement("span",{className:"range-position",ref:function(t){e.range=t},name:this.props.src+"-range"})))}}]),a}(p.a.Component),Os=a(164),Ss=a.n(Os),_s=function(e,t){return function(a){fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){var t=e.user,s=e.friendStatus;t.friendStatus=s,a({type:"USERS_ADD",payload:t})}))}},js=function(e){return function(t){fetch("".concat(et,"/api/user/get-friends"),{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){var a=[];e.map((function(e){return null!==e.recipient&&a.push(e.recipient),1})),t({type:"USERS_FRIENDS_GET",payload:{users:a,canLoad:15===a.length}})}))}},Rs=function(e){return function(t){fetch("".concat(et,"/api/user/get-requested"),{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){var a=[];e.map((function(e){return null!==e.recipient&&a.push(e.recipient),1})),t({type:"USERS_REQUESTED_GET",payload:{users:a,canLoad:15===a.length}})}))}},ks=function(e){return function(t){fetch("".concat(et,"/api/user/get-pending"),{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){var a=[];e.map((function(e){return null!==e.recipient&&a.push(e.recipient),1})),t({type:"USERS_PENDING_GET",payload:{users:a,canLoad:15===a.length}})}))}},As=function(e){return function(t){for(var a=[],s=0;s<e.length;s++){var o=e[s].recipient;o.friendStatus=e[s].status,a.push(o)}t({type:"USERS_SET",payload:{friends:a,canLoad:10===a.length}})}},xs=function(e){return function(t){t({type:"USERS_SET_ACTIVE_USER_ID",payload:e})}},Ts=function(e,t){return function(a){fetch("".concat(et,"/api/user/request"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(s){a({type:"USERS_SET_FRIEND_STATUS",payload:{userId:e,friendStatus:s}}),pe.getState().users.pending.getted&&(pe.getState().users.users.find((function(t){return t._id===e}))?a({type:"USERS_PENDING_ADD",payload:{user:pe.getState().users.users.find((function(t){return t._id===e}))}}):fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){var t=e.user,s=e.friendStatus;t.friendStatus=s,a({type:"USERS_ADD",payload:t}),a({type:"USERS_PENDING_ADD",payload:{user:t}})})))}))}},Is=function(e,t){return function(a){fetch("".concat(et,"/api/user/accept-request"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(s){a({type:"USERS_SET_FRIEND_STATUS",payload:{userId:e,friendStatus:s}}),pe.getState().users.requested.getted&&a({type:"USERS_REQUESTED_REMOVE",payload:{userId:e}}),pe.getState().users.friends.getted&&(pe.getState().users.users.find((function(t){return t._id===e}))?a({type:"USERS_FRIENDS_ADD",payload:{user:pe.getState().users.users.find((function(t){return t._id===e}))}}):fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){var t=e.user,s=e.friendStatus;t.friendStatus=s,a({type:"USERS_ADD",payload:t}),a({type:"USERS_FRIENDS_ADD",payload:{user:t}})})))}))}},Ns=function(e,t){return function(a){fetch("".concat(et,"/api/user/remove-request"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(s){a({type:"USERS_SET_FRIEND_STATUS",payload:{userId:e,friendStatus:s}}),pe.getState().users.friends.getted&&2===s&&(a({type:"USERS_FRIENDS_REMOVE",payload:{userId:e}}),pe.getState().users.requested.getted&&(pe.getState().users.users.find((function(t){return t._id===e}))?a({type:"USERS_REQUESTED_ADD",payload:{user:pe.getState().users.users.find((function(t){return t._id===e}))}}):fetch("".concat(et,"/api/user/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){var t=e.user,s=e.friendStatus;t.friendStatus=s,a({type:"USERS_ADD",payload:t}),a({type:"USERS_REQUESTED_ADD",payload:{user:t}})})))),pe.getState().users.pending.getted&&0===s&&a({type:"USERS_PENDING_REMOVE",payload:{userId:e}}),pe.getState().users.requested.getted&&0===s&&a({type:"USERS_REQUESTED_REMOVE",payload:{userId:e}})}))}},Cs=function(e,t){return function(a){pe.getState().rooms.activeRoom?a({type:"CALL_SET_FORCE",payload:{user:e,status:"force-call"}}):(a({type:"CALL_SET_USER",payload:{user:e,status:"outcoming"}}),function(){ot.currentTime=0;var e=ot.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.log(e)}))}(),fetch("".concat(et,"/api/call/call"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({id:e._id,socketId:mt.getSocketId()})}).then((function(e){return e.json()})).then((function(e){e.error&&(it(),a({type:"CALL_SET_STATUS",payload:e.error}))})))}},Ms=function(e){return function(t){pe.getState().rooms.activeRoom?t({type:"CALL_SET_FORCE",payload:{user:pe.getState().call.user,status:"force-accept"}}):(t({type:"CALL_SET_STATUS",payload:"active"}),fetch("".concat(et,"/api/call/accept"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:pe.getState().call.user._id,socketId:mt.getSocketId()})}).then((function(e){return e.json()})).then((function(a){a.error?(t({type:"CALL_SET_STATUS",payload:a.error}),Ye(),ct(),fetch("".concat(et,"/api/call/stop"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({socketId:mt.getSocketId()})})):(ct(),Qe(pe.getState().call.user._id))})))}},ws=function(e,t){return function(e){it(),ct(),Ye(),e({type:"CALL_SET_USER",payload:{user:!1,status:"none"}}),fetch("".concat(et,"/api/call/stop"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({socketId:mt.getSocketId()})}).then((function(e){}))}},Fs=function(){return function(e){e({type:"CALL_SET_USER",payload:{user:!1,status:"none"}})}},Ds=function(e,t,a){return p.a.createElement("a",{href:e,onClick:function(e){e.stopPropagation()},key:a,target:"_blank",rel:"noopener noreferrer"},t)},Ls=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={randomId:ue(0,1e5)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=!0,a=!1;if(this.props.messages[this.props.index-1]){var s=new Date(this.props.message.createdAt),o=new Date(this.props.messages[this.props.index-1].createdAt);s.getFullYear()===o.getFullYear()&&s.getMonth()===o.getMonth()&&s.getDate()===o.getDate()&&(t=!1),Math.abs(s-o)/36e5>1&&(a=!0)}var n=this.props.messages[this.props.index-1]&&this.props.messages[this.props.index-1].user._id!==this.props.message.user._id||!this.props.messages[this.props.index-1]||a;return p.a.createElement(p.a.Fragment,null,t&&p.a.createElement("div",{className:"history-date"},function(e){var t=pe.getState().user.lang,a=new Date(e),s=(new Date).getDate()-a.getDate(),o=(new Date).getFullYear()-a.getFullYear(),n=a.getFullYear(),r=a.getMonth()+1,i=a.getDate();if(o>0)return n.toString()+"."+(r<10?"0"+r.toString():r.toString())+"."+(i<10?"0"+i.toString():i.toString());var c=[Bt[t].january,Bt[t].february,Bt[t].march,Bt[t].april,Bt[t].may,Bt[t].june,Bt[t].july,Bt[t].august,Bt[t].september,Bt[t].october,Bt[t].november,Bt[t].december];return 0===s&&Bt[t].today||1===s&&Bt[t].yerstaday||0===o&&i+" "+c[r-1]}(new Date(this.props.message.createdAt))),p.a.createElement("div",{className:"message ".concat(this.props.selected?"selected":""),onClick:function(t){e.props.message.isLoading||e.props.message.isError||(e.props.selected?e.props.unSelect(e.props.message._id):e.props.onSelect(e.props.message))},style:{background:this.props.isRecent?"none":this.props.message.isLoading||this.props.message.isError?"#fff":this.props.message.user._id===this.props.user._id||this.props.message.isRead?"":"#EFF4F8",cursor:this.props.message.isLoading||this.props.message.isError?"default":"",padding:this.props.isRecent?"8px 14px 8px 6px":""}},(n||t)&&!this.props.isRecent&&p.a.createElement("span",{style:{height:"max-content"},onClick:function(t){t.stopPropagation(),e.props.history.push({search:"?user=".concat(e.props.message.user._id)})}},p.a.createElement(R,{style:{width:32,height:32,fontSize:14,lineHeight:"14px",fontWeight:600,backgroundColor:"rgb(".concat(this.props.message.user.color,")")},name:this.props.message.user.name.first.charAt(0)+this.props.message.user.name.last.charAt(0),avatar:this.props.user._id===this.props.message.user._id?!!this.props.user.avatar&&this.props.user.avatar:!!this.props.message.user.avatar&&this.props.message.user.avatar})),!n&&!t&&!this.props.isRecent&&p.a.createElement("div",{style:{width:46}}),!this.props.message.isLoading&&!this.props.message.isError&&this.props.canSelect&&p.a.createElement("span",{className:"select-indicator ".concat(this.props.selected?"active":"")},p.a.createElement(wt.CSSTransitionGroup,{transitionName:"message-status-transition",transitionEnterTimeout:100,transitionLeaveTimeout:100},this.props.selected&&p.a.createElement(os.a,{style:{color:"#fff",fontSize:16,position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto"}}))),p.a.createElement("div",{className:"content col"},(n||t)&&p.a.createElement("h3",{onClick:function(t){t.stopPropagation(),e.props.history.push({search:"?user=".concat(e.props.message.user._id)})},className:"user-name",style:{color:this.props.message.user._id===this.props.user._id?"#FF3333":""}},this.props.message.user._id!==this.props.user._id&&p.a.createElement(p.a.Fragment,null,"".concat(this.props.message.user.name.first," ").concat(this.props.message.user.name.last)," ",p.a.createElement("span",{className:"time-at"},Ut(this.props.message.createdAt))),this.props.message.user._id===this.props.user._id&&p.a.createElement(p.a.Fragment,null,"".concat(this.props.user.name.first," ").concat(this.props.user.name.last)," ",p.a.createElement("span",{className:"time-at"},Ut(this.props.message.createdAt)))),this.props.message.text&&p.a.createElement("p",{className:"message-text",onClick:function(t){"call"===e.props.message.type&&e.props.message.user._id!==e.props.user._id&&(t.stopPropagation(),e.props.callActions.call(e.props.message.user,e.props.user.apiToken))}},p.a.createElement(Ss.a,{componentDecorator:Ds},"message"===this.props.message.type&&p.a.createElement(p.a.Fragment,null,this.props.message.text.replace(/&nbsp;/g,"").replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/(^\s*(?!.+)\n+)|(\n+\s+(?!.+)$)/g,"").replace(/(\r\n|\r|\n){2,}/g,"$1\n")),"call"===this.props.message.type&&p.a.createElement(p.a.Fragment,null,this.props.message.user._id===this.props.user._id&&p.a.createElement(ds.a,{style:{color:"#008FF7",fontSize:20,marginRight:8}}),this.props.message.user._id!==this.props.user._id&&p.a.createElement(hs.a,{style:{color:"#008FF7",fontSize:20,marginRight:8}}),this.props.langProps[this.props.message.text]))),!!this.props.message.recentMessages.length&&this.props.countRecent>1&&p.a.createElement("p",{className:"message-text"},"Attachmend messages [".concat(this.props.message.recentMessages.length,"]")),!!this.props.message.images.length&&p.a.createElement("div",{className:"message-images"},this.props.message.images.map((function(t,a,s){var o,n=!1;return o=s.length<=3&&2!==s.length&&0===a?"100%":"50%",s.length>4&&3===a&&(n=!0),a>3?null:n?p.a.createElement("div",{key:a,className:"image",style:{width:o}},p.a.createElement("div",{className:"image-blur",onClick:function(t){t.stopPropagation(),e.props.history.push({search:"?modal=slider"}),pe.dispatch({type:"SLIDER_SET",payload:{images:s,index:0}})}},p.a.createElement("span",null,"+".concat(s.length-3)),p.a.createElement("img",{draggable:"false",key:a,src:t.path,alt:t.name}))):p.a.createElement("div",{key:a,className:"image",style:{width:o}},p.a.createElement("img",{draggable:"false",onClick:function(t){t.stopPropagation(),e.props.history.push({search:"?modal=slider"}),pe.dispatch({type:"SLIDER_SET",payload:{images:s,index:a}})},src:t.path,alt:t.name}))}))),!!this.props.message.sounds.length&&p.a.createElement("div",{className:"message-sounds"},this.props.message.sounds.map((function(e,t,a){return p.a.createElement(vs,{key:t,fileName:e.name,src:e.path})}))),!!this.props.message.files.length&&p.a.createElement("div",{className:"message-files"},this.props.message.files.map((function(e,t,a){return p.a.createElement("div",{className:"message-file",key:t,onClick:function(t){t.stopPropagation(),window.open(e.path,"_self")}},p.a.createElement(cs.a,{className:"file-icon",style:{color:"#008FF7"}}),p.a.createElement("div",{className:"message-file-info"},p.a.createElement("p",{className:"message-file-name"},e.name),p.a.createElement("p",{className:"message-file-size"},e.size>999?(e.size/1e3).toFixed(1)+" mb":Math.ceil(e.size)+" kb")),p.a.createElement(ps.a,{className:"download-icon",style:{color:"#008FF7"}}))}))),!!this.props.message.recentMessages.length&&this.props.countRecent<2&&p.a.createElement("div",{className:"message-recent"},this.props.message.recentMessages.map((function(t,a,s){return p.a.createElement(Ps,{countRecent:e.props.countRecent+1,isRecent:!0,onSelect:function(){},openSlider:function(t){e.props.openSlider(t)},key:a,message:t,messages:s,index:a})})))),!this.props.isRecent&&p.a.createElement("div",{className:"message-status"},p.a.createElement(wt.CSSTransitionGroup,{transitionName:"message-status-transition",transitionEnterTimeout:100,transitionLeaveTimeout:100},!this.props.canSelect&&!this.props.message.isLoading&&!this.props.message.isError&&this.props.message.isEdit&&p.a.createElement(rs.a,{style:{color:"#B8C3CF"}}))),!this.props.isRecent&&p.a.createElement("div",{className:"message-status"},p.a.createElement(wt.CSSTransitionGroup,{transitionName:"message-status-transition",transitionEnterTimeout:100,transitionLeaveTimeout:100},!this.props.canSelect&&this.props.message.user._id===this.props.user._id&&this.props.message.isLoading&&p.a.createElement(Yt.a,{style:{color:"#B8C3CF"}}),!this.props.canSelect&&this.props.message.user._id===this.props.user._id&&!this.props.message.isLoading&&!this.props.message.isError&&!this.props.message.isRead&&p.a.createElement(Jt.a,{style:{color:"#B8C3CF"}}),!this.props.canSelect&&this.props.message.user._id===this.props.user._id&&!this.props.message.isLoading&&!this.props.message.isError&&this.props.message.isRead&&p.a.createElement(Vt.a,{style:{color:"#008FF7"}}),!this.props.canSelect&&this.props.message.user._id===this.props.user._id&&!this.props.message.isLoading&&this.props.message.isError&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Xt,{event:"hover",actions:[{text:"Retry",action:function(){e.props.retrySendMessage(e.props.message)}},{text:"Delete",action:function(){e.props.deleteLocalMessage(e.props.message._id)}}],from:"message-error-actions-"+this.state.randomId}),p.a.createElement(Kt.a,{className:"error",id:"message-error-actions-"+this.state.randomId,style:{color:"#FF3333"}}))))))}}]),a}(p.a.PureComponent);var Ps=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms}}),(function(e){return{usersActions:Object(L.b)(i,e),callActions:Object(L.b)(c,e)}}))(Object(Dt.g)(Ls))),Bs=a(166),Us=a.n(Bs),zs=a(340),Gs=a.n(zs),Ws=!!document.documentMode,qs=!Ws&&!!window.StyleMedia,Js=!1,Hs=Object(It.a)((function(e){return{root:{backgroundColor:"#fff",position:"absolute",color:"#008FF7",bottom:20,right:20,zIndex:2,"&:hover":{backgroundColor:"#fff"}}}}))(xt.a),Vs=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={showFabToBottom:!1,activePage:!1,scrollTop:0},e}return Object(h.a)(a,[{key:"scrollToBottom",value:function(){this.messagesBlock&&(qs||Ws?this.messagesBlock.view.scrollTop=1e5:this.messagesBlock.view.scroll({top:1e5,left:0,behavior:"smooth"}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("blur",this.blurPage.bind(this)),window.removeEventListener("mousemove",this.focusPage.bind(this))}},{key:"focusPage",value:function(){var e,t=this;e=!(this.messagesBlock&&this.messagesBlock.getScrollTop()+this.messagesBlock.getClientHeight()<this.messagesBlock.getScrollHeight()),!this.state.activePage&&e&&this.props.unRead.length&&(Js&&clearTimeout(Js),this.props.readMessages(),this.setState({activePage:!0}),Js=setTimeout((function(){t.setState({activePage:!1})}),3e3))}},{key:"blurPage",value:function(){this.setState({activePage:!1})}},{key:"componentDidMount",value:function(){window.addEventListener("blur",this.blurPage.bind(this)),window.addEventListener("mousemove",this.focusPage.bind(this)),this.messagesBlock&&(this.messagesBlock.view.scrollTop=1e5),this.props.readMessages()}},{key:"componentDidUpdate",value:function(e){e.messages.length<this.props.messages.length&&JSON.stringify(e.messages[0])===JSON.stringify(this.props.messages[0])&&(this.messagesBlock.getScrollHeight()-this.messagesBlock.getScrollTop()<this.messagesBlock.getClientHeight()+100||e.messages[e.messages.length-1].user._id===this.props.user._id)&&(this.state.activePage&&this.props.readMessages(),this.scrollToBottom(),this.state.showFabToBottom&&this.setState({showFabToBottom:!1})),JSON.stringify(e.messages[0])!==JSON.stringify(this.props.messages[0])&&this.messagesBlock.scrollTop(this.messagesBlock.getScrollHeight()-this.state.scrollTop)}},{key:"shouldComponentUpdate",value:function(e,t){return t.scrollTop===this.state.scrollTop}},{key:"onScroll",value:function(){this.setState({scrollTop:this.messagesBlock.getScrollHeight()-this.messagesBlock.getScrollTop()}),this.messagesBlock.getScrollTop()+this.messagesBlock.getClientHeight()<this.messagesBlock.getScrollHeight()-100?this.state.showFabToBottom||this.setState({showFabToBottom:!0}):this.state.showFabToBottom&&(this.setState({showFabToBottom:!1}),this.props.unRead.length&&this.props.readMessages()),"room"===this.props.type&&this.props.rooms.activeRoom.canLoad&&this.messagesBlock.getScrollTop()<100&&this.props.loadMessages(),"dialog"===this.props.type&&this.props.dialog.canLoad&&this.messagesBlock.getScrollTop()<100&&this.props.loadMessages()}},{key:"viewTypers",value:function(){return 1===this.props.rooms.activeRoom.typers.length?this.props.rooms.activeRoom.typers[0].name.first:2===this.props.rooms.activeRoom.typers.length?"".concat(this.props.rooms.activeRoom.typers[0].name.first," \u0438 ").concat(this.props.rooms.activeRoom.typers[1].name.first):"".concat(this.props.rooms.activeRoom.typers[0].name.first," \u0438 ").concat(this.props.rooms.activeRoom.typers.length-1)}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"dialog-wrap"},p.a.createElement(w.Scrollbars,{onScroll:function(){e.onScroll()},ref:function(t){e.messagesBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"dialog scroll",autoHide:!0},("room"===this.props.type&&this.props.rooms.activeRoom.isLoading||"dialog"===this.props.type&&this.props.dialog.isLoading)&&p.a.createElement("div",{className:"dialog-loading"},p.a.createElement(_a.a,{style:{color:"#008FF7"}})),this.props.messages.map((function(t,a,s){return p.a.createElement(Ps,{countRecent:0,isRecent:!1,selected:e.props.recentMessages.find((function(e){return e._id===t._id})),canSelect:!!e.props.recentMessages.length,key:a,deleteLocalMessage:function(t){e.props.deleteLocalMessage(t)},retrySendMessage:function(t){e.props.retrySendMessage(t)},index:a,message:t,messages:s,onSelect:function(t){e.props.onSelect(t)},unSelect:function(t){e.props.unSelect(t)}})})),"room"===this.props.type&&p.a.createElement("div",{className:"dialog-typers"},!!this.props.rooms.activeRoom.typers.length&&p.a.createElement("p",{className:"typing"},this.viewTypers()," ",this.props.langProps.typing),!this.props.rooms.activeRoom.typers.length&&p.a.createElement("p",{style:{height:18}})),"dialog"===this.props.type&&p.a.createElement("div",{className:"dialog-typers"},this.props.typing&&p.a.createElement("p",{className:"typing"},this.props.userName," ",this.props.langProps.typing),!this.props.typing&&p.a.createElement("p",{style:{height:18}}))),p.a.createElement(Hs,{className:"scroll-to-bottom ".concat(this.state.showFabToBottom?"active":""),color:"primary",size:"small","aria-label":"add",onClick:function(){e.scrollToBottom()}},!!this.props.unRead.length&&p.a.createElement("span",{className:"unread-messages-count"},this.props.unRead.length),p.a.createElement(Gs.a,{style:{color:"#99AABB"}})),"dialog"===this.props.type&&this.props.loading&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),!this.props.messages.length&&!this.props.loading&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(Us.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.write_your_first_message," ",this.props.to)))}}]),a}(p.a.Component),Qs=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms}}))(Vs)),Ys=a(72),$s=a.n(Ys),Ks=a(341),Xs=a.n(Ks),Zs=function(e,t,a){return p.a.createElement("a",{href:e,onClick:function(e){e.stopPropagation()},key:a,target:"_blank",rel:"noopener noreferrer"},t)},eo=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"dialog-attachment"},!!this.props.recentMessages.length&&p.a.createElement("div",{className:"message-attachment"},p.a.createElement(Lt.a,{className:"btn-cancel-select",style:{width:60},onClick:function(){e.props.unSelectRecentMessages()}},p.a.createElement($s.a,{style:{color:"#99AABB"}})),1===this.props.recentMessages.length&&p.a.createElement("div",{className:"col message-recent"},p.a.createElement("h3",{className:"user-name"},"".concat(this.props.recentMessages[0].user.name.first," ").concat(this.props.recentMessages[0].user.name.last)," ",p.a.createElement("span",{className:"time-at"},Ut(this.props.recentMessages[0].createdAt))),p.a.createElement("p",{className:"message-text"},p.a.createElement(Ss.a,{componentDecorator:Zs},this.props.recentMessages[0].text?this.props.recentMessages[0].text:"".concat(this.props.langProps.investments," [").concat(this.props.recentMessages[0].images.length+this.props.recentMessages[0].files.length+this.props.recentMessages[0].sounds.length+this.props.recentMessages[0].recentMessages.length,"]")))),this.props.recentMessages.length>1&&p.a.createElement("div",{className:"col message-recent"},p.a.createElement("h3",{className:"user-name"},this.props.langProps.attachment_messages),p.a.createElement("p",{className:"message-text"},"".concat(this.props.langProps.messages," [").concat(this.props.recentMessages.length,"]")))),!!this.props.images.length&&p.a.createElement("div",{className:"image-attachment"},this.props.images.map((function(t,a,s){return p.a.createElement("div",{key:a,className:"image-container",style:{marginRight:s[a+1]?5:0}},p.a.createElement("span",{className:"btn-delete-image",onClick:function(){e.props.removeImage(t.id)}},p.a.createElement($s.a,{style:{color:"#fff"}})),p.a.createElement("img",{src:t.path,alt:"Attach"}))}))),!!this.props.sounds.length&&p.a.createElement("div",{className:"sound-attachment"},this.props.sounds.map((function(t,a,s){return p.a.createElement("div",{key:a,className:"sound-container"},p.a.createElement(Lt.a,{className:"btn-cancel-select",style:{minWidth:60},onClick:function(){e.props.removeSound(t.id)}},p.a.createElement($s.a,{style:{color:"#99AABB"}})),p.a.createElement(Xs.a,{style:{color:"#008FF7"}}),p.a.createElement("p",{className:"sound-attachment-name"},t.name))}))),!!this.props.files.length&&p.a.createElement("div",{className:"sound-attachment"},this.props.files.map((function(t,a,s){return p.a.createElement("div",{key:a,className:"sound-container"},p.a.createElement(Lt.a,{className:"btn-cancel-select",style:{minWidth:60},onClick:function(){e.props.removeFile(t.id)}},p.a.createElement($s.a,{style:{color:"#99AABB"}})),p.a.createElement(cs.a,{style:{color:"#008FF7"}}),p.a.createElement("p",{className:"sound-attachment-name"},t.name))}))))}}]),a}(p.a.Component),to=Object(b.withLang)(Bt)(eo),ao=a(369),so=a(342),oo=a.n(so),no=a(698),ro=Object(b.withLang)(Bt)((function(e){return p.a.createElement("div",{className:"placeholder"},e.langProps.write_message)})),io=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={inputMessageHeight:0,text:""},e}return Object(h.a)(a,[{key:"setText",value:function(e){this.setState({text:e})}},{key:"onPaste",value:function(e){for(var t=(e.clipboardData||e.originalEvent.clipboardData).items,a=0;a<t.length;a++)if("file"===t[a].kind){var s=t[a].getAsFile();this.props.addFile(s,!0)}}},{key:"componentDidUpdate",value:function(){this.props.isEdit&&(/\S/.test(this.state.text)||this.props.attachedRecentMessages.length||this.props.images.length||this.props.files.length||this.props.sounds.length||this.props.cancelEditMessage())}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"dialog-input ".concat(this.props.isShow?"":"d-none")},p.a.createElement(no.a,{component:"label",className:"btn-add-files"},p.a.createElement(oo.a,{style:{transform:"rotate(45deg)",color:"#008FF7"}}),p.a.createElement("input",{type:"file",multiple:!0,onChange:function(t){e.props.addFile(t)},id:"uploadFile",style:{display:"none"},accept:"image/jpeg,image/gif,image/jpeg,image/png,application/pdf,text/plain,application/x-zip-compressed,application/zip,application/msword,audio/mpeg"})),p.a.createElement("textarea",{className:"col input-message",id:"input-message",onPaste:function(t){e.onPaste(t)},onKeyDown:function(t){(38!==t.keyCode||e.props.isEdit||e.state.text.length||e.props.setLastEditMessage(),13!==t.keyCode||t.shiftKey)||(t.preventDefault(),(/\S/.test(e.state.text)||e.props.attachedRecentMessages.length||e.props.images.length||e.props.files.length||e.props.sounds.length)&&(e.props.isEdit?(e.props.sendEditMessage(e.state.text),e.setState({text:""})):(e.props.sendMessage(e.state.text),e.setState({text:""})),document.getElementById("input-message").style.maxHeight="60px"))},onInput:function(){var e=document.getElementById("input-message");e.style.height="5px",e.style.height=e.scrollHeight+"px",e.scrollHeight>179?e.style.maxHeight="179px":e.style.maxHeight=e.scrollHeight+"px"},onChange:function(t){e.props.typing(t.target.value,e.state.text),e.setState({text:t.target.value})},value:this.state.text}),!this.state.text&&p.a.createElement(ro,null),!this.props.isEdit&&p.a.createElement(wt.CSSTransitionGroup,{transitionName:"btn-send-message",transitionEnterTimeout:100,transitionLeaveTimeout:100},(/\S/.test(this.state.text)||!!this.props.files.length||!!this.props.images.length||!!this.props.sounds.length||!!this.props.attachedRecentMessages.length)&&p.a.createElement(no.a,{onClick:function(){e.props.sendMessage(e.state.text),e.setState({text:""}),document.getElementById("input-message").style.maxHeight="60px"},className:"btn-send-message"},p.a.createElement(Us.a,{style:{color:"#008FF7"}}))),this.props.isEdit&&p.a.createElement(wt.CSSTransitionGroup,{transitionName:"btn-send-message",transitionEnterTimeout:100,transitionLeaveTimeout:100},JSON.stringify({text:this.props.editMessage.text,images:this.props.editMessage.images,sounds:this.props.editMessage.sounds,files:this.props.editMessage.files,attachedRecentMessages:this.props.editMessage.recentMessages})!==JSON.stringify({text:this.state.text,images:this.props.images,sounds:this.props.sounds,files:this.props.files,attachedRecentMessages:this.props.attachedRecentMessages})&&p.a.createElement(no.a,{ref:function(e){e&&e.style.setProperty("margin-right","0","important")},onClick:function(){e.props.sendEditMessage(e.state.text),e.setState({text:""}),document.getElementById("input-message").style.maxHeight="60px"},className:"btn-send-message"},p.a.createElement(rs.a,{style:{color:"#008FF7"}})),p.a.createElement(no.a,{ref:function(e){e&&e.style.setProperty("margin-left","0","important")},onClick:function(){e.props.cancelEditMessage(),document.getElementById("input-message").style.maxHeight="60px"},className:"btn-send-message"},p.a.createElement($s.a,{style:{color:"#008FF7"}}))),p.a.createElement(ao.a,{handleHeight:!0,onResize:function(t,a){e.setState({inputMessageHeight:a})}}))}}]),a}(p.a.Component),co=a(345),lo=a.n(co),po=a(218),uo=a.n(po),mo=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={inputMessageHeight:0},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"dialog-input"},p.a.createElement(Lt.a,{className:"btn-reply",onClick:function(){e.props.addAttachmentRecentMessage()}},p.a.createElement(uo.a,{style:{color:"#99AABB"}})),!this.props.recentMessages.find((function(e){return"call"===e.type}))&&p.a.createElement(Lt.a,{className:"btn-forward",onClick:function(){e.props.addAttachmentForwardMessage()}},p.a.createElement(uo.a,{style:{color:"#99AABB",transform:"scaleX(-1)"}})),p.a.createElement("div",{className:"col"}),this.props.recentMessages[0].user._id===this.props.user._id&&"call"!==this.props.recentMessages[0].type&&1===this.props.recentMessages.length&&p.a.createElement(Lt.a,{className:"btn-edit-message",onClick:function(){e.props.setEditMessage()}},p.a.createElement(rs.a,{style:{color:"#99AABB"}})),!this.props.recentMessages.find((function(t){return t.user._id!==e.props.user._id}))&&p.a.createElement(Lt.a,{className:"btn-delete-message",onClick:function(){e.props.deleteMessage()}},p.a.createElement(lo.a,{style:{color:"#99AABB"}})),p.a.createElement(Lt.a,{className:"btn-cancel-select",onClick:function(){e.props.cancelAttachmentRecentMessage()}},p.a.createElement($s.a,{style:{color:"#99AABB"}})))}}]),a}(p.a.Component),ho=Object(D.b)((function(e){return{user:e.user}}))(mo),go=!1,fo=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).state={recentMessages:[],attachedRecentMessages:s.props.dialogs.forwardMessages,sounds:[],files:[],images:[],inputMessageHeight:0,isEdit:!1,editMessage:{},canTyping:!0,drag:!1},s.dropRef=p.a.createRef(),s.dragCounter=0,s.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},s.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),s.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&s.setState({drag:!0})},s.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),s.dragCounter--,0===s.dragCounter&&s.setState({drag:!1})},s.handleDrop=function(e){e.preventDefault(),e.stopPropagation(),s.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(s.handleDropFiles(e.dataTransfer.files),e.dataTransfer.clearData(),s.dragCounter=0)},s.handleDropFiles=function(e){for(var t=0;t<e.length;t++)s.addFile(e,!1,!0)},s.inputMessage=p.a.createRef(),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.dialogs.forwardMessages.length&&this.props.dialogsActions.setForward([]);var e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop);var t=Object(P.a)({},JSON.parse(localStorage.getItem("drafts")));t["draft-"+this.props.dialogId]&&this.inputMessage.current.setText(t["draft-"+this.props.dialogId])}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}},{key:"sendMessage",value:function(e){if(/\S/.test(e)||this.state.attachedRecentMessages.length||this.state.images.length||this.state.files.length||this.state.sounds.length){var t=Object(P.a)({},JSON.parse(localStorage.getItem("drafts")));switch(delete t["draft-"+this.props.dialogId],localStorage.setItem("drafts",JSON.stringify(t)),this.props.type){case"room":this.props.roomsActions.sendMessage({text:e,roomId:this.props.roomId,images:this.state.images,files:this.state.files,sounds:this.state.sounds,dialogId:this.props.dialogId,recentMessages:this.state.attachedRecentMessages},this.props.user.apiToken);break;case"dialog":this.props.dialogsActions.sendMessage({text:e,userId:this.props.userId,images:this.state.images,files:this.state.files,sounds:this.state.sounds,dialogId:this.props.dialogId,recentMessages:this.state.attachedRecentMessages},this.props.user.apiToken)}this.setState({attachedRecentMessages:[],images:[],sounds:[],files:[]}),this.inputMessage.current.setText("")}}},{key:"sendEditMessage",value:function(e){if(/\S/.test(e)||this.state.attachedRecentMessages.length||this.state.images.length||this.state.sounds.length||this.state.files.length){switch(this.props.type){case"room":this.props.roomsActions.editMessage({_id:this.state.editMessage._id,text:e,roomId:this.props.roomId,images:this.state.images,files:this.state.files,sounds:this.state.sounds,dialogId:this.props.dialogId,recentMessages:this.state.attachedRecentMessages},this.props.user.apiToken);break;case"dialog":this.props.dialogsActions.editMessage({_id:this.state.editMessage._id,text:e,userId:this.props.userId,images:this.state.images,files:this.state.files,sounds:this.state.sounds,dialogId:this.props.dialogId,recentMessages:this.state.attachedRecentMessages},this.props.user.apiToken)}this.cancelEditMessage()}}},{key:"deleteMessage",value:function(){switch(this.props.type){case"room":this.props.roomsActions.deleteMessage({roomId:this.props.roomId,deleteMessages:this.state.recentMessages},this.props.user.apiToken);break;case"dialog":this.props.dialogsActions.deleteMessage({otherId:this.props.userId,dialogId:this.props.dialogId,deleteMessages:this.state.recentMessages},this.props.user.apiToken)}this.setState({recentMessages:[]})}},{key:"retrySendMessage",value:function(e){switch(this.props.type){case"room":e.roomId=this.props.rooms.activeRoom._id,e.dialogId=this.props.dialogId,this.props.roomsActions.retrySendMessage(e,this.props.user.apiToken);break;case"dialog":e.userId=this.props.userId,e.dialogId=this.props.dialogId,this.props.dialogsActions.retrySendMessage(e,this.props.user.apiToken)}}},{key:"deleteLocalMessage",value:function(e){switch(this.props.type){case"room":this.props.roomsActions.deleteLocalMessage(e);break;case"dialog":this.props.dialogsActions.deleteLocalMessage(e,this.props.dialogId)}}},{key:"addAttachmentRecentMessage",value:function(){this.setState({attachedRecentMessages:this.state.recentMessages,recentMessages:[]})}},{key:"addAttachmentForwardMessage",value:function(){this.props.dialogsActions.setForward(this.state.recentMessages),this.setState({recentMessages:[]})}},{key:"cancelAttachmentRecentMessage",value:function(){this.setState({recentMessages:[]})}},{key:"setEditMessage",value:function(){this.inputMessage.current.setText(this.state.recentMessages[0].text),this.state.recentMessages[0].images.map((function(e,t){return e.id=t,1})),this.state.recentMessages[0].sounds.map((function(e,t){return e.id=t,1})),this.state.recentMessages[0].files.map((function(e,t){return e.id=t,1})),this.setState({images:this.state.recentMessages[0].images,sounds:this.state.recentMessages[0].sounds,files:this.state.recentMessages[0].files,recentMessages:[],attachedRecentMessages:this.state.recentMessages[0].recentMessages,isEdit:!0,editMessage:this.state.recentMessages[0]})}},{key:"setLastEditMessage",value:function(){var e=this,t=this.props.messages.slice().reverse().find((function(t){return t.user._id===e.props.user._id}));t.images.map((function(e,t){return e.id=t,1})),t.sounds.map((function(e,t){return e.id=t,1})),t.files.map((function(e,t){return e.id=t,1})),t&&(this.inputMessage.current.setText(t.text),this.setState({images:t.images,sounds:t.sounds,files:t.files,recentMessages:[],attachedRecentMessages:t.recentMessages,isEdit:!0,editMessage:t}))}},{key:"cancelEditMessage",value:function(){this.inputMessage.current.setText(""),this.setState({images:[],sounds:[],files:[],recentMessages:[],attachedRecentMessages:[],isEdit:!1,editMessage:{}})}},{key:"readMessages",value:function(){var e=this;switch(go&&clearTimeout(go),this.props.type){case"room":go=setTimeout((function(){e.props.roomsActions.readMessages({dialogId:e.props.dialogId,roomId:e.props.roomId,userId:e.props.user._id},e.props.user.apiToken)}),100);break;case"dialog":go=setTimeout((function(){e.props.dialogsActions.readMessages({dialogId:e.props.dialogId,otherId:e.props.userId,userId:e.props.user._id},e.props.user.apiToken)}),100)}}},{key:"loadMessages",value:function(){switch(this.props.type){case"room":this.props.roomsActions.loadMessages({dialogId:this.props.dialogId},this.props.user.apiToken);break;case"dialog":this.props.dialogsActions.loadMessages({dialogId:this.props.dialogId},this.props.user.apiToken)}}},{key:"addFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(z.a)(this.state.sounds),o=Object(z.a)(this.state.files),n=Object(z.a)(this.state.images),r=s.length+o.length+n.length;if(!t&&!a){for(var i=0;i<e.target.files.length;i++){if(r>9){ht.b.error("Max upload 10 attachments!",{position:ht.b.POSITION.TOP_CENTER});break}var c={path:(window.URL||window.webkitURL).createObjectURL(new Blob([e.target.files[i]],{type:e.target.files[i].type})),file:e.target.files[i],name:e.target.files[i].name,type:e.target.files[i].name.split(".").pop(),size:e.target.files[i].size/1e3};"png"!==c.type.toLowerCase()&&"jpg"!==c.type.toLowerCase()&&"jpeg"!==c.type.toLowerCase()&&"gif"!==c.type.toLowerCase()||(c.id=n.length,n.push(c)),"txt"!==c.type.toLowerCase()&&"pdf"!==c.type.toLowerCase()&&"docx"!==c.type.toLowerCase()&&"zip"!==c.type.toLowerCase()&&"doc"!==c.type.toLowerCase()||(c.id=o.length,o.push(c)),"mp3"===c.type.toLowerCase()&&(c.id=s.length,s.push(c)),r++}e.target.value=null}if(t)if(r>9)ht.b.error("Max upload 10 attachment!",{position:ht.b.POSITION.TOP_CENTER});else{var l={id:n.length,path:(window.URL||window.webkitURL).createObjectURL(new Blob([e],{type:e.type})),file:e,name:e.name,type:e.name.split(".").pop()};n.push(l)}if(a)for(var p=0;p<e.length;p++){if(r>9){ht.b.error("Max upload 10 attachment!",{position:ht.b.POSITION.TOP_CENTER});break}var u={path:(window.URL||window.webkitURL).createObjectURL(new Blob([e[p]],{type:e[p].type})),file:e[p],name:e[p].name,type:e[p].name.split(".").pop(),size:e[p].size/1e3};"png"!==u.type&&"jpg"!==u.type&&"jpeg"!==u.type&&"gif"!==u.type||(u.id=n.length,n.push(u)),"txt"!==u.type&&"pdf"!==u.type&&"docx"!==u.type&&"zip"!==u.type&&"doc"!==u.type||(u.id=o.length,o.push(u)),"mp3"===u.type&&(u.id=s.length,s.push(u)),r++}this.setState({sounds:s,files:o,images:n})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.canTyping===t.canTyping}},{key:"typing",value:function(e,t){var a=this;if(e>t&&!this.state.isEdit&&this.state.canTyping){switch(this.setState({canTyping:!1}),this.props.type){case"room":mt.typingRoom(this.props.rooms.activeRoom._id);break;case"dialog":mt.typingDialog(this.props.userId,this.props.user._id)}setTimeout((function(){a.setState({canTyping:!0})}),2500)}if(!this.state.isEdit){var s=Object(P.a)({},JSON.parse(localStorage.getItem("drafts")));s["draft-"+this.props.dialogId]=e,s["draft-"+this.props.dialogId]&&/\S/.test(s["draft-"+this.props.dialogId])||delete s["draft-"+this.props.dialogId],localStorage.setItem("drafts",JSON.stringify(s))}}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"dialog-container",ref:this.dropRef},this.state.drag&&p.a.createElement("div",{className:"drag-and-drop-container"},p.a.createElement("div",{className:"data-empty"},p.a.createElement(cs.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,"Drag & drop files here to attach"))),p.a.createElement(Qs,{loadMessages:function(){e.loadMessages()},retrySendMessage:function(t){e.retrySendMessage(t)},deleteLocalMessage:function(t){e.deleteLocalMessage(t)},messages:this.props.messages,to:this.props.to,dialog:this.props.dialog,userName:this.props.userName,typing:this.props.typing,loading:this.props.loading,type:this.props.type,unRead:this.props.messages.filter((function(t){return!t.isRead&&t.user._id!==e.props.user._id})),recentMessages:this.state.recentMessages,onSelect:function(t){e.setState({recentMessages:[].concat(Object(z.a)(e.state.recentMessages),[t])})},unSelect:function(t){e.setState({recentMessages:Object(z.a)(e.state.recentMessages.filter((function(e){return e._id!==t})))})},readMessages:function(){e.readMessages()}}),p.a.createElement(wt.CSSTransitionGroup,{transitionName:"scroll-to-bottom",transitionEnterTimeout:100,transitionLeaveTimeout:100},(!!this.state.attachedRecentMessages.length||!!this.state.images.length||!!this.state.sounds.length||!!this.state.files.length)&&p.a.createElement(to,{images:this.state.images,recentMessages:this.state.attachedRecentMessages,files:this.state.files,sounds:this.state.sounds,unSelectRecentMessages:function(){e.setState({attachedRecentMessages:[]})},removeImage:function(t){e.setState({images:Object(z.a)(e.state.images.filter((function(e){return e.id!==t})))})},removeSound:function(t){e.setState({sounds:Object(z.a)(e.state.sounds.filter((function(e){return e.id!==t})))})},removeFile:function(t){e.setState({files:Object(z.a)(e.state.files.filter((function(e){return e.id!==t})))})}})),p.a.createElement(io,{isShow:!this.state.recentMessages.length,ref:this.inputMessage,cancelEditMessage:function(){e.cancelEditMessage()},isEdit:this.state.isEdit,editMessage:this.state.editMessage,sendEditMessage:function(t){e.sendEditMessage(t)},images:this.state.images,sounds:this.state.sounds,files:this.state.files,attachedRecentMessages:this.state.attachedRecentMessages,sendMessage:function(t){e.sendMessage(t)},typing:function(t,a){e.typing(t,a)},addFile:function(t,a){e.addFile(t,a)},setLastEditMessage:function(){e.setLastEditMessage()}}),!!this.state.recentMessages.length&&p.a.createElement(ho,{addAttachmentRecentMessage:function(){e.addAttachmentRecentMessage()},cancelAttachmentRecentMessage:function(){e.cancelAttachmentRecentMessage()},addAttachmentForwardMessage:function(){e.addAttachmentForwardMessage()},deleteMessage:function(){e.deleteMessage()},recentMessages:this.state.recentMessages,setEditMessage:function(){e.setEditMessage()}})))}}]),a}(p.a.Component);var yo=Object(D.b)((function(e){return{user:e.user,rooms:e.rooms,dialogs:e.dialogs}}),(function(e){return{roomsActions:Object(L.b)(o,e),dialogsActions:Object(L.b)(s,e)}}))(fo),bo=a(17),Eo=a.n(bo),vo={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",textAlign:"center"}},Oo=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,style:vo,contentLabel:"Error join room"},"dont_have_payment"===this.props.rooms.activeRoom.error.msg&&p.a.createElement(Dt.a,{to:"/payment"}),p.a.createElement(Kt.a,{style:{color:"#FF3333",fontSize:60}}),p.a.createElement("h2",{className:"modal-title"},this.props.langProps.error),p.a.createElement("p",{className:"modal-text",style:{marginBottom:this.props.rooms.activeRoom.error.ban?0:""}},this.props.langProps[this.props.rooms.activeRoom.error.msg]),!!this.props.rooms.activeRoom.error.ban&&p.a.createElement("p",{className:"modal-text"},this.props.langProps.to," ",p.a.createElement("span",{style:{color:"#008FF7"}},new Date(this.props.rooms.activeRoom.error.ban.date).toLocaleString())),p.a.createElement("button",{className:"button-blue",type:"submit",style:{width:"max-content"},onClick:function(){e.props.history.push("/")}},this.props.langProps.back))}}]),a}(p.a.Component),So=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{rooms:e.rooms}}))(Object(Dt.g)(Oo))),_o=a(108),jo=a.n(_o),Ro=a(169),ko=a.n(Ro),Ao=a(170),xo=a.n(Ao),To=a(171),Io=a.n(To),No=a(168),Co=a.n(No),Mo=Object(It.a)((function(e){return{root:{backgroundColor:"#fff",color:"#008FF7",zIndex:2,"&:hover":{backgroundColor:"#fff"}}}}))(xt.a),wo=Object(It.a)((function(e){return{root:{backgroundColor:"#fff",color:"#008FF7",zIndex:2,minWidth:36,height:36,boxShadow:"none!important",marginLeft:"auto",marginRight:"14px","&:hover":{backgroundColor:"#fff",boxShadow:"none"}}}}))(xt.a),Fo=Object(Dt.g)((function(e){return p.a.createElement(w.Scrollbars,{renderTrackVertical:function(){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(){return p.a.createElement("div",{className:"thumb-vertical"})},className:"theme-members scroll",autoHide:!0},e.users.map((function(t,a){return p.a.createElement("div",{key:a,style:{cursor:"pointer"},className:"member col-6 col-sm-6 col-md-6 col-lg-4 col-xl-3",onClick:function(){e.history.push({search:"?user=".concat(t._id)})}},p.a.createElement(R,{avatarStyle:{borderRadius:0},avatar:!!t.avatar&&t.avatar,name:t.name.first.charAt(0)+t.name.last.charAt(0),style:{fontSize:30,borderRadius:0,width:"100%",height:"100%",backgroundColor:"rgb(".concat(t.color,")")}}),t.speaking&&p.a.createElement("span",{className:"speaking"}),p.a.createElement("span",{className:"user-name"},t.name.first," ",t.name.last))})))})),Do=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.audio.srcObject=this.props.stream}},{key:"render",value:function(){var e=this;return p.a.createElement("audio",{ref:function(t){e.audio=t},style:{display:"none"},autoPlay:!0,controls:!0})}}]),a}(p.a.PureComponent),Lo=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={act:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).act},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.context.toggleHeader(!1);var t=setInterval((function(){mt.getSocketId()&&(e.props.roomsActions.joinRoom({id:e.props.match.params.id,apiToken:e.props.user.apiToken}),clearInterval(t))}),100);this.props.history.listen((function(t){e.setState({act:es.a.parse(t.search,{ignoreQueryPrefix:!0}).act})}))}},{key:"componentWillUnmount",value:function(){this.props.rooms.activeRoom&&this.props.roomsActions.leaveRoom(this.props.rooms.activeRoom._id,this.props.rooms.activeRoom.lang)}},{key:"render",value:function(){var e=this;return this.props.rooms.activeRoom?this.props.rooms.activeRoom&&this.props.rooms.activeRoom.error?p.a.createElement(So,{isOpen:!0}):this.props.rooms.activeRoom&&p.a.createElement(p.a.Fragment,null,this.props.rooms.activeRoom.remoteStream&&p.a.createElement(Do,{stream:this.props.rooms.activeRoom.remoteStream}),p.a.createElement("div",{className:"col-xl-3 col-lg-6 col-md-6 theme-first-block ".concat("chat"===this.state.act?"active":"hide")},p.a.createElement("div",{className:"theme-header"},p.a.createElement(no.a,{className:"back-btn",onClick:function(){"chat"===e.state.act?e.props.history.push({search:""}):e.props.history.push("/")}},p.a.createElement(as.a,{fontSize:"small",style:{color:"#008FF7"}})),p.a.createElement("div",{className:"theme-info"},p.a.createElement("h2",{className:"theme-title"},this.props.rooms.activeRoom.title),p.a.createElement("h3",{className:"theme-online-counter"},this.props.rooms.activeRoom.users.length+1," ",this.props.langProps.online)),p.a.createElement(wo,{id:"dialog-more-actions-"+this.props.rooms.activeRoom._id,color:"primary",size:"small","aria-label":"more"},p.a.createElement(Co.a,{style:{color:"#008FF7"}})),p.a.createElement(Xt,{event:"click",bottom:!0,right:!0,actions:this.props.rooms.activeRoom.ownerId===this.props.user._id||"admin"===this.props.user.role||"moder"===this.props.user.role?[{text:this.props.langProps.invite_friends,action:function(){e.props.history.push({search:"?act=invite"})}},{text:this.props.langProps.show_investments,action:function(){e.props.history.push({search:"?modal=investments"})}},{text:this.props.langProps.edit_room,action:function(){e.props.history.push({search:"?act=editRoom"})}},{text:this.props.langProps.delete_room,action:function(){e.props.history.push({search:"?act=deleteRoom"})}}]:[{text:this.props.langProps.invite_friends,action:function(){e.props.history.push({search:"?act=invite"})}},{text:this.props.langProps.show_investments,action:function(){e.props.history.push({search:"?modal=investments"})}}],from:"dialog-more-actions-"+this.props.rooms.activeRoom._id})),p.a.createElement("div",{className:"theme-sidebar"},p.a.createElement(yo,{messages:this.props.rooms.activeRoom.dialog.messages,type:"room",to:this.props.rooms.activeRoom.title,dialogId:this.props.rooms.activeRoom.dialog._id,roomId:this.props.rooms.activeRoom._id}))),p.a.createElement("div",{className:"col-xl-9 col-lg-6 col-md-6 theme-screen ".concat("chat"===this.state.act?"hide":"active")},this.props.rooms.activeRoom&&p.a.createElement(Fo,{users:this.props.rooms.activeRoom.users}),p.a.createElement("div",{className:"media-options"},p.a.createElement(Mo,{className:"media-option mobile-option",onClick:function(){e.props.history.push({search:"?act=chat"})}},!!this.props.rooms.activeRoom.dialog.messages.filter((function(t){return!t.isRead&&t.user._id!==e.props.user._id})).length&&p.a.createElement("span",{style:{right:0},className:"unread-messages-count"},this.props.rooms.activeRoom.dialog.messages.filter((function(t){return!t.isRead&&t.user._id!==e.props.user._id})).length),p.a.createElement(A.a,{style:{color:this.props.media.musicOn?"#008FF7":"#fff"}})),!!this.props.rooms.activeRoom.muted&&p.a.createElement(Nt.a,{title:"Blocked to ".concat(new Date(this.props.rooms.activeRoom.muted.date).toLocaleString()),placement:"top"},p.a.createElement(Mo,{className:"media-option reject"},p.a.createElement(jo.a,{style:{color:"#fff"}}))),!this.props.rooms.activeRoom.muted&&p.a.createElement(Mo,{className:"media-option ".concat(this.props.media.micOn?"active":""),onClick:function(){Ge()}},p.a.createElement(ko.a,{style:{color:this.props.media.micOn?"#fff":"#008FF7"}})),p.a.createElement(Mo,{className:"media-option ".concat(this.props.media.musicOn?"":"active"),onClick:function(){We()}},p.a.createElement(xo.a,{style:{color:this.props.media.musicOn?"#008FF7":"#fff"}})),p.a.createElement(Mo,{className:"media-option reject",onClick:function(){e.props.history.push("/")}},p.a.createElement(Io.a,{style:{color:"#fff"}}))))):p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}})}}]),a}(p.a.Component);Lo.contextType=y;var Po=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms,media:e.media}}),(function(e){return{roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Lo))),Bo=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.context.toggleHeader(!0)}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"render",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-md-9",style:{order:2}}),p.a.createElement("div",{className:"col-md-9",style:{order:4}}))}}]),a}(p.a.Component);Bo.contextType=y;var Uo=Object(D.b)((function(e){return{user:e.user,rooms:e.rooms,dialogs:e.dialogs}}))(Bo),zo=a(346),Go=a.n(zo),Wo=a(109),qo=a.n(Wo),Jo=Object(It.a)((function(e){return{root:{backgroundColor:"#25D441",color:"#fff",zIndex:2,width:36,height:36,boxShadow:"none!important",marginRight:"14px","&:hover":{backgroundColor:"#25D441",boxShadow:"none"}}}}))(xt.a),Ho=Object(It.a)((function(e){return{root:{backgroundColor:"#fff",color:"#008FF7",zIndex:2,width:36,height:36,boxShadow:"none!important",marginRight:"14px","&:hover":{backgroundColor:"#fff",boxShadow:"none"}}}}))(xt.a),Vo=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={showBtnAdd:!0,scrollTop:0},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.context.toggleHeader(!0),window.innerWidth<769&&this.context.toggleHeader(!1),this.props.dialogs.dialogs.find((function(t){return t.user._id===e.props.match.params.id}))?(this.props.dialogsActions.updateOnline(this.props.match.params.id,this.props.user.apiToken),this.props.dialogs.dialogs.find((function(t){return t.user._id===e.props.match.params.id})).getted||this.props.dialogsActions.dialogLoad(this.props.match.params.id,this.props.user.apiToken)):this.props.dialogsActions.dialogGet(this.props.match.params.id,this.props.user.apiToken)}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"render",value:function(){var e=this,t=this.props.dialogs.dialogs.find((function(t){return t.user._id===e.props.match.params.id}));return p.a.createElement(p.a.Fragment,null,t&&!t.isNotFound&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-xl-9 col-lg-6 col-md-6 dialog-header",style:{order:2}},p.a.createElement(no.a,{className:"back-btn",onClick:function(){e.props.history.push("/")}},p.a.createElement(as.a,{fontSize:"small",style:{color:"#008FF7"}})),p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{style:{display:"contents"},onClick:function(){e.props.history.push({search:"?user=".concat(t.user._id)})}},p.a.createElement(R,{style:{width:36,height:36,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(t.user.color,")")},name:t.user.name.first.charAt(0)+t.user.name.last.charAt(0),avatar:!!t.user.avatar&&t.user.avatar})),p.a.createElement("div",{className:"user-info col",onClick:function(){e.props.history.push({search:"?user=".concat(t.user._id)})}},p.a.createElement("p",{className:"user-name"},"".concat(t.user.name.first," ").concat(t.user.name.last)),!t.user.online&&p.a.createElement("p",{className:"last-message"},Gt(t.user.onlineAt)),t.user.online&&p.a.createElement("p",{className:"last-message",style:{color:"#35E551"}},this.props.langProps.online))),p.a.createElement("div",{style:{marginLeft:"auto"}},t.user._id!==this.props.user._id&&"none"===this.props.call.status&&p.a.createElement(Jo,{color:"primary",size:"small","aria-label":"call",onClick:function(){e.props.callActions.call(t.user,e.props.user.apiToken)}},p.a.createElement(qo.a,{style:{color:"#fff"}})),p.a.createElement(Ho,{id:"dialog-more-actions-"+t._id,color:"primary",size:"small","aria-label":"more"},p.a.createElement(Co.a,{style:{color:"#008FF7"}})),p.a.createElement(Xt,{event:"click",bottom:!0,right:!0,actions:[{text:this.props.langProps.show_investments,action:function(){e.props.history.push({search:"?modal=investments"})}}],from:"dialog-more-actions-"+t._id}))),p.a.createElement("div",{className:"col-xl-9 col-lg-6 col-md-6",style:{order:4}},p.a.createElement(yo,{messages:t.messages,loading:t&&!t.getted,type:"dialog",userName:t.user.name.first,typing:t.typing,userId:t.user._id,to:t.user.name.first,dialogId:t._id,dialog:t}))),t&&t.isNotFound&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-xl-9 col-lg-6 col-md-6",style:{order:2}}),p.a.createElement("div",{className:"col-xl-9 col-lg-6 col-md-6",style:{order:4}},p.a.createElement("div",{className:"data-empty"},p.a.createElement(Go.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.user_not_found)))))}}]),a}(p.a.PureComponent);Vo.contextType=y;var Qo=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,dialogs:e.dialogs,call:e.call}}),(function(e){return{dialogsActions:Object(L.b)(s,e),usersActions:Object(L.b)(i,e),callActions:Object(L.b)(c,e)}}))(Object(Dt.g)(Vo))),Yo=(a(693),a(172)),$o=a.n(Yo),Ko=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={isFetching:!0,tariffs:[],redirect:!1,stats:"can"},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.context.toggleHeader(!1),fetch("".concat(et,"/api/payment/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)}}).then((function(e){return e.json()})).then((function(t){var a=t.tariffs,s=t.status;e.setState({isFetching:!1,tariffs:a,status:s})}))}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"buy",value:function(e){var t=this;this.setState({isFetching:!0}),fetch("".concat(et,"/api/payment/buy"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({tariffId:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error||(e.formUrl?window.location.href=e.formUrl:(t.setState({isFetching:!1}),t.props.history.push("/")))}))}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"payment-page"},"can"===this.state.status&&p.a.createElement(p.a.Fragment,null,p.a.createElement("h2",{className:"payment-title"},this.props.langProps.hi," ",this.props.user.name.first),p.a.createElement("p",{className:"payment-subtitle"},this.props.langProps.pick_a_plan_continue)),p.a.createElement("div",{className:"payment-tariffs"},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#fff",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),!this.state.isFetching&&p.a.createElement("div",{className:"row"},this.state.tariffs.map((function(t){return p.a.createElement("div",{className:"col-12 col-md-6 col-lg-3 col-xl-2 payment-tariff-container"},p.a.createElement("div",{className:"payment-tariff"},p.a.createElement("p",{className:"payment-tariff-title"},t.title),p.a.createElement("p",{className:"payment-tariff-price"},0===t.price?"Free":t.price),p.a.createElement("button",{className:"button-gray",onClick:function(){e.buy(t._id)},style:{width:"80%",margin:"0 10% 0 10%"}},e.props.langProps.buy)))}))),"cant"===this.state.status&&p.a.createElement("div",{className:"data-empty"},p.a.createElement($o.a,{style:{color:"#fff",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",{style:{color:"#fff",fontSize:18,fontWeight:600}},this.props.langProps.already_tariff),p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.push("/")}},this.props.langProps.back)))))}}]),a}(p.a.Component);Ko.contextType=y;var Xo=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user}}))(Object(Dt.g)(Ko))),Zo=(a(694),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={isFetching:!0,tariffs:[],redirect:!1},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.context.toggleHeader(!1)}},{key:"componentWillUnmount",value:function(){this.context.toggleHeader(!1)}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"ban-page"},p.a.createElement("p",{className:"ban-title"},"Ooops..."),p.a.createElement("p",{className:"ban-subtitle"},"You have ban to ",p.a.createElement("span",{style:{color:"#008FF7"}},new Date(this.props.ban.date).toLocaleString())),p.a.createElement("button",{className:"button-blue",onClick:function(){e.props.cookies.remove("apiToken",{path:"/"}),window.location.reload()},style:{width:"max-content",marginTop:25}},"Logout")))}}]),a}(p.a.Component));Zo.contextType=y;var en=Object(D.b)((function(e){return{ban:e.ban}}))(Object(Dt.g)(Object(Ja.a)(Zo))),tn=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={token:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).token,redirect:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).redirect},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.token?(this.props.cookies.set("apiToken",this.state.token,{path:"/"}),this.state.redirect&&window.location.replace(this.state.redirect),window.location.replace("/")):window.location.replace("/")}},{key:"render",value:function(){return p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}})}}]),a}(p.a.Component),an=Object(Ja.a)(Object(Dt.g)(tn)),sn=[{path:"/login",exact:!0,type:"auth",title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",component:function(){return p.a.createElement($a,null)}},{path:"/register",exact:!0,type:"auth",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",component:function(){return p.a.createElement(Xa,null)}},{path:"/auth_social",exact:!0,type:"auth",title:"Loading...",component:function(){return p.a.createElement(an,null)}},{path:"/",exact:!0,type:"user",title:"Home",component:function(){return p.a.createElement(Uo,null)}},{path:"/languages",exact:!0,type:"user",title:"Languages",component:function(){return p.a.createElement(za,null)}},{path:"/chats/:id",exact:!0,type:"user",title:"",component:function(){return p.a.createElement(Qo,{key:window.location.pathname})}},{path:"/rooms/:id",exact:!0,type:"user",title:"",component:function(){return p.a.createElement(Po,{key:window.location.pathname})}},{path:"/payment",exact:!0,type:"user",title:"",component:function(){return p.a.createElement(Xo,null)}},{path:"/ban",exact:!0,type:"ban",title:"",component:function(){return p.a.createElement(en,null)}}],on=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return 404}}]),a}(p.a.Component),nn=a(728),rn=a(727),cn=a(97),ln=a.n(cn),pn=Object(It.a)((function(e){return{root:{color:"#CCD1D6",display:"flex","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(rn.a),un=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Lt.a,{className:"user-item",onClick:function(){e.props.onClick(e.props.user._id)}},p.a.createElement(R,{avatar:!!this.props.user.avatar&&this.props.user.avatar,style:{minWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.user.color,")")},name:this.props.user.name.first.charAt(0)+this.props.user.name.last.charAt(0)}),p.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",width:"calc(100% - 82px)"}},p.a.createElement("p",{className:"user-name"},"".concat(this.props.user.name.first," ").concat(this.props.user.name.last)),!this.props.user.online&&p.a.createElement("p",{className:"last-message"},Gt(this.props.user.onlineAt)),this.props.user.online&&p.a.createElement("p",{className:"last-message",style:{color:"#35E551"}},"online")),"select"===this.props.type&&p.a.createElement(pn,{checked:this.props.selected}))}}]),a}(p.a.Component),dn=Object(D.b)((function(e){return{myUser:e.user}}))(Object(Dt.g)(un)),mn=!1,hn=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={q:"",searchResult:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.users.friends.getted||this.props.usersActions.friendsGet(this.props.user.apiToken)}},{key:"onScroll",value:function(){}},{key:"onSearch",value:function(e){var t=this,a=e.target.value;this.setState({q:a}),mn&&clearTimeout(mn),a.length&&/\S/.test(a)&&(mn=setTimeout((function(){fetch("".concat(et,"/api/user/search"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.props.user.apiToken)},body:JSON.stringify({q:t.state.q})}).then((function(e){return e.json()})).then((function(e){t.setState({searchResult:e})}))}),500)),a.length||this.setState({searchResult:[]})}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("input",{type:"text",value:this.state.q,onChange:function(t){e.onSearch(t)},className:"friends-search-input",placeholder:this.props.langProps.search}),!this.state.searchResult.length&&!this.state.q.length&&p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",onScroll:function(){e.onScroll()},style:{height:340},autoHide:!0},this.props.users.friends.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.props.users.friends.users.map((function(t,a){return p.a.createElement(dn,{key:a,type:e.props.type,selected:"select"===e.props.type&&!!e.props.selectUsers.find((function(e){return e===t._id})),onClick:function(t){e.props.onClick(t)},user:t})})),!this.props.users.friends.users.length&&!this.props.users.friends.isFetching&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(ln.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.you_dont_have_friends))),(!!this.state.searchResult.length||!!this.state.q.length)&&p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",onScroll:function(){e.onScroll()},style:{height:340},autoHide:!0},this.state.searchResult.map((function(t,a){return p.a.createElement(dn,{key:a,type:e.props.type,selected:"select"===e.props.type&&!!e.props.selectUsers.find((function(e){return e===t._id})),onClick:function(t){e.props.onClick(t)},user:t})})),!this.state.searchResult.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(ln.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.users_not_found))))}}]),a}(p.a.Component);var gn=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(hn))),fn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)"}},yn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",minHeight:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},bn=Object(It.a)((function(e){return{root:{color:"#CCD1D6","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(rn.a),En=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={title:"",isPrivate:!1,step:"create",selectUsers:[],error:!1,errors:[],isFetching:!1},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[],isFetching:!0}),e.preventDefault(),fetch("".concat(et,"/api/room/create"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({title:this.state.title,isPrivate:this.state.isPrivate,lang:this.props.user.roomLang,selectUsers:this.state.selectUsers})}).then((function(e){return e.json()})).then((function(e){e.error?t.setState({error:!0,errors:e.errors,step:"create",isFetching:!1}):(t.props.roomsActions.roomsAdd(e),mt.createRoom({room:e,lang:t.props.user.roomLang}),t.props.call.user?(t.props.history.push({search:""}),pe.dispatch({type:"ROOMS_SET_FORCE",payload:e._id})):t.props.history.push("/rooms/".concat(e._id)))}))}},{key:"render",value:function(){var e=this;return this.state.isFetching?p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:yn,contentLabel:"Create room"},p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}})):p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:"create"===this.state.step?fn:yn,contentLabel:"Create room"},"create"===this.state.step&&p.a.createElement("h2",{className:"modal-title"},this.props.langProps.new_room),"invite"===this.state.step&&p.a.createElement("h2",{className:"modal-title"},this.props.langProps.select_users),p.a.createElement("form",{style:{display:"contents"},onSubmit:function(t){e.onSubmit(t)}},"create"===this.state.step&&p.a.createElement(p.a.Fragment,null,p.a.createElement("input",{value:this.state.title,onChange:function(t){e.setState({title:t.target.value})},className:"input-field",type:"text",style:{marginBottom:10},placeholder:this.props.langProps.title,maxLength:50}),this.state.errors.find((function(e){return"title"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"title"===e.param})).msg]),p.a.createElement(nn.a,{control:p.a.createElement(bn,{checked:this.state.isPrivate,onChange:function(){e.setState({isPrivate:!e.state.isPrivate})}}),style:{color:"#667788"},label:this.props.langProps.private_room}),!this.state.title.length&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),!!this.state.title.length&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.setState({step:"invite"})},style:{width:"max-content",marginTop:5}},this.props.langProps.next)),"invite"===this.state.step&&p.a.createElement(p.a.Fragment,null,p.a.createElement(gn,{onClick:function(t){e.state.selectUsers.find((function(e){return e===t}))?e.setState({selectUsers:Object(z.a)(e.state.selectUsers.filter((function(e){return e!==t})))}):e.setState({selectUsers:[t].concat(Object(z.a)(e.state.selectUsers))})},type:"select",selectUsers:this.state.selectUsers}),p.a.createElement("button",{className:"button-gray",onClick:function(){e.setState({step:"create"})},style:{width:"max-content",marginTop:5}},this.props.langProps.back),p.a.createElement("button",{className:"button-blue",type:"submit",style:{width:"max-content",marginTop:5}},this.props.langProps.start))))}}]),a}(p.a.Component);var vn=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,call:e.call}}),(function(e){return{roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(En))),On=a(35),Sn=a.n(On),_n=a(349),jn=a.n(_n),Rn=a(347),kn=a.n(Rn),An=a(350),xn=a.n(An),Tn=a(351),In=a.n(Tn),Nn=a(219),Cn=a.n(Nn),Mn=a(348),wn=a.n(Mn),Fn=Object(It.a)((function(e){return{root:{backgroundColor:"#EDF0F3",boxShadow:"none!important","&:hover":{backgroundColor:"#008FF7"},"&:hover svg":{color:"#fff!important"},"& svg":{transition:"all 0.25s"}}}}))(xt.a),Dn=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"unban",value:function(){fetch("".concat(et,"/api/user/ban"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.myUser.apiToken)},body:JSON.stringify({userId:this.props.user._id,time:1})}).then((function(){ht.b.success("Unban sent",{position:ht.b.POSITION.TOP_CENTER})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{style:{cursor:"pointer",borderRadius:50},onClick:function(){e.props.user.avatar&&(e.props.history.push({search:"?modal=slider"}),pe.dispatch({type:"SLIDER_SET",payload:{images:[{path:e.props.user.avatar.original}],index:0}}))}},p.a.createElement(R,{style:{width:80,height:80,fontSize:28,lineHeight:"28px",fontWeight:600,backgroundColor:"rgb(".concat(this.props.user.color,")")},name:this.props.user.name.first.charAt(0)+this.props.user.name.last.charAt(0),avatar:!!this.props.user.avatar&&this.props.user.avatar})),p.a.createElement("p",{className:"user-profile-name"},this.props.user.name.first," ",this.props.user.name.last),p.a.createElement("p",{className:"user-profile-city"},this.props.user.city?this.props.user.city:this.props.langProps.not_indicated),p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"user-btn"},p.a.createElement(Ft.c,{style:{textDecoration:"none"},onClick:function(t){"/chats/".concat(e.props.user._id)===e.props.history.location.pathname&&t.preventDefault()},className:"dialog-link",to:"/chats/".concat(this.props.user._id)},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){}},p.a.createElement(kn.a,{style:{color:"#99AABB"}}))),p.a.createElement("p",null,this.props.langProps.message)),"none"===this.props.call.status&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Ft.c,{style:{textDecoration:"none"},onClick:function(t){t.preventDefault(),e.props.callActions.call(e.props.user,e.props.myUser.apiToken)},className:"dialog-link",to:"/chats/".concat(this.props.user._id)},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){}},p.a.createElement(qo.a,{style:{color:"#99AABB"}}))),p.a.createElement("p",null,this.props.langProps.call)),0===this.props.user.friendStatus&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.usersActions.sendRequest(e.props.userId,e.props.myUser.apiToken)}},p.a.createElement(wn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,this.props.langProps.plus_friend)),2===this.props.user.friendStatus&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.usersActions.acceptRequest(e.props.userId,e.props.myUser.apiToken)}},p.a.createElement(Cn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,this.props.langProps.accept)),(2===this.props.user.friendStatus||1===this.props.user.friendStatus)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.usersActions.removeRequest(e.props.userId,e.props.myUser.apiToken)}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,this.props.langProps.decline)),3===this.props.user.friendStatus&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.usersActions.removeRequest(e.props.userId,e.props.myUser.apiToken)}},p.a.createElement(jn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,this.props.langProps.remove)),("moder"===this.props.myUser.role||"admin"===this.props.myUser.role)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?mute=".concat(e.props.user._id)})}},p.a.createElement(jo.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,"Mute")),("moder"===this.props.myUser.role||"admin"===this.props.myUser.role)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?unmute=".concat(e.props.user._id)})}},p.a.createElement(ko.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,"Unmute")),("moder"===this.props.myUser.role||"admin"===this.props.myUser.role)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?banroom=".concat(e.props.user._id)})}},p.a.createElement(ia.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,"Ban room")),("moder"===this.props.myUser.role||"admin"===this.props.myUser.role)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?unbanroom=".concat(e.props.user._id)})}},p.a.createElement(xn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,"Unban room")),("moder"===this.props.myUser.role||"admin"===this.props.myUser.role)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?sendwarning=".concat(e.props.user._id)})}},p.a.createElement(Ra.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,"Send warning")),("moder"===this.props.myUser.role||"admin"===this.props.myUser.role)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?ban=".concat(e.props.user._id)})}},p.a.createElement(In.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,"Ban")),("moder"===this.props.myUser.role||"admin"===this.props.myUser.role)&&p.a.createElement("div",{className:"user-btn"},p.a.createElement(Fn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.unban()}},p.a.createElement(Cn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,"Unban"))))}}]),a}(p.a.Component);var Ln=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,myUser:e.user,call:e.call}}),(function(e){return{usersActions:Object(L.b)(i,e),callActions:Object(L.b)(c,e)}}))(Object(Dt.g)(Dn))),Pn=a(355),Bn=a.n(Pn),Un=a(354),zn=a.n(Un),Gn=a(353),Wn=a.n(Gn),qn=a(352),Jn=a.n(qn),Hn=Object(It.a)((function(e){return{root:{backgroundColor:"#EDF0F3",boxShadow:"none!important","&:hover":{backgroundColor:"#008FF7"},"&:hover svg":{color:"#fff!important"},"& svg":{transition:"all 0.25s"}}}}))(xt.a),Vn=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={activeTab:"main"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("label",{style:{cursor:"pointer"},className:"upload-avatar"},p.a.createElement(R,{style:{width:80,height:80,fontSize:28,lineHeight:"28px",fontWeight:600,backgroundColor:"rgb(".concat(this.props.user.color,")")},name:this.props.user.name.first.charAt(0)+this.props.user.name.last.charAt(0),avatar:!!this.props.user.avatar&&this.props.user.avatar}),p.a.createElement(Jn.a,{className:"upload-avatar-icon",style:{color:"#fff"}}),p.a.createElement("div",{className:"upload-avatar-background"}),p.a.createElement("input",{type:"file",onChange:function(t){e.props.userActions.uploadAvatar(t,e.props.user.apiToken)},id:"uploadAvatar",style:{display:"none"},accept:"image/jpeg,image/png"})),p.a.createElement("p",{className:"user-profile-name"},this.props.user.name.first," ",this.props.user.name.last),p.a.createElement("p",{className:"user-profile-city"},this.props.user.city?this.props.user.city:this.props.langProps.not_indicated),p.a.createElement("div",{className:"user-btn"},p.a.createElement(Hn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?modal=payments"})}},p.a.createElement(Wn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,this.props.langProps.my_orders)),p.a.createElement("div",{className:"user-btn"},p.a.createElement(Hn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?modal=settings"})}},p.a.createElement(zn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,this.props.langProps.settings)),p.a.createElement("div",{className:"user-btn"},p.a.createElement(Hn,{color:"primary",size:"small","aria-label":"add",onClick:function(){e.props.history.push({search:"?modal=contacts"})}},p.a.createElement(Bn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",null,this.props.langProps.contacts)))}}]),a}(p.a.Component);var Qn=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e),userActions:Object(L.b)(r,e)}}))(Object(Dt.g)(Vn))),Yn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"300px",minHeight:100}},$n=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.users.users.find((function(t){return t._id===e.props.userId}))||this.props.user._id===this.props.userId||this.props.usersActions.userGet(this.props.userId,this.props.user.apiToken)}},{key:"render",value:function(){var e=this,t=this.props.users.users.find((function(t){return t._id===e.props.userId}));return p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:Yn,contentLabel:"User"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),t&&p.a.createElement(Ln,{userId:this.props.userId,user:t}),!t&&this.props.user._id!==this.props.userId&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.props.user._id===this.props.userId&&p.a.createElement(Qn,null))}}]),a}(p.a.Component);var Kn=Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)($n)),Xn=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.users.requested.getted||this.props.usersActions.requestedGet(this.props.user.apiToken)}},{key:"onScroll",value:function(){}},{key:"render",value:function(){var e=this;return p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",onScroll:function(){e.onScroll()},style:{height:340},autoHide:!0},this.props.users.requested.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.props.users.requested.users.map((function(t,a){return p.a.createElement(dn,{key:a,user:t,onClick:function(t){e.props.onClick(t)}})})),!this.props.users.requested.users.length&&!this.props.users.requested.isFetching&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(ln.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.incoming_request_empty)))}}]),a}(p.a.Component);var Zn=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(Xn))),er=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.users.pending.getted||this.props.usersActions.pendingGet(this.props.user.apiToken)}},{key:"onScroll",value:function(){}},{key:"render",value:function(){var e=this;return p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",onScroll:function(){e.onScroll()},style:{height:340},autoHide:!0},this.props.users.pending.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.props.users.pending.users.map((function(t,a){return p.a.createElement(dn,{key:a,user:t,onClick:function(t){e.props.onClick(t)}})})),!this.props.users.pending.users.length&&!this.props.users.pending.isFetching&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(ln.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.outgoing_request_empty)))}}]),a}(p.a.Component);var tr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(er))),ar={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},sr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={activeTab:"friends"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:ar,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},this.props.langProps.contacts),p.a.createElement("div",{className:"contacts-tabs"},p.a.createElement("span",{className:"friends"===this.state.activeTab?"active":"",onClick:function(){e.setState({activeTab:"friends"})}},this.props.langProps.friends),p.a.createElement("span",{className:"inbox"===this.state.activeTab?"active":"",onClick:function(){e.setState({activeTab:"inbox"})}},this.props.langProps.inbox),p.a.createElement("span",{className:"outbox"===this.state.activeTab?"active":"",onClick:function(){e.setState({activeTab:"outbox"})}},this.props.langProps.outbox)),"friends"===this.state.activeTab&&p.a.createElement(gn,{onClick:function(t){e.props.history.push({search:"?user=".concat(t)})},type:"normal"}),"inbox"===this.state.activeTab&&p.a.createElement(Zn,{onClick:function(t){e.props.history.push({search:"?user=".concat(t)})}}),"outbox"===this.state.activeTab&&p.a.createElement(tr,{onClick:function(t){e.props.history.push({search:"?user=".concat(t)})}}))}}]),a}(p.a.Component);var or=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(sr))),nr={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},rr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:nr,contentLabel:"Create room"},p.a.createElement("h2",{className:"modal-title"},this.props.langProps.new_chat),p.a.createElement(gn,{onClick:function(t){e.props.history.push("/chats/".concat(t))}}))}}]),a}(p.a.Component);var ir=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user}}),(function(e){return{roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(rr))),cr={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},lr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={selectUsers:[],error:!1,errors:[]},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),fetch("".concat(et,"/api/room/invite"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({id:this.props.rooms.activeRoom._id,selectUsers:this.state.selectUsers})}).then((function(e){return e.json()})).then((function(e){var a=e.error;t.setState({selectUsers:[]}),Object(ht.b)(t.props.langProps.invited_sents,{position:ht.b.POSITION.TOP_CENTER}),a&&Object(ht.b)(t.props.langProps.you_have_invite_users,{position:ht.b.POSITION.TOP_CENTER}),t.props.close()}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:cr,contentLabel:"Create room"},p.a.createElement("h2",{className:"modal-title"},this.props.langProps.select_users),p.a.createElement("form",{style:{display:"contents"},onSubmit:function(t){e.onSubmit(t)}},p.a.createElement(gn,{onClick:function(t){e.state.selectUsers.find((function(e){return e===t}))?e.setState({selectUsers:Object(z.a)(e.state.selectUsers.filter((function(e){return e!==t})))}):e.setState({selectUsers:[t].concat(Object(z.a)(e.state.selectUsers))})},type:"select",selectUsers:this.state.selectUsers}),!this.state.selectUsers.length&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),!!this.state.selectUsers.length&&p.a.createElement("button",{className:"button-blue",type:"submit",style:{width:"max-content",marginTop:5}},this.props.langProps.invite)))}}]),a}(p.a.Component);var pr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms}}),(function(e){return{roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(lr))),ur={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",minHeight:"245px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)"}},dr=Object(It.a)((function(e){return{root:{color:"#CCD1D6","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(rn.a),mr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={title:e.props.rooms.activeRoom.title,isPrivate:e.props.rooms.activeRoom.isPrivate,error:!1,isFetching:!1,errors:[]},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[],isFetching:!0}),e.preventDefault(),fetch("".concat(et,"/api/room/edit"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({id:this.props.rooms.activeRoom._id,title:this.state.title,isPrivate:this.state.isPrivate})}).then((function(e){return e.json()})).then((function(e){e.error?t.setState({error:!0,errors:e.errors,isFetching:!1}):t.props.close()}))}},{key:"render",value:function(){var e=this;return this.state.isFetching?p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:ur,contentLabel:"Edit room"},p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}})):p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:ur,contentLabel:"Edit room"},p.a.createElement("h2",{className:"modal-title"},this.props.langProps.edit_room),p.a.createElement("form",{style:{display:"contents"},onSubmit:function(t){e.onSubmit(t)}},p.a.createElement("input",{value:this.state.title,onChange:function(t){e.setState({title:t.target.value})},className:"input-field",type:"text",style:{marginBottom:10},placeholder:this.props.langProps.title,maxLength:50}),this.state.errors.find((function(e){return"title"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"title"===e.param})).msg]),p.a.createElement(nn.a,{control:p.a.createElement(dr,{checked:this.state.isPrivate,onChange:function(){e.setState({isPrivate:!e.state.isPrivate})}}),style:{color:"#667788"},label:this.props.langProps.private_room}),this.state.title===this.props.rooms.activeRoom.title&&this.state.isPrivate===this.props.rooms.activeRoom.isPrivate&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),(this.state.title!==this.props.rooms.activeRoom.title||this.state.isPrivate!==this.props.rooms.activeRoom.isPrivate)&&p.a.createElement("button",{className:"button-blue",type:"submit",style:{width:"max-content",marginTop:5}},this.props.langProps.save)))}}]),a}(p.a.Component);var hr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms}}),(function(e){return{roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(mr))),gr={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",flexWrap:"wrap"}},fr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onSubmit",value:function(){var e=this;fetch("".concat(et,"/api/room/delete"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({id:this.props.rooms.activeRoom._id})}).then((function(){e.props.close()}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:gr,contentLabel:"Delete room"},p.a.createElement("h2",{className:"modal-title",style:{width:"100%"}},this.props.langProps.you_sure),p.a.createElement("p",null,this.props.langProps.delete_room_text),p.a.createElement("button",{className:"button-blue",onClick:function(){e.props.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),p.a.createElement("button",{className:"button-gray",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:5}},this.props.langProps.delete))}}]),a}(p.a.Component),yr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms}}))(Object(Dt.g)(fr))),br={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},Er=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:br,contentLabel:"Forward messages"},p.a.createElement("h2",{className:"modal-title"},this.props.langProps.forward),p.a.createElement(gn,{onClick:function(t){e.props.history.push("/chats/".concat(t))}}))}}]),a}(p.a.Component);var vr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,rooms:e.rooms}}),(function(e){return{roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Er))),Or=a(356),Sr=a.n(Or),_r=a(357),jr=a.n(_r),Rr=a(358),kr=a.n(Rr),Ar=Object(It.a)((function(e){return{root:{backgroundColor:"#25D441",color:"#fff",zIndex:2,width:40,height:40,boxShadow:"none!important",margin:"0 9px","&:hover":{backgroundColor:"#25D441",boxShadow:"none"}}}}))(xt.a),xr=Object(It.a)((function(e){return{root:{backgroundColor:"#FF4444",color:"#fff",zIndex:2,width:40,height:40,boxShadow:"none!important",margin:"0 9px","&:hover":{backgroundColor:"#FF4444",boxShadow:"none"}}}}))(xt.a),Tr=Object(It.a)((function(e){return{root:{backgroundColor:"#EDF0F3",color:"#008FF7",zIndex:2,margin:"0 9px!important","&:hover":{backgroundColor:"#EDF0F3"}}}}))(xt.a),Ir={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"260px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"260px",padding:"20px 0"}},Nr={overlay:{position:"fixed",width:"max-content",height:"max-content",top:70,left:"unset",right:40,zIndex:4},content:{border:"none",minWidth:"320px",height:"max-content",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"260px",padding:"20px 0",position:"unset"}},Cr={overlay:{position:"fixed",width:"100%",height:"100vh",top:0,left:0,zIndex:4},content:{border:"none",minWidth:"100%",height:"100vh",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"260px",padding:"20px 0",position:"unset",alignItems:"center",justifyItems:"center",alignContent:"center"}},Mr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.audio.srcObject=this.props.stream,"video"===this.props.media&&(this.video.srcObject=this.props.stream)}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("audio",{ref:function(t){e.audio=t},style:{display:"none"},autoPlay:!0,controls:!0}),"video"===this.props.media&&p.a.createElement("video",{className:"other-video",ref:function(t){e.video=t},autoPlay:!0,muted:!0}))}}]),a}(p.a.PureComponent),wr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={fullScreen:!1},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){"outcoming"!==e.props.call.status&&"incoming"!==e.props.call.status&&e.props.callActions.clear()},style:"active"===this.props.call.status?this.state.fullScreen?Cr:Nr:Ir,contentLabel:"Call",overlayClassName:"call-modal"},this.props.call.remoteStream&&p.a.createElement(Mr,{media:this.props.call.media,key:this.props.call.remoteStream.id+this.props.call.media,stream:this.props.call.remoteStream}),"exist"!==this.props.call.status&&p.a.createElement(p.a.Fragment,null,("outcoming"===this.props.call.status||"busy"===this.props.call.status||"canceled"===this.props.call.status)&&p.a.createElement("h2",{style:{width:"100%"},className:"modal-title"},this.props.langProps.outcoming_call),"incoming"===this.props.call.status&&p.a.createElement("h2",{style:{width:"100%"},className:"modal-title"},this.props.langProps.incoming_call),"audio"===this.props.call.media&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"busy"!==this.props.call.status&&"canceled"!==this.props.call.status&&"active"!==this.props.call.status?"pulse-avatar":""},p.a.createElement(R,{style:{width:80,height:80,fontSize:28,lineHeight:"28px",fontWeight:600,backgroundColor:"rgb(".concat(this.props.call.user.color,")"),zIndex:3},name:this.props.call.user.name.first.charAt(0)+this.props.call.user.name.last.charAt(0),avatar:!!this.props.call.user.avatar&&this.props.call.user.avatar})),p.a.createElement("p",{className:"user-profile-name"},this.props.call.user.name.first," ",this.props.call.user.name.last),p.a.createElement("p",{className:"user-profile-city"},this.props.call.user.city?this.props.call.user.city:this.props.langProps.not_indicated)),"video"===this.props.call.media&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{style:{height:this.state.fullScreen?"calc(100% - 80px)":200,width:"100%"}})),"busy"!==this.props.call.status&&"canceled"!==this.props.call.status&&p.a.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:20,marginBottom:20}},"active"===this.props.call.status&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Tr,{className:"media-option ".concat(this.props.media.micOn?"":"active"),onClick:function(){Ge()}},p.a.createElement(jo.a,{style:{color:this.props.media.micOn?"#008FF7":"#fff"}})),p.a.createElement(Tr,{className:"media-option ".concat(this.props.media.musicOn?"":"active"),onClick:function(){We()}},p.a.createElement(xo.a,{style:{color:this.props.media.musicOn?"#008FF7":"#fff"}})),p.a.createElement(Tr,{className:"media-option ".concat(this.props.media.cameraOn?"active":""),onClick:function(){$e()}},p.a.createElement(Sr.a,{style:{color:this.props.media.cameraOn?"#fff":"#008FF7"}})),p.a.createElement(Tr,{className:"media-option ".concat(this.state.fullScreen?"active":""),onClick:function(){e.setState({fullScreen:!e.state.fullScreen})}},!this.state.fullScreen&&p.a.createElement(jr.a,{style:{color:"#008FF7"}}),this.state.fullScreen&&p.a.createElement(kr.a,{style:{color:"#fff"}}))),"incoming"===this.props.call.status&&p.a.createElement(Ar,{color:"primary",size:"small","aria-label":"call",onClick:function(){e.props.callActions.accept(e.props.user.apiToken)}},p.a.createElement(qo.a,{style:{color:"#fff"}})),p.a.createElement(xr,{color:"primary",size:"small","aria-label":"call",onClick:function(){e.props.callActions.stop(e.props.call.user,e.props.user.apiToken)}},p.a.createElement(Io.a,{style:{color:"#fff"}}))),"busy"===this.props.call.status&&p.a.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:20,marginBottom:20,color:"#999999",fontSize:14}},this.props.langProps.user_busy," ",p.a.createElement("br",null),p.a.createElement("a",{style:{color:"#008FF7",cursor:"pointer"},onClick:function(){e.props.callActions.clear()}},this.props.langProps.close)),"canceled"===this.props.call.status&&p.a.createElement("div",{style:{width:"100%",textAlign:"center",marginTop:20,marginBottom:20,color:"#999999",fontSize:14}},this.props.call.user.name.first," ",this.props.langProps.cancel_your_call," ",p.a.createElement("br",null),p.a.createElement("a",{style:{color:"#008FF7",cursor:"pointer"},onClick:function(){e.props.callActions.clear()}},this.props.langProps.close))),"dont_have_payment"===this.props.call.status&&p.a.createElement(p.a.Fragment,null,this.props.callActions.clear(),p.a.createElement(Dt.a,{to:"/payment"})),"exist"===this.props.call.status&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Kt.a,{style:{color:"#FF3333",fontSize:60}}),p.a.createElement("h2",{className:"modal-title",style:{width:"100%"}},this.props.langProps.error),p.a.createElement("p",{className:"modal-text",style:{width:"100%",textAlign:"center"}},this.props.langProps.have_active_call)))}}]),a}(p.a.Component);var Fr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,call:e.call,media:e.media}}),(function(e){return{callActions:Object(L.b)(c,e)}}))(Object(Dt.g)(wr))),Dr=a(360),Lr=a.n(Dr),Pr=a(359),Br=a.n(Pr),Ur=(a(695),{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",padding:"0",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.5);",border:"none",width:"100%",height:"100vh"}}),zr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={index:e.props.index},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:Ur,contentLabel:"Slider"},p.a.createElement("div",{className:"slider-close",onClick:function(){e.props.close()}},p.a.createElement($s.a,{style:{color:"#fff",fontSize:30,opacity:.5}})),this.props.images[this.state.index-1]&&p.a.createElement("div",{className:"slider-prev",onClick:function(){e.setState({index:e.state.index-1})}},p.a.createElement(Br.a,{style:{color:"#fff",fontSize:45,opacity:.5}})),p.a.createElement("div",{className:"slider-image-container",onClick:function(){e.props.close()}},p.a.createElement("img",{className:"slider-image",src:this.props.images[this.state.index].path,alt:"Media from user"})),this.props.images[this.state.index+1]&&p.a.createElement("div",{className:"slider-next",onClick:function(){e.setState({index:e.state.index+1})}},p.a.createElement(Lr.a,{style:{color:"#fff",fontSize:45,opacity:.5}})))}}]),a}(p.a.Component),Gr=a(361),Wr=a.n(Gr),qr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={isFetching:!0,images:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.match.params.id){var t,a=this.props.history.location.pathname.substring(1,5);this.setState({isFetching:!0}),t="chat"===a?{userId:this.props.match.params.id,type:"image"}:{roomId:this.props.match.params.id,type:"image"},fetch("".concat(et,"/api/").concat("chat"===a?"dialog":"room","/get-investments"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.error||(t=t.map((function(e){return e.data})),e.setState({images:t,isFetching:!1}))}))}}},{key:"onScroll",value:function(){}},{key:"render",value:function(){var e=this;return p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll investment-images",onScroll:function(){e.onScroll()},style:{height:340},autoHide:!0},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.state.images.map((function(t,a){return p.a.createElement("div",{className:"investment-image"},p.a.createElement("img",{key:a,alt:t.name,style:{cursor:"pointer"},onClick:function(){e.props.history.push({search:"?modal=slider"}),e.props.dispatch({type:"SLIDER_SET",payload:{images:e.state.images,index:a}})},src:t.path}))})),!this.state.images.length&&!this.state.isFetching&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(Wr.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.empty_inv_images)))}}]),a}(p.a.Component),Jr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}))(Object(Dt.g)(qr))),Hr=a(362),Vr=a.n(Hr),Qr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={isFetching:!0,sounds:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.match.params.id){var t,a=this.props.history.location.pathname.substring(1,5);this.setState({isFetching:!0}),t="chat"===a?{userId:this.props.match.params.id,type:"sound"}:{roomId:this.props.match.params.id,type:"sound"},fetch("".concat(et,"/api/").concat("chat"===a?"dialog":"room","/get-investments"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.error||(t=t.map((function(e){return e.data})),e.setState({sounds:t,isFetching:!1}))}))}}},{key:"onScroll",value:function(){}},{key:"render",value:function(){var e=this;return p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll investment-images",onScroll:function(){e.onScroll()},style:{height:340},autoHide:!0},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.state.sounds.map((function(e,t){return p.a.createElement(vs,{key:t,fileName:e.name,src:e.path})})),!this.state.sounds.length&&!this.state.isFetching&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(Vr.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.empty_inv_sounds)))}}]),a}(p.a.Component),Yr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}))(Object(Dt.g)(Qr))),$r=a(363),Kr=a.n($r),Xr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={isFetching:!0,files:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.match.params.id){var t,a=this.props.history.location.pathname.substring(1,5);this.setState({isFetching:!0}),t="chat"===a?{userId:this.props.match.params.id,type:"file"}:{roomId:this.props.match.params.id,type:"file"},fetch("".concat(et,"/api/").concat("chat"===a?"dialog":"room","/get-investments"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.error||(t=t.map((function(e){return e.data})),e.setState({files:t,isFetching:!1}))}))}}},{key:"onScroll",value:function(){}},{key:"render",value:function(){var e=this;return p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll investment-images",onScroll:function(){e.onScroll()},style:{height:340,marginLeft:15},autoHide:!0},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),this.state.files.map((function(e,t){return p.a.createElement("div",{className:"message-file",style:{cursor:"pointer"},key:t,onClick:function(t){window.open(e.path,"_self")}},p.a.createElement(cs.a,{className:"file-icon",style:{color:"#008FF7"}}),p.a.createElement("div",{className:"message-file-info"},p.a.createElement("p",{className:"message-file-name"},e.name),p.a.createElement("p",{className:"message-file-size"},e.size>999?(e.size/1e3).toFixed(1)+" mb":Math.ceil(e.size)+" kb")),p.a.createElement(ps.a,{className:"download-icon",style:{color:"#008FF7"}}))})),!this.state.files.length&&!this.state.isFetching&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(Kr.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.empty_inv_files)))}}]),a}(p.a.Component),Zr=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}))(Object(Dt.g)(Xr))),ei={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},ti=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={activeTab:"images"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:ei,contentLabel:"Contacts"},p.a.createElement("h2",{className:"modal-title"},this.props.langProps.investments),p.a.createElement("div",{className:"contacts-tabs"},p.a.createElement("span",{className:"images"===this.state.activeTab?"active":"",onClick:function(){e.setState({activeTab:"images"})}},this.props.langProps.photos),p.a.createElement("span",{className:"sounds"===this.state.activeTab?"active":"",onClick:function(){e.setState({activeTab:"sounds"})}},this.props.langProps.sounds),p.a.createElement("span",{className:"files"===this.state.activeTab?"active":"",onClick:function(){e.setState({activeTab:"files"})}},this.props.langProps.files)),"images"===this.state.activeTab&&p.a.createElement(Jr,null),"sounds"===this.state.activeTab&&p.a.createElement(Yr,null),"files"===this.state.activeTab&&p.a.createElement(Zr,null))}}]),a}(p.a.Component);var ai=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(ti))),si={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},oi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:si,contentLabel:"Settings"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},this.props.langProps.settings),p.a.createElement("p",{className:"settings-item",onClick:function(){e.props.history.push({search:"?modal=profile"})}},this.props.langProps.change_profile),p.a.createElement("p",{className:"settings-item",onClick:function(){e.props.history.push({search:"?modal=language"})}},this.props.langProps.language),p.a.createElement("p",{className:"settings-item",onClick:function(){e.props.cookies.remove("apiToken",{path:"/"}),window.location.reload()}},this.props.langProps.logout))}}]),a}(p.a.Component);var ni=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(Object(Ja.a)(oi)))),ri={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},ii=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={firstName:e.props.user.name.first,lastName:e.props.user.name.last,city:e.props.user.city,error:!1,errors:[]},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[]}),e.preventDefault(),fetch("".concat(et,"/api/user/edit"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({firstName:this.state.firstName,lastName:this.state.lastName,city:this.state.city})}).then((function(e){return e.json()})).then((function(e){e.error?t.setState({error:!0,errors:e.errors}):pe.dispatch({type:"USER_EDIT",payload:{firstName:t.state.firstName,lastName:t.state.lastName,city:t.state.city}})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:ri,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},this.props.langProps.change_profile),p.a.createElement("form",{style:{display:"contents"},onSubmit:function(t){e.onSubmit(t)}},p.a.createElement("input",{value:this.state.firstName,onChange:function(t){e.setState({firstName:t.target.value})},className:"input-field",type:"text",placeholder:this.props.langProps.firstName,style:{marginTop:0}}),this.state.errors.find((function(e){return"firstName"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"firstName"===e.param})).msg]),p.a.createElement("input",{value:this.state.lastName,onChange:function(t){e.setState({lastName:t.target.value})},className:"input-field",type:"text",style:{marginBottom:0},placeholder:this.props.langProps.lastName}),this.state.errors.find((function(e){return"lastName"===e.param}))&&p.a.createElement("span",{className:"input-error-label"},this.props.langProps[this.state.errors.find((function(e){return"lastName"===e.param})).msg]),p.a.createElement("input",{value:this.state.city,onChange:function(t){e.setState({city:t.target.value})},className:"input-field",type:"text",placeholder:this.props.langProps.city}),(this.state.firstName!==this.props.user.name.first||this.state.lastName!==this.props.user.name.last||this.state.city!==this.props.user.city)&&p.a.createElement("button",{className:"button-blue",type:"submit",style:{width:"max-content",marginTop:25}},this.props.langProps.save),this.state.firstName===this.props.user.name.first&&this.state.lastName===this.props.user.name.last&&this.state.city===this.props.user.city&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.goBack()},style:{width:"max-content",marginTop:25}},this.props.langProps.back)))}}]),a}(p.a.Component);var ci=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(Object(Ja.a)(ii)))),li={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},pi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"setLang",value:function(e){pe.dispatch({type:"USER_SET_LANG",payload:e}),fetch("".concat(et,"/api/user/set-lang"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({lang:e})})}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:li,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},this.props.langProps.select_language),p.a.createElement("p",{className:"settings-item ".concat("en"===this.props.user.lang?"active":""),onClick:function(){"en"!==e.props.user.lang&&e.setLang("en")}},this.props.langProps.english),p.a.createElement("p",{className:"settings-item ".concat("ru"===this.props.user.lang?"active":""),onClick:function(){"ru"!==e.props.user.lang&&e.setLang("ru")}},this.props.langProps.russian))}}]),a}(p.a.Component);var ui=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(Object(Ja.a)(pi)))),di=a(726),mi=!1,hi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},gi=Object(It.a)((function(e){return{root:{color:"#CCD1D6",display:"flex","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(di.a),fi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Lt.a,{className:"room-item",title:"Room ".concat(this.props.room.title),onClick:function(){e.props.selectRoom(e.props.room._id)}},p.a.createElement(R,{style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.room.color,")")},name:this.props.room.title.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,this.props.room.isPrivate&&p.a.createElement(ia.a,null),p.a.createElement("span",null,this.props.room.title))),p.a.createElement(gi,{checked:this.props.selectRoomId===this.props.room._id})))}}]),a}(p.a.Component),yi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,errors:[],isFetching:!1,rooms:e.props.rooms.activeRoom?[e.props.rooms.activeRoom]:[],selectRoomId:!!e.props.rooms.activeRoom&&e.props.rooms.activeRoom._id,time:0,q:e.props.rooms.activeRoom?e.props.rooms.activeRoom.title:"",step:"room"},e}return Object(h.a)(a,[{key:"onSearch",value:function(e){var t=this,a=e.target.value;this.setState({q:a}),mi&&clearTimeout(mi),a.length&&/\S/.test(a)&&(this.setState({isFetching:!0}),mi=setTimeout((function(){fetch("".concat(et,"/api/room/search"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.props.user.apiToken)},body:JSON.stringify({q:t.state.q})}).then((function(e){return e.json()})).then((function(e){t.setState({isFetching:!1}),t.setState({rooms:e})}))}),500)),a.length||this.setState({rooms:[]})}},{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[]}),fetch("".concat(et,"/api/room/mute"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({roomId:this.state.selectRoomId,userId:this.props.userId,time:this.state.time})}).then((function(){t.props.history.push({search:"?user=".concat(t.props.userId)}),ht.b.success("Mute sent",{position:ht.b.POSITION.TOP_CENTER})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:hi,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},"Mute"),"room"===this.state.step&&p.a.createElement(p.a.Fragment,null,p.a.createElement("input",{type:"text",value:this.state.q,onChange:function(t){e.onSearch(t)},className:"friends-search-input",placeholder:this.props.langProps.search}),p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",style:{height:340},autoHide:!0},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),!!this.state.q.length&&!this.state.isFetching&&this.state.rooms.map((function(t,a){return p.a.createElement(fi,{selectRoom:function(t){e.setState({selectRoomId:t})},key:a,room:t,selectRoomId:e.state.selectRoomId})})),!this.state.q.length&&!this.state.isFetching&&!this.state.rooms.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement("p",null,"Start typing room name")),!!this.state.q.length&&!this.state.isFetching&&!this.state.rooms.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement("p",null,"Rooms not find"))),!!this.state.selectRoomId&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.setState({step:"time"})},style:{width:"max-content",marginTop:25}},this.props.langProps.next),!this.state.selectRoomId&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.goBack()},style:{width:"max-content",marginTop:25}},this.props.langProps.back)),"time"===this.state.step&&p.a.createElement(p.a.Fragment,null,tt.map((function(t,a){return p.a.createElement(Lt.a,{key:a,className:"room-item",style:{height:40},onClick:function(){e.setState({time:t.time})}},p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,p.a.createElement("span",null,t.label))),p.a.createElement(gi,{checked:e.state.time===t.time}))})),!!this.state.time&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:25}},"Mute"),!this.state.time&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.setState({step:"room"})},style:{width:"max-content",marginTop:25}},this.props.langProps.back)))}}]),a}(p.a.Component);var bi=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user,rooms:e.rooms}}),(function(e){return{usersActions:Object(L.b)(i,e),roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Object(Ja.a)(yi)))),Ei={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},vi=Object(It.a)((function(e){return{root:{color:"#CCD1D6",display:"flex","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(di.a),Oi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Lt.a,{className:"room-item",title:"Room ".concat(this.props.room.title),onClick:function(){e.props.selectRoom(e.props.room._id)}},p.a.createElement(R,{style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.room.color,")")},name:this.props.room.title.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,this.props.room.isPrivate&&p.a.createElement(ia.a,null),p.a.createElement("span",null,this.props.room.title))),p.a.createElement(vi,{checked:this.props.selectRoomId===this.props.room._id})))}}]),a}(p.a.Component),Si=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,errors:[],isFetching:!0,rooms:[],selectRoomId:!1},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(et,"/api/user/get-mute"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({userId:this.props.userId})}).then((function(e){return e.json()})).then((function(t){var a=t.map((function(e){return e.room}));e.setState({isFetching:!1,rooms:a})}))}},{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[]}),fetch("".concat(et,"/api/room/unmute"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({roomId:this.state.selectRoomId,userId:this.props.userId})}).then((function(){ht.b.success("Unmute sent",{position:ht.b.POSITION.TOP_CENTER}),t.setState({rooms:Object(z.a)(t.state.rooms.filter((function(e){return e._id!==t.state.selectRoomId}))),selectRoomId:0})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:Ei,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},"Unmute"),p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",style:{height:340},autoHide:!0},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),!this.state.isFetching&&this.state.rooms.map((function(t,a){return p.a.createElement(Oi,{selectRoom:function(t){e.setState({selectRoomId:t})},key:a,room:t,selectRoomId:e.state.selectRoomId})})),!this.state.isFetching&&!this.state.rooms.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement("p",null,"This user dont have mutes rooms"))),!!this.state.selectRoomId&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:25}},"Unmute"),!this.state.selectRoomId&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.goBack()},style:{width:"max-content",marginTop:25}},this.props.langProps.back))}}]),a}(p.a.Component);var _i=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user,rooms:e.rooms}}),(function(e){return{usersActions:Object(L.b)(i,e),roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Object(Ja.a)(Si)))),ji=!1,Ri={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},ki=Object(It.a)((function(e){return{root:{color:"#CCD1D6",display:"flex","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(di.a),Ai=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Lt.a,{className:"room-item",title:"Room ".concat(this.props.room.title),onClick:function(){e.props.selectRoom(e.props.room._id)}},p.a.createElement(R,{style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.room.color,")")},name:this.props.room.title.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,this.props.room.isPrivate&&p.a.createElement(ia.a,null),p.a.createElement("span",null,this.props.room.title))),p.a.createElement(ki,{checked:this.props.selectRoomId===this.props.room._id})))}}]),a}(p.a.Component),xi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,errors:[],isFetching:!1,rooms:e.props.rooms.activeRoom?[e.props.rooms.activeRoom]:[],selectRoomId:!!e.props.rooms.activeRoom&&e.props.rooms.activeRoom._id,time:0,q:e.props.rooms.activeRoom?e.props.rooms.activeRoom.title:"",step:"room"},e}return Object(h.a)(a,[{key:"onSearch",value:function(e){var t=this,a=e.target.value;this.setState({q:a}),ji&&clearTimeout(ji),a.length&&/\S/.test(a)&&(this.setState({isFetching:!0}),ji=setTimeout((function(){fetch("".concat(et,"/api/room/search"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.props.user.apiToken)},body:JSON.stringify({q:t.state.q})}).then((function(e){return e.json()})).then((function(e){t.setState({isFetching:!1}),t.setState({rooms:e})}))}),500)),a.length||this.setState({rooms:[]})}},{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[]}),fetch("".concat(et,"/api/room/ban"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({roomId:this.state.selectRoomId,userId:this.props.userId,time:this.state.time})}).then((function(){t.props.history.push({search:"?user=".concat(t.props.userId)}),ht.b.success("Mute sent",{position:ht.b.POSITION.TOP_CENTER})}))}},{key:"render",value:function(){var e=this;return console.log(this.state.selectRoomId),p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:Ri,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},"Ban room"),"room"===this.state.step&&p.a.createElement(p.a.Fragment,null,p.a.createElement("input",{type:"text",value:this.state.q,onChange:function(t){e.onSearch(t)},className:"friends-search-input",placeholder:this.props.langProps.search}),p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",style:{height:340},autoHide:!0},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),!!this.state.q.length&&!this.state.isFetching&&this.state.rooms.map((function(t,a){return p.a.createElement(Ai,{selectRoom:function(t){e.setState({selectRoomId:t})},key:a,room:t,selectRoomId:e.state.selectRoomId})})),!this.state.q.length&&!this.state.isFetching&&!this.state.rooms.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement("p",null,"Start typing room name")),!!this.state.q.length&&!this.state.isFetching&&!this.state.rooms.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement("p",null,"Rooms not find"))),!!this.state.selectRoomId&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.setState({step:"time"})},style:{width:"max-content",marginTop:25}},this.props.langProps.next),!this.state.selectRoomId&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.goBack()},style:{width:"max-content",marginTop:25}},this.props.langProps.back)),"time"===this.state.step&&p.a.createElement(p.a.Fragment,null,tt.map((function(t,a){return p.a.createElement(Lt.a,{key:a,className:"room-item",style:{height:40},onClick:function(){e.setState({time:t.time})}},p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,p.a.createElement("span",null,t.label))),p.a.createElement(ki,{checked:e.state.time===t.time}))})),!!this.state.time&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:25}},"Ban"),!this.state.time&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.setState({step:"room"})},style:{width:"max-content",marginTop:25}},this.props.langProps.back)))}}]),a}(p.a.Component);var Ti=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user,rooms:e.rooms}}),(function(e){return{usersActions:Object(L.b)(i,e),roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Object(Ja.a)(xi)))),Ii={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},Ni=Object(It.a)((function(e){return{root:{color:"#CCD1D6",display:"flex","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(di.a),Ci=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Lt.a,{className:"room-item",title:"Room ".concat(this.props.room.title),onClick:function(){e.props.selectRoom(e.props.room._id)}},p.a.createElement(R,{style:{minWidth:40,maxWidth:40,height:40,fontSize:14,fontWeight:600,backgroundColor:"rgb(".concat(this.props.room.color,")")},name:this.props.room.title.charAt(0)}),p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,this.props.room.isPrivate&&p.a.createElement(ia.a,null),p.a.createElement("span",null,this.props.room.title))),p.a.createElement(Ni,{checked:this.props.selectRoomId===this.props.room._id})))}}]),a}(p.a.Component),Mi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,errors:[],isFetching:!0,rooms:[],selectRoomId:!1},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(et,"/api/user/get-roomban"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({userId:this.props.userId})}).then((function(e){return e.json()})).then((function(t){var a=t.map((function(e){return e.room}));e.setState({isFetching:!1,rooms:a})}))}},{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[]}),fetch("".concat(et,"/api/room/unban"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({roomId:this.state.selectRoomId,userId:this.props.userId})}).then((function(){ht.b.success("Unban room sent",{position:ht.b.POSITION.TOP_CENTER}),t.setState({rooms:Object(z.a)(t.state.rooms.filter((function(e){return e._id!==t.state.selectRoomId}))),selectRoomId:0})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:Ii,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},"Unban room"),p.a.createElement(w.Scrollbars,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",style:{height:340},autoHide:!0},this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),!this.state.isFetching&&this.state.rooms.map((function(t,a){return p.a.createElement(Ci,{selectRoom:function(t){e.setState({selectRoomId:t})},key:a,room:t,selectRoomId:e.state.selectRoomId})})),!this.state.isFetching&&!this.state.rooms.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement("p",null,"This user dont have ban rooms"))),!!this.state.selectRoomId&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:25}},"Unban"),!this.state.selectRoomId&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.goBack()},style:{width:"max-content",marginTop:25}},this.props.langProps.back))}}]),a}(p.a.Component);var wi=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user,rooms:e.rooms}}),(function(e){return{usersActions:Object(L.b)(i,e),roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Object(Ja.a)(Mi)))),Fi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},Di=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,errors:[],isFetching:!1,warning:""},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[]}),fetch("".concat(et,"/api/user/send-warning"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({warning:this.state.warning,userId:this.props.userId})}).then((function(){t.props.history.push({search:"?user=".concat(t.props.userId)}),ht.b.success("Warning sent",{position:ht.b.POSITION.TOP_CENTER})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:Fi,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},"Send warning"),p.a.createElement("textarea",{className:"input-field",onChange:function(t){e.setState({warning:t.target.value})},value:this.state.warning}),!!this.state.warning&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:25}},"Send"),!this.state.warning&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.goBack()},style:{width:"max-content",marginTop:25}},this.props.langProps.back))}}]),a}(p.a.Component);var Li=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user,rooms:e.rooms}}),(function(e){return{usersActions:Object(L.b)(i,e),roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Object(Ja.a)(Di)))),Pi=a(364),Bi=a.n(Pi),Ui={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:999},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",textAlign:"center"}},zi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,style:Ui,contentLabel:"Warning"},p.a.createElement(Bi.a,{style:{color:"#FF3333",fontSize:60}}),p.a.createElement("h2",{className:"modal-title"},"Warning"),p.a.createElement("p",{className:"modal-text"},this.props.user.warning),p.a.createElement("button",{className:"button-blue",type:"submit",style:{width:"max-content"},onClick:function(){pe.dispatch({type:"USER_SET_WARNING",payload:!1})}},"Close"))}}]),a}(p.a.Component),Gi=Object(D.b)((function(e){return{user:e.user}}))(Object(Dt.g)(zi)),Wi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",flexWrap:"wrap"}},qi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onSubmit",value:function(){var e=this;pe.dispatch({type:"CALL_SET_FORCE",payload:{user:!1,status:!1}}),this.props.history.push("/chats/".concat(this.props.call.force.user._id)),setTimeout((function(){e.props.callActions.accept(e.props.user.apiToken)}),250)}},{key:"close",value:function(){pe.dispatch({type:"CALL_SET_FORCE",payload:{user:!1,status:!1}})}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.close()},style:Wi,contentLabel:"Delete room"},p.a.createElement("h2",{className:"modal-title",style:{width:"100%"}},this.props.langProps.you_sure),p.a.createElement("p",null,this.props.langProps.force_accept_text),p.a.createElement("button",{className:"button-blue",onClick:function(){e.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),p.a.createElement("button",{className:"button-gray",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:5}},this.props.langProps.accept))}}]),a}(p.a.Component);var Ji=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,call:e.call}}),(function(e){return{callActions:Object(L.b)(c,e)}}))(Object(Dt.g)(qi))),Hi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",flexWrap:"wrap"}},Vi=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onSubmit",value:function(){var e=this;this.props.history.push("/chats/".concat(this.props.call.force.user._id)),pe.dispatch({type:"CALL_SET_FORCE",payload:{user:!1,status:!1}}),setTimeout((function(){e.props.callActions.call(e.props.call.force.user,e.props.user.apiToken)}),250)}},{key:"close",value:function(){pe.dispatch({type:"CALL_SET_FORCE",payload:{user:!1,status:!1}})}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.close()},style:Hi,contentLabel:"Delete room"},p.a.createElement("h2",{className:"modal-title",style:{width:"100%"}},this.props.langProps.you_sure),p.a.createElement("p",null,this.props.langProps.force_place_text),p.a.createElement("button",{className:"button-blue",onClick:function(){e.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),p.a.createElement("button",{className:"button-gray",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:5}},this.props.langProps.call))}}]),a}(p.a.Component);var Qi=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,call:e.call}}),(function(e){return{callActions:Object(L.b)(c,e)}}))(Object(Dt.g)(Vi))),Yi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",flexWrap:"wrap"}},$i=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onSubmit",value:function(){var e=this;this.props.callActions.stop(this.props.call.user,this.props.user.apiToken);var t=this.props.rooms.force;pe.dispatch({type:"ROOMS_SET_FORCE",payload:!1}),setTimeout((function(){e.props.history.push("/rooms/".concat(t))}),250)}},{key:"close",value:function(){pe.dispatch({type:"ROOMS_SET_FORCE",payload:!1})}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.close()},style:Yi,contentLabel:"Delete room"},p.a.createElement("h2",{className:"modal-title",style:{width:"100%"}},this.props.langProps.you_sure),p.a.createElement("p",null,this.props.langProps.force_join_text),p.a.createElement("button",{className:"button-blue",onClick:function(){e.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),p.a.createElement("button",{className:"button-gray",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:5}},this.props.langProps.accept))}}]),a}(p.a.Component);var Ki=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,call:e.call,rooms:e.rooms}}),(function(e){return{callActions:Object(L.b)(c,e)}}))(Object(Dt.g)($i))),Xi={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},Zi=Object(It.a)((function(e){return{root:{color:"#CCD1D6",display:"flex","&$checked":{color:"#008FF7",border:"none"},"&:hover":{backgroundColor:"transparent"}},checked:{}}}))(di.a),ec=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,errors:[],isFetching:!1,time:0},e}return Object(h.a)(a,[{key:"onSubmit",value:function(e){var t=this;this.setState({error:!1,errors:[]}),fetch("".concat(et,"/api/user/ban"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({userId:this.props.userId,time:this.state.time})}).then((function(){t.props.history.push({search:"?user=".concat(t.props.userId)}),ht.b.success("Ban sent",{position:ht.b.POSITION.TOP_CENTER})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:!0,onRequestClose:function(){e.props.close()},style:Xi,contentLabel:"Contacts"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},"Ban"),tt.map((function(t,a){return p.a.createElement(Lt.a,{key:a,className:"room-item",style:{height:40},onClick:function(){e.setState({time:t.time})}},p.a.createElement("div",{style:{flexGrow:1,minWidth:0,maxWidth:"100%",paddingRight:10}},p.a.createElement("p",null,p.a.createElement("span",null,t.label))),p.a.createElement(Zi,{checked:e.state.time===t.time}))})),!!this.state.time&&p.a.createElement("button",{className:"button-blue",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:25}},"Ban"),!this.state.time&&p.a.createElement("button",{className:"button-gray",onClick:function(){e.props.history.push({search:"?user=".concat(e.props.userId)})},style:{width:"max-content",marginTop:25}},this.props.langProps.back))}}]),a}(p.a.Component);var tc=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user,rooms:e.rooms}}),(function(e){return{usersActions:Object(L.b)(i,e),roomsActions:Object(L.b)(o,e)}}))(Object(Dt.g)(Object(Ja.a)(ec)))),ac=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"bell-toast",onClick:function(){"notification"===e.props.toast.toastType&&("invite"===e.props.toast.type&&(pe.getState().rooms.activeRoom?pe.dispatch({type:"TOAST_SET_FORCE",payload:{id:e.props.toast.room._id,type:"invite"}}):e.props.history.push("/rooms/".concat(e.props.toast.room._id))),"accept"!==e.props.toast.type&&"request"!==e.props.toast.type||e.props.history.push({search:"?user=".concat(e.props.toast.user._id)})),"message"===e.props.toast.toastType&&"/chats/".concat(e.props.toast.user._id)!==e.props.history.location.pathname&&(pe.getState().rooms.activeRoom?pe.dispatch({type:"TOAST_SET_FORCE",payload:{id:e.props.toast.user._id,type:"message"}}):e.props.history.push("/chats/".concat(e.props.toast.user._id))),pe.dispatch({type:"TOASTS_REMOVE",payload:e.props.toast._id})}},p.a.createElement("span",{className:"bell-close",onClick:function(t){t.stopPropagation(),pe.dispatch({type:"TOASTS_REMOVE",payload:e.props.toast._id})}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("p",{className:"name"},this.props.toast.user.name.first," ",this.props.toast.user.name.last),"message"===this.props.toast.toastType&&p.a.createElement("p",{className:"text"},"New message!"),"notification"===this.props.toast.toastType&&p.a.createElement(p.a.Fragment,null,"invite"===this.props.toast.type&&p.a.createElement("p",{className:"text"},this.props.langProps.invited_you_to_the_room,"\xa0",p.a.createElement("span",{style:{color:"#008FF7"}},this.props.toast.room.title)),"accept"===this.props.toast.type&&p.a.createElement("p",{className:"text"},this.props.langProps.accept_your_friend_request),"request"===this.props.toast.type&&p.a.createElement("p",{className:"text"},this.props.langProps.send_you_friend_request,"\xa0",p.a.createElement("span",{style:{color:"#008FF7"}}))))}}]),a}(p.a.Component),sc=Object(b.withLang)(Bt)(Object(Dt.g)(ac)),oc=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={activeTab:"friends"},e}return Object(h.a)(a,[{key:"render",value:function(){return!!this.props.toasts.toasts.length&&p.a.createElement("div",{className:"bell-toasts"},this.props.toasts.toasts.map((function(e,t){return p.a.createElement(sc,{key:t,toast:e})})))}}]),a}(p.a.Component);var nc=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{toasts:e.toasts,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(oc))),rc={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"300px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",flexWrap:"wrap"}},ic=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onSubmit",value:function(){var e=this;pe.dispatch({type:"TOAST_SET_FORCE",payload:{id:!1,type:!1}}),"message"===this.props.toasts.force.type&&this.props.history.push("/chats/".concat(this.props.toasts.force.id)),"invite"===this.props.toasts.force.type&&(this.props.history.push("/"),setTimeout((function(){e.props.history.push("/rooms/".concat(e.props.toasts.force.id))}),100))}},{key:"close",value:function(){pe.dispatch({type:"TOAST_SET_FORCE",payload:{id:!1,type:!1}})}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.close()},style:rc,contentLabel:"Delete room"},p.a.createElement("h2",{className:"modal-title",style:{width:"100%"}},this.props.langProps.you_sure),p.a.createElement("p",null,this.props.langProps.force_toast_text),p.a.createElement("button",{className:"button-blue",onClick:function(){e.close()},style:{width:"max-content",marginTop:5}},this.props.langProps.back),p.a.createElement("button",{className:"button-gray",onClick:function(){e.onSubmit()},style:{width:"max-content",marginTop:5}},this.props.langProps.next))}}]),a}(p.a.Component);var cc=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,toasts:e.toasts}}),(function(e){return{callActions:Object(L.b)(c,e)}}))(Object(Dt.g)(ic))),lc=a(365),pc=a.n(lc),uc=a(366),dc=a.n(uc),mc=a(367),hc=a.n(mc),gc=Object(It.a)((function(e){return{root:{color:"#008FF7"}}}))(no.a),fc=Object(It.a)((function(e){return{root:{color:"#FF3333"}}}))(no.a),yc={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"320px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},bc=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"payment-item"},p.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},p.a.createElement("p",{style:{margin:0,fontSize:14,fontWeight:500}},"wait"===this.props.payment.status?this.props.langProps.booked:this.props.langProps.paid,":"),p.a.createElement("p",{style:{margin:0,fontSize:14,fontWeight:500}},zt(this.props.payment.updateAt))),p.a.createElement("div",{style:{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"}},this.props.payment.tariff.title),"wait"===this.props.payment.status&&p.a.createElement(p.a.Fragment,null,p.a.createElement(gc,{"aria-label":"upload picture",component:"span",onClick:function(){window.location.href=e.props.payment.formUrl}},p.a.createElement(pc.a,null)),p.a.createElement(fc,{"aria-label":"upload picture",component:"span",onClick:function(){e.props.delete(e.props.payment._id)}},p.a.createElement(dc.a,null))),"success"===this.props.payment.status&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"payment-status-active"},this.props.langProps.active)),"ended"===this.props.payment.status&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"payment-status-inactive"},this.props.langProps.ended)))}}]),a}(p.a.Component),Ec=Object(b.withLang)(Bt)(bc),vc=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={payments:[],isFetching:!0},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(et,"/api/payment/get-my"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)}}).then((function(e){return e.json()})).then((function(t){e.setState({isFetching:!1,payments:t.reverse()})}))}},{key:"delete",value:function(e){var t=this;this.setState({isFetching:!0,payments:Object(z.a)(this.state.payments.filter((function(t){return t._id!==e})))}),fetch("".concat(et,"/api/payment/delete-my"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({paymentId:e})}).then((function(){t.setState({isFetching:!1})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:yc,contentLabel:"Payments"},p.a.createElement("span",{className:"modal-back",onClick:function(t){e.props.history.goBack()}},p.a.createElement(Sn.a,{style:{color:"#99AABB"}})),p.a.createElement("h2",{className:"modal-title"},this.props.langProps.my_orders),p.a.createElement(F.a,{ref:function(t){e.roomsBlock=t},renderTrackVertical:function(e){return p.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return p.a.createElement("div",{className:"thumb-vertical"})},className:"scroll",style:{height:340},autoHide:!0},!this.state.isFetching&&this.state.payments.map((function(t){return p.a.createElement(Ec,{payment:t,delete:function(t){e.delete(t)}})})),this.state.isFetching&&p.a.createElement(_a.a,{style:{color:"#008FF7",position:"absolute",left:0,right:0,margin:"auto",top:"calc(50% - 20px)"}}),!this.state.isFetching&&!this.state.payments.length&&p.a.createElement("div",{className:"data-empty"},p.a.createElement(hc.a,{style:{color:"#B8C3CF",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("p",null,this.props.langProps.here_will_your_orders))))}}]),a}(p.a.Component);var Oc=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(Object(Ja.a)(vc)))),Sc=a(368),_c=a.n(Sc),jc={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:4},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",minWidth:"320px",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"0px 5px 30px rgba(0, 0, 0, 0.16)",display:"flex",justifyContent:"center",flexWrap:"wrap",width:"max-content",maxWidth:"320px",padding:"20px 0"}},Rc=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement(Eo.a,{isOpen:this.props.isOpen,onRequestClose:function(){e.props.close()},style:jc,contentLabel:"Payments"},p.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},"true"===this.props.isOpen&&p.a.createElement(p.a.Fragment,null,p.a.createElement($o.a,{style:{color:"#35E551",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("h2",{className:"modal-title",style:{marginBottom:10}},this.props.langProps.pay_success_true)),"false"===this.props.isOpen&&p.a.createElement(p.a.Fragment,null,p.a.createElement(_c.a,{style:{color:"#FF4444",fontSize:54,margin:"0 auto",display:"block"}}),p.a.createElement("h2",{className:"modal-title",style:{marginBottom:10}},this.props.langProps.pay_success_false)),p.a.createElement("button",{className:"button-blue",onClick:function(){e.props.history.push({search:"?modal=payments"})}},this.props.langProps.my_orders)))}}]),a}(p.a.Component);var kc=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{users:e.users,user:e.user}}),(function(e){return{usersActions:Object(L.b)(i,e)}}))(Object(Dt.g)(Object(Ja.a)(Rc)))),Ac=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={act:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).act,user:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).user,modal:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).modal,mute:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).mute,unmute:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).unmute,banroom:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).banroom,unbanroom:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).unbanroom,sendwarning:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).sendwarning,ban:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).ban,paySuccess:es.a.parse(e.props.location.search,{ignoreQueryPrefix:!0}).paySuccess},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.history.listen((function(t){e.setState({act:es.a.parse(t.search,{ignoreQueryPrefix:!0}).act,user:es.a.parse(t.search,{ignoreQueryPrefix:!0}).user,modal:es.a.parse(t.search,{ignoreQueryPrefix:!0}).modal,mute:es.a.parse(t.search,{ignoreQueryPrefix:!0}).mute,unmute:es.a.parse(t.search,{ignoreQueryPrefix:!0}).unmute,banroom:es.a.parse(t.search,{ignoreQueryPrefix:!0}).banroom,unbanroom:es.a.parse(t.search,{ignoreQueryPrefix:!0}).unbanroom,sendwarning:es.a.parse(t.search,{ignoreQueryPrefix:!0}).sendwarning,ban:es.a.parse(t.search,{ignoreQueryPrefix:!0}).ban,paySuccess:es.a.parse(t.search,{ignoreQueryPrefix:!0}).paySuccess})}))}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement(vn,{isOpen:"newRoom"===this.state.act,close:function(){e.props.history.push({search:""})}}),p.a.createElement(ir,{isOpen:"newChat"===this.state.act,close:function(){e.props.history.push({search:""})}}),this.state.user&&p.a.createElement(Kn,{userId:this.state.user,close:function(){e.props.history.push({search:""})}}),!!this.props.user.warning&&p.a.createElement(Gi,{isOpen:!!this.props.user.warning}),this.state.mute&&"user"!==this.props.user.role&&p.a.createElement(bi,{userId:this.state.mute,close:function(){e.props.history.push({search:""})}}),this.state.unmute&&"user"!==this.props.user.role&&p.a.createElement(_i,{userId:this.state.unmute,close:function(){e.props.history.push({search:""})}}),this.state.banroom&&"user"!==this.props.user.role&&p.a.createElement(Ti,{userId:this.state.banroom,close:function(){e.props.history.push({search:""})}}),this.state.ban&&"user"!==this.props.user.role&&p.a.createElement(tc,{userId:this.state.ban,close:function(){e.props.history.push({search:""})}}),this.state.unbanroom&&"user"!==this.props.user.role&&p.a.createElement(wi,{userId:this.state.unbanroom,close:function(){e.props.history.push({search:""})}}),this.state.sendwarning&&"user"!==this.props.user.role&&p.a.createElement(Li,{userId:this.state.sendwarning,close:function(){e.props.history.push({search:""})}}),p.a.createElement(or,{isOpen:"contacts"===this.state.modal,close:function(){e.props.history.push({search:""})}}),p.a.createElement(ni,{isOpen:"settings"===this.state.modal,close:function(){e.props.history.push({search:""})}}),"payments"===this.state.modal&&p.a.createElement(Oc,{isOpen:"payments"===this.state.modal,close:function(){e.props.history.push({search:""})}}),"profile"===this.state.modal&&p.a.createElement(ci,{isOpen:"profile"===this.state.modal,close:function(){e.props.history.push({search:""})}}),"language"===this.state.modal&&p.a.createElement(ui,{isOpen:"language"===this.state.modal,close:function(){e.props.history.push({search:""})}}),p.a.createElement(pr,{isOpen:"invite"===this.state.act&&this.props.rooms.activeRoom,close:function(){e.props.history.push({search:""})}}),"editRoom"===this.state.act&&this.props.rooms.activeRoom&&(this.props.user._id===this.props.rooms.activeRoom.ownerId||"admin"===this.props.user.role||"moder"===this.props.user.role)&&p.a.createElement(hr,{isOpen:"editRoom"===this.state.act&&this.props.rooms.activeRoom,close:function(){e.props.history.push({search:""})}}),"deleteRoom"===this.state.act&&this.props.rooms.activeRoom&&(this.props.user._id===this.props.rooms.activeRoom.ownerId||"admin"===this.props.user.role||"moder"===this.props.user.role)&&p.a.createElement(yr,{isOpen:"deleteRoom"===this.state.act&&this.props.rooms.activeRoom,close:function(){e.props.history.push({search:""})}}),p.a.createElement(vr,{isOpen:!!this.props.dialogs.forwardMessages.length,close:function(t){e.props.dispatch({type:"DIALOGS_SET_FORWARD",payload:[]})}}),!!this.state.paySuccess&&p.a.createElement(kc,{isOpen:this.state.paySuccess,close:function(){e.props.history.push({search:""})}}),"slider"===this.state.modal&&!!this.props.slider.images.length&&p.a.createElement(zr,{index:this.props.slider.index,images:this.props.slider.images,close:function(){e.props.dispatch({type:"SLIDER_SET",payload:{images:[],index:0}}),e.props.history.goBack()}}),this.props.match.params.id&&"investments"===this.state.modal&&p.a.createElement(ai,{isOpen:this.props.match.params.id&&"investments"===this.state.modal,dialogId:this.props.match.params.id,close:function(){e.props.history.push({search:""})}}),!!this.props.rooms.force&&p.a.createElement(Ki,{isOpen:!0}),this.props.call.user&&"force-accept"===this.props.call.force.status&&p.a.createElement(Ji,{isOpen:!0}),"force-call"===this.props.call.force.status&&p.a.createElement(Qi,{isOpen:!0}),!!this.props.toasts.force.id&&p.a.createElement(cc,{isOpen:!0}),this.props.call.user&&!this.props.call.force.status&&p.a.createElement(Fr,{isOpen:!0}),p.a.createElement(nc,null))}}]),a}(p.a.Component),xc=Object(D.b)((function(e){return{rooms:e.rooms,user:e.user,dialogs:e.dialogs,call:e.call,slider:e.slider,toasts:e.toasts}}))(Object(Dt.g)(Ac)),Tc=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={isRender:!1},e.PrivateRoute=function(t){var a=t.children,s=Object(qa.a)(t,["children"]);return p.a.createElement(Dt.b,Object.assign({},s,{render:function(){return e.props.user.isAuth?e.props.ban.ban?p.a.createElement(Dt.a,{to:{pathname:"/ban"}}):p.a.createElement(p.a.Fragment,null,a,p.a.createElement(xc,null)):p.a.createElement(Dt.a,{to:{pathname:"/login"}})}}))},e.AuthRoute=function(t){var a=t.children,s=Object(qa.a)(t,["children"]);return p.a.createElement(Dt.b,Object.assign({},s,{render:function(){return e.props.user.isAuth?p.a.createElement(Dt.a,{to:{pathname:"/"}}):e.props.ban.ban?p.a.createElement(Dt.a,{to:{pathname:"/ban"}}):a}}))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.history.listen((function(){de(e.props.history.location.pathname,sn)})),de(this.props.history.location.pathname,sn);var t=this.props.cookies.get("apiToken");t?fetch("".concat(et,"/api/user/me"),{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(a){var s=a.user,o=a.dialogs,n=a.noReadCount,r=a.noReadNotifications,i=a.ban,c=a.numDate,l=a.date;i?pe.dispatch({type:"BAN_SET",payload:{numDate:c,date:l}}):(mt.init(t),e.props.userActions.loginUser(s,o,n,r,t)),e.setState({isRender:!0})})).catch((function(){localStorage.setItem("drafts",JSON.stringify([])),e.setState({isRender:!0})})):(localStorage.setItem("drafts",JSON.stringify([])),this.setState({isRender:!0}))}},{key:"render",value:function(){var e=this;return this.state.isRender&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Dt.d,null,sn.map((function(t,a){switch(t.type){case"auth":return p.a.createElement(e.AuthRoute,{key:a,path:t.path,exact:t.exact},p.a.createElement(t.component,null));case"user":return p.a.createElement(e.PrivateRoute,{key:a,path:t.path,exact:t.exact},p.a.createElement(t.component,null));case"ban":return e.props.ban.ban?p.a.createElement(en,null):p.a.createElement(Dt.a,{to:{pathname:"/"}});default:return!1}})),p.a.createElement(Dt.b,{component:on})))}}]),a}(p.a.Component);var Ic=Object(D.b)((function(e){return{user:e.user,ban:e.ban}}),(function(e){return{userActions:Object(L.b)(r,e),usersActions:Object(L.b)(i,e)}}))(Object(Ja.a)(Object(Dt.g)(Tc))),Nc=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).toggleHeader=function(e){s.setState({userHeader:e})},s.state={userHeader:!1,toggleHeader:s.toggleHeader},s}return Object(h.a)(a,[{key:"render",value:function(){return p.a.createElement(y.Provider,{value:this.state},this.props.user.isAuth&&this.props.app.connecting&&p.a.createElement("div",{className:"app-status-connecting"},p.a.createElement(_a.a,{style:{color:"#fff",width:20,height:20,marginRight:10}}),p.a.createElement("span",null,this.props.langProps.connecting,"...")),p.a.createElement("div",{className:"container-fluid"},p.a.createElement("div",{className:"row"},this.props.user.isAuth&&p.a.createElement(Wa,{show:this.state.userHeader}),p.a.createElement(Ic,null),p.a.createElement(b.MultiLang,{lang:this.props.user.isAuth?this.props.user.lang:"en"}))))}}]),a}(p.a.Component),Cc=Object(b.withLang)(Bt)(Object(D.b)((function(e){return{user:e.user,app:e.app}}))(Nc));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Mc=a(724);Eo.a.setAppElement("#root"),d.a.render(p.a.createElement(Mc.a,null,p.a.createElement(D.a,{store:pe},p.a.createElement(Ft.a,null,p.a.createElement(Cc,null),p.a.createElement(ht.a,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[376,1,2]]]);
//# sourceMappingURL=main.d8b63b51.chunk.js.map