{"version":3,"sources":["Pages/PageSettings.js","Partials/User/Avatar.js","Redux/reducers/user.js","Redux/constants.js","Redux/reducers/rooms.js","Redux/reducers/media.js","Redux/reducers/dialogs.js","Redux/reducers/users.js","Redux/reducers/notifications.js","Redux/reducers/call.js","Redux/reducers/slider.js","Redux/reducers/index.js","Redux/store.js","Controllers/FunctionsController.js","Controllers/WebRtcController.js","config.js","Controllers/SocketController.js","Redux/actions/dialogs.js","languages.js","Controllers/TimeController.js","Partials/ActionMenu.js","Partials/Dialog/DialogItem.js","Sidebar/Messages.js","Partials/Loading.js","Partials/Room/RoomItem.js","Redux/actions/rooms.js","Sidebar/Rooms.js","Redux/actions/notifications.js","Partials/Notifications/NotificationItem.js","Sidebar/Notifications.js","Redux/actions/user.js","Partials/Language/LanguageItem.js","Sidebar/Languages.js","Partials/UserSidebar.js","Pages/Auth/Login.js","Pages/Auth/Register.js","Partials/Chat/Audio.js","Redux/actions/users.js","Partials/Chat/Message.js","Partials/Chat/Dialog.js","Partials/Chat/Attachment.js","Partials/Chat/InputMessage.js","Partials/Chat/ToolbarMessage.js","Partials/Chat/Chat.js","Modals/RoomJoinError.js","Pages/User/Room.js","Pages/User/Main.js","Redux/actions/call.js","Pages/User/Dialog.js","Router/config.js","Pages/NoMatch.js","Partials/User/UserItem.js","Modals/contactsPartials/Friends.js","Modals/CreateRoom.js","Modals/userPartials/otherUser.js","Modals/userPartials/myUser.js","Modals/User.js","Modals/contactsPartials/Inbox.js","Modals/contactsPartials/Outbox.js","Modals/Contacts.js","Modals/CreateDialog.js","Modals/Invite.js","Modals/EditRoom.js","Modals/DeleteRoom.js","Modals/Forward.js","Modals/Call.js","Partials/Chat/Slider.js","Modals/investmentsPartials/Images.js","Modals/investmentsPartials/Sounds.js","Modals/investmentsPartials/Files.js","Modals/Investments.js","Modals/Settings.js","Modals/Profile.js","Modals/Language.js","Modals/Mute.js","Modals/Unmute.js","Modals/MainModal.js","Router/index.js","App.js","serviceWorker.js","index.js"],"names":["PageSettings","React","createContext","Avatar","className","style","this","props","avatar","alt","name","src","min","avatarStyle","toUpperCase","online","status","color","fontSize","Component","INITIAL_STATE","isAuth","user","state","action","type","payload","roomLang","first","firstName","last","lastName","city","lang","isFetching","getted","activeRoom","isError","rooms","canLoad","length","map","room","_id","title","isPrivate","filter","typers","isLoading","remoteStream","muted","error","users","roomId","userId","dialog","messages","message","_newId","isEdit","find","x","isRead","speaking","micOn","musicOn","cameraOn","media","dialogs","forwardMessages","noReadCount","dialogId","lastMessage","noRead","sort","a","b","Date","createdAt","onlineAt","editLast","messageIds","typing","activeUserId","friends","requested","pending","friendStatus","notifications","notification","call","images","index","combineReducers","slider","createStore","rootReducer","applyMiddleware","ReduxThunk","randomInteger","max","rand","Math","random","floor","setTitle","path","routeArray","pageTitle","i","document","setForceTitle","WebRtcPeerConnection","activeRoomId","activeCallId","localStream","speechEvents","isIE","documentMode","isEdge","window","StyleMedia","RTCPC","RTCPeerConnection","mozRTCPeerConnection","webkitRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","mediaConstraintsCall","offerToReceiveAudio","offerToReceiveVideo","mediaConstraintsRoom","optionsRoom","urls","credential","username","optionsCall","createEmptyStream","callback","AudioContext","webkitAudioContext","createMediaStreamDestination","stream","getMedia","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","then","catch","err","video","audio","onRoomIceCandidate","e","candidate","SocketController","sendRoomIceCandidate","onCallOffer","offer","console","log","sendCallOfferSdp","offerSdp","onCallIceCandidate","sendCallIceCandidate","getAudioTracks","enabled","store","dispatch","getTracks","track","addTrack","onicecandidate","createOffer","setLocalDescription","sendRoomOfferSdp","sdp","onRoomOffer","close","leaveRoom","forEach","stop","wait","setInterval","clearInterval","addIceCandidate","sdpAnswer","answer","setRemoteDescription","MediaStream","getReceivers","sender","hark","on","sendRoomSpeaking","sendRoomStopSpeaking","create","getVideoTracks","toggleCameraCall","createAnswer","sendCallAnswerSdp","answerSdp","urlApi","timeStamps","time","label","socket","activeLang","unmuteTimer","init","apiToken","io","transports","emit","fetch","method","headers","Accept","Authorization","response","json","have","body","JSON","stringify","userFrom","getState","setTimeout","WebRtcController","otherId","id","read","clearTimeout","numDate","date","getSocketId","joinLang","createRoom","joinRoom","sendMessageRoom","typingRoom","typingDialog","dialogsGet","existDialog","dialogsLoad","lastDialogId","firstDialogId","dialogGet","isNotFound","reverse","dialogLoad","updateOnline","setForward","sendMessage","formData","FormData","files","sounds","append","file","push","localMessage","text","recentMessages","now","m","socketId","messageRes","errors","msg","toast","position","POSITION","TOP_CENTER","editMessage","oldImages","oldFiles","oldSounds","readMessages","retrySendMessage","deleteMessage","deleteMessages","y","pop","deleteLocalMessage","loadMessages","lastMessageId","ru","settings","change_profile","language","logout","back","save","next","last_name_not_empty","first_name_not_empty","title_not_empty","create_room","something_goes_wrong","chats","contacts","inbox","outbox","you_dont_have_friends","search","accept","decline","not_indicated","plus_friend","remove","english","russian","you","write_message","show_investments","you_sure","delete","delete_room","invite_friends","edit_room","investments","photos","missed_call","outcoming_call","incoming_call","canceled_call","select_language","users_not_found","user_not_found","reply","forward","new_room","invite","private_room","start","select_users","new_chat","invited_you_to_the_room","accept_your_friend_request","send_you_friend_request","january","february","march","april","may","june","july","august","september","october","november","december","jan","feb","mar","apr","jun","jul","aug","sep","oct","nov","dec","in","yerstaday","today","just_now","here_wiil_placed_your_notifications","create_your_first_room","you_dont_have_chats","write_your_first_message","attachment_messages","en","getHM","hours","getHours","minutes","getMinutes","toString","LastMessageDate","timeR","day_diff","getDate","year_diff","getFullYear","year","month","getMonth","day","arr","languages","OnlineDate","diff","getTime","getDay","month_diff","isNaN","ceil","ActionMenu","active","left","top","element","getElementById","from","stopPropagation","rect","getBoundingClientRect","bottom","clientHeight","right","clientWidth","setState","event","addEventListener","toggleActive","bind","removeEventListener","transform","actions","Button","key","onClick","DialogItem","randomId","textDecoration","history","location","pathname","preventDefault","to","minWidth","maxWidth","height","fontWeight","backgroundColor","charAt","flexGrow","paddingRight","myUser","langProps","transitionName","transitionEnterTimeout","transitionLeaveTimeout","marginTop","dialogsActions","withLang","connect","bindActionCreators","withRouter","CustomFab","withStyles","theme","root","Fab","Messages","showBtnAdd","scrollTop","context","toggleHeader","messagesBlock","getScrollTop","getScrollHeight","getClientHeight","nextProps","nextState","overflow","ref","renderTrackVertical","renderThumbVertical","onScroll","autoHide","Skeleton","variant","width","marginLeft","flex","margin","display","Tooltip","placement","size","aria-label","contextType","RoomItem","roomsGet","roomsAdd","roomsLoad","lastRoomId","firstRoomId","param","Rooms","isOpenCreateRoom","roomsActions","roomsBlock","CircularProgress","notificationsGet","notificationRead","NotificationItem","notificationsActions","background","Notifications","loginUser","noReadNotifications","logoutUser","updateRoomLang","uploadAvatar","target","URL","webkitURL","createObjectURL","Blob","split","res","original","Languages","userActions","LanguageItem","UserSidebar","activeTab","substring","show","Login","email","password","data","cookies","set","token","onSubmit","value","onChange","placeholder","withCookies","Register","audioDurationInterval","Audio","duration","thisAudio","getElementsByName","volume","onpause","parentElement","onplay","onloadedmetadata","getDuration","padZero","v","t","parseInt","stopTimer","pause","otherAudio","getElementsByClassName","play","startTimer","nativeEvent","layerX","rangeBlock","currentTime","thisRange","playAudio","stopAudio","fileName","onMouseMove","viewDurationAudio","onMouseEnter","onMouseLeave","changeDurationAudio","range","userGet","friendsGet","recipient","requestedGet","pendingGet","setUsers","setFriends","setActiveUserId","sendRequest","acceptRequest","removeRequest","componentDecorator","href","rel","Message","isHistoryDate","moreHour","date1","date2","abs","isFirst","timeAt","selected","unSelect","onSelect","isRecent","cursor","padding","lineHeight","canSelect","replace","marginRight","countRecent","image","isBlur","draggable","sound","open","toFixed","openSlider","sliderImages","PureComponent","usersActions","waitActiveUser","zIndex","Dialog","showFabToBottom","activePage","view","scroll","behavior","blurPage","focusPage","unRead","prevProps","scrollToBottom","viewTypers","userName","loading","Attachment","unSelectRecentMessages","removeImage","removeSound","removeFile","PlaceHolder","InputMessage","inputMessageHeight","items","clipboardData","originalEvent","kind","getAsFile","addFile","test","attachedRecentMessages","cancelEditMessage","isShow","IconButton","component","multiple","onPaste","onKeyDown","keyCode","setLastEditMessage","shiftKey","sendEditMessage","maxHeight","onInput","inputMessage","scrollHeight","node","setProperty","handleHeight","onResize","ToolbarMessage","addAttachmentRecentMessage","addAttachmentForwardMessage","setEditMessage","cancelAttachmentRecentMessage","waitFastRead","Chat","canTyping","drag","dropRef","createRef","dragCounter","handleDrag","handleDragIn","dataTransfer","handleDragOut","handleDrop","handleDropFiles","clearData","div","current","drafts","parse","localStorage","getItem","setText","setItem","lastMyMessage","slice","paste","counter","newText","prevText","customStylesModal","overlay","content","borderRadius","boxShadow","textAlign","RoomJoinError","isOpen","contentLabel","CustomFab2","Members","srcObject","autoPlay","controls","Room","waitSocket","match","params","ownerId","toLocaleString","Main","order","clear","CallFab","innerWidth","callActions","routes","exact","NoMatch","CustomCheckbox","border","checked","Checkbox","UserItem","flexWrap","waitSearch","Contacts","q","searchResult","onSearch","selectUsers","customStylesModalCreate","customStylesModalInvite","justifyContent","CreateRoom","step","onRequestClose","marginBottom","maxLength","FormControlLabel","control","Friends","transition","OtherUser","role","MyUser","minHeight","User","Inbox","Outbox","CreateDialog","DeleteRoom","RejectFab","customStylesModalActive","customStylesModalActiveFullScreen","alignItems","justifyItems","alignContent","fullScreen","overlayClassName","Slider","opacity","Images","Sounds","Files","Settings","reload","goBack","setLang","CustomRadio","Radio","selectRoom","selectRoomId","success","limits","MainModal","act","qs","ignoreQueryPrefix","modal","mute","unmute","listen","Mute","Unmute","Profile","Invite","EditRoom","Forward","Investments","AppRouter","isRender","PrivateRoute","children","rest","render","AuthRoute","get","route","App","userHeader","Provider","Boolean","hostname","Modal","setAppElement","ReactDOM","CookiesProvider","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fa5b4308.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nexport const PageSettings = React.createContext();","import React from 'react'\r\nimport GroupAddIcon from '@material-ui/icons/GroupAdd';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nclass Avatar extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"user-avatar\" style={this.props.style}>\r\n                {this.props.avatar && <img alt={this.props.name} src={this.props.avatar.min} style={this.props.avatarStyle} className=\"user-avatar-image\" />}\r\n                <span>{this.props.name.toUpperCase()}</span>\r\n                {this.props.online && <span className=\"online-status\"></span>}\r\n\r\n                {this.props.status && <>\r\n                    {this.props.status === 'accept' && <span className=\"notification-status\"><PersonAddIcon style={{color: '#fff', fontSize: 14}} /></span>}\r\n                    {this.props.status === 'invite' && <span className=\"notification-status\"><GroupAddIcon style={{color: '#fff', fontSize: 14}} /></span>}\r\n                    {this.props.status === 'request' && <span className=\"notification-status\"><AddIcon style={{color: '#fff', fontSize: 14}} /></span>}\r\n                </>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Avatar","import { \r\n    USER_LOGIN,\r\n    USER_LOGOUT,\r\n    USER_UPDATE_ROOM_LANG,\r\n    USER_SET_AVATAR,\r\n    USER_EDIT,\r\n    USER_SET_LANG\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    isAuth: false\r\n}\r\n\r\nconst user = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case USER_LOGIN: {\r\n            return { ...state, ...action.payload, isAuth: true }\r\n        }\r\n        case USER_LOGOUT:\r\n            return { isAuth: false }\r\n        case USER_UPDATE_ROOM_LANG:\r\n            return { ...state, roomLang: action.payload }\r\n        case USER_SET_AVATAR:\r\n            return { ...state, avatar: action.payload }\r\n        case USER_EDIT:\r\n            return { ...state, name: {first: action.payload.firstName, last: action.payload.lastName}, city: action.payload.city }\r\n        case USER_SET_LANG:\r\n            return { ...state, lang: action.payload }\r\n        default: \r\n            return state\r\n    }\r\n}\r\n\r\nexport default user","// User\r\nexport const USER_LOGIN = 'USER_LOGIN'\r\nexport const USER_LOGOUT = 'USER_LOGOUT'\r\nexport const USER_UPDATE_ROOM_LANG = 'USER_UPDATE_ROOM_LANG'\r\nexport const USER_SET_AVATAR = 'USER_SET_AVATAR'\r\nexport const USER_EDIT = 'USER_EDIT'\r\nexport const USER_SET_LANG = 'USER_SET_LANG'\r\n\r\n// Rooms\r\nexport const ROOMS_GET = 'ROOMS_GET'\r\nexport const ROOMS_ADD = 'ROOMS_ADD'\r\nexport const ROOMS_DELETE = 'ROOMS_DELETE'\r\nexport const ROOMS_EDIT = 'ROOMS_EDIT'   \r\nexport const ROOMS_JOIN_ROOM = 'ROOMS_JOIN_ROOM'   \r\nexport const ROOMS_LEAVE_ROOM = 'ROOMS_LEAVE_ROOM'        \r\nexport const ROOMS_USER_JOIN_ROOM = 'ROOMS_USER_JOIN_ROOM' \r\nexport const ROOMS_USER_LEAVE_ROOM = 'ROOMS_USER_LEAVE_ROOM'\r\nexport const ROOMS_ADD_MESSAGE = 'ROOMS_ADD_MESSAGE'\r\nexport const ROOMS_SUCCESS_MESSAGE = 'ROOMS_SUCCESS_MESSAGE'\r\nexport const ROOMS_ERROR_MESSAGE = 'ROOMS_ERROR_MESSAGE'\r\nexport const ROOMS_EDIT_MESSAGE = 'ROOMS_EDIT_MESSAGE'\r\nexport const ROOMS_READ_MESSAGE = 'ROOMS_READ_MESSAGE'\r\nexport const ROOMS_JOIN_ERROR = 'ROOMS_JOIN_ERROR'\r\nexport const ROOMS_DELETE_MESSAGE = 'ROOMS_DELETE_MESSAGE'\r\nexport const ROOMS_READ_MESSAGES = 'ROOMS_READ_MESSAGES'\r\nexport const ROOMS_ADD_TYPER = 'ROOMS_ADD_TYPER'\r\nexport const ROOMS_REMOVE_TYPER = 'ROOMS_REMOVE_TYPER'\r\nexport const ROOMS_LOAD_MESSAGES = 'ROOMS_LOAD_MESSAGES'\r\nexport const ROOMS_SET_LOADING = 'ROOMS_SET_LOADING'\r\nexport const ROOMS_SET_REMOTE_STREAM = 'ROOMS_SET_REMOTE_STREAM'\r\nexport const ROOMS_SET_SPEAKING_STATUS = 'ROOMS_SET_SPEAKING_STATUS'\r\nexport const ROOMS_USER_JOIN_IN_ROOM = 'ROOMS_USER_JOIN_IN_ROOM'\r\nexport const ROOMS_USER_LEAVE_IN_ROOM = 'ROOMS_USER_LEAVE_IN_ROOM'\r\nexport const ROOMS_GET_ERROR = 'ROOMS_GET_ERROR'\r\nexport const ROOMS_SET_GET = 'ROOMS_SET_GET' \r\nexport const ROOMS_EDIT_ROOM = 'ROOMS_EDIT_ROOM'\r\nexport const ROOMS_EDIT_IN_ROOM = 'ROOMS_EDIT_IN_ROOM'\r\nexport const ROOMS_DELETE_ROOM = 'ROOMS_DELETE_ROOM'\r\nexport const ROOMS_PRELOAD = 'ROOMS_PRELOAD'\r\nexport const ROOMS_SET_MUTED = 'ROOMS_SET_MUTED'\r\n\r\n// Dialogs\r\nexport const DIALOGS_GET = 'DIALOGS_GET'\r\nexport const DIALOGS_ADD = 'DIALOGS_ADD'\r\nexport const DIALOGS_ADD_MESSAGE = 'DIALOGS_ADD_MESSAGE'\r\nexport const DIALOGS_SUCCESS_MESSAGE = 'DIALOGS_SUCCESS_MESSAGE'\r\nexport const DIALOGS_ERROR_MESSAGE = 'DIALOGS_ERROR_MESSAGE'\r\nexport const DIALOGS_READ_MESSAGES = 'DIALOGS_READ_MESSAGES'\r\nexport const DIALOGS_LOAD = 'DIALOGS_LOAD'\r\nexport const DIALOGS_SET_TYPER = 'DIALOGS_SET_TYPER'\r\nexport const DIALOGS_EDIT_MESSAGE = 'DIALOGS_EDIT_MESSAGE'\r\nexport const DIALOGS_DELETE_MESSAGE = 'DIALOGS_DELETE_MESSAGE'\r\nexport const DIALOGS_SET_LOADING = 'DIALOGS_SET_LOADING'\r\nexport const DIALOGS_LOAD_MESSAGES = 'DIALOGS_LOAD_MESSAGES'\r\nexport const DIALOGS_UPDATE_ONLINE = 'DIALOGS_UPDATE_ONLINE'\r\nexport const DIALOGS_SET_FORWARD = 'DIALOGS_SET_FORWARD'\r\nexport const DIALOGS_PRELOAD = 'DIALOGS_PRELOAD'\r\n\r\n// Users\r\nexport const USERS_GET = 'USERS_GET'\r\nexport const USERS_ADD = 'USERS_ADD'\r\nexport const USERS_SET_ACTIVE_USER_ID = 'USERS_SET_ACTIVE_USER_ID'\r\nexport const USERS_SET_FRIEND_STATUS = 'USERS_SET_FRIEND_STATUS'\r\nexport const USERS_SET = 'USERS_SET'\r\nexport const USERS_FRIENDS_GET = 'USERS_FRIENDS_GET'\r\nexport const USERS_REQUESTED_GET = 'USERS_REQUESTED_GET'\r\nexport const USERS_PENDING_GET = 'USERS_PENDING_GET'\r\nexport const USERS_FRIENDS_REMOVE = 'USERS_FRIENDS_REMOVE'\r\nexport const USERS_REQUESTED_REMOVE = 'USERS_REQUESTED_REMOVE'\r\nexport const USERS_PENDING_REMOVE = 'USERS_PENDING_REMOVE'\r\nexport const USERS_FRIENDS_ADD = 'USERS_FRIENDS_ADD'\r\nexport const USERS_REQUESTED_ADD = 'USERS_REQUESTED_ADD'\r\nexport const USERS_PENDING_ADD = 'USERS_PENDING_ADD'\r\n\r\n// Notifications\r\nexport const NOTIFICATIONS_GET = 'NOTIFICATIONS_GET'\r\nexport const NOTIFICATIONS_ADD = 'NOTIFICATIONS_ADD'\r\nexport const NOTIFICATIONS_READ = 'NOTIFICATIONS_READ'\r\nexport const NOTIFICATIONS_SET_NO_READ = 'NOTIFICATIONS_SET_NO_READ'\r\nexport const NOTIFICATIONS_REMOVE = 'NOTIFICATIONS_REMOVE'\r\n\r\n// Media\r\nexport const MEDIA_TOGGLE_MICROPHONE = 'MEDIA_TOGGLE_MICROPHONE'\r\nexport const MEDIA_TOGGLE_MUSIC = 'MEDIA_TOGGLE_MUSIC'\r\nexport const MEDIA_TOGGLE_CAMERA = 'MEDIA_TOGGLE_CAMERA'\r\n\r\n// Call\r\nexport const CALL_SET_USER = 'CALL_SET_USER'\r\nexport const CALL_SET_STATUS = 'CALL_SET_STATUS'\r\nexport const CALL_SET_REMOTE_STREAM = 'CALL_SET_REMOTE_STREAM'\r\nexport const CALL_SET_MEDIA = 'CALL_SET_MEDIA'\r\n\r\n// Slider\r\nexport const SLIDER_SET = 'SLIDER_SET'","import { \r\n    ROOMS_GET,\r\n    ROOMS_ADD,\r\n    ROOMS_JOIN_ROOM,\r\n    ROOMS_LEAVE_ROOM,\r\n    ROOMS_USER_JOIN_ROOM,\r\n    ROOMS_USER_LEAVE_ROOM,\r\n    ROOMS_ADD_MESSAGE,\r\n    ROOMS_SUCCESS_MESSAGE,\r\n    ROOMS_ERROR_MESSAGE,\r\n    ROOMS_EDIT_MESSAGE,\r\n    ROOMS_READ_MESSAGE,\r\n    ROOMS_JOIN_ERROR,\r\n    ROOMS_DELETE_MESSAGE,\r\n    ROOMS_READ_MESSAGES,\r\n    ROOMS_ADD_TYPER,\r\n    ROOMS_REMOVE_TYPER,\r\n    ROOMS_LOAD_MESSAGES,\r\n    ROOMS_SET_LOADING,\r\n    ROOMS_SET_REMOTE_STREAM,\r\n    ROOMS_SET_SPEAKING_STATUS,\r\n    ROOMS_USER_LEAVE_IN_ROOM,\r\n    ROOMS_USER_JOIN_IN_ROOM,\r\n    ROOMS_SET_GET,\r\n    ROOMS_GET_ERROR,\r\n    ROOMS_EDIT_ROOM,\r\n    ROOMS_EDIT_IN_ROOM,\r\n    ROOMS_DELETE_ROOM,\r\n    ROOMS_PRELOAD,\r\n    ROOMS_SET_MUTED\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    isFetching: true,\r\n    getted: false,\r\n    activeRoom: false,\r\n    isError: false,\r\n    rooms: [],\r\n    canLoad: false\r\n}\r\n\r\nconst rooms = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case ROOMS_GET: {\r\n            return { ...state, rooms: action.payload, isFetching: false, getted: true, canLoad: action.payload.length === 20 }\r\n        }\r\n        case ROOMS_PRELOAD:\r\n            return { ...state, rooms: [ ...state.rooms, ...action.payload ], canLoad: action.payload.length === 20 }\r\n        case ROOMS_SET_GET: {\r\n            return { ...state, isFetching: true, getted: false, isError: false }\r\n        }\r\n        case ROOMS_GET_ERROR: {\r\n            return { ...state, isFetching: false, getted: true, isError: true }\r\n        }\r\n        case ROOMS_ADD:\r\n            return { ...state, rooms: [ action.payload, ...state.rooms ]  }\r\n        case ROOMS_EDIT_ROOM:\r\n            return { ...state, rooms: state.rooms.map(room => \r\n                action.payload._id === room._id ? { ...room, title: action.payload.title, isPrivate: action.payload.isPrivate} : room\r\n            ) }\r\n        case ROOMS_DELETE_ROOM:\r\n            return { ...state, rooms: [...state.rooms.filter(room => room._id !== action.payload)] }\r\n        case ROOMS_JOIN_ROOM:\r\n            return { ...state, activeRoom: {...action.payload.room, typers: [], canLoad: action.payload.canLoad, isLoading: false, remoteStream: false, muted: action.payload.muted} }\r\n        case ROOMS_SET_MUTED:\r\n            return { ...state, activeRoom: {...state.activeRoom, muted: action.payload} }\r\n        case ROOMS_JOIN_ERROR:\r\n            return { ...state, activeRoom: { error: action.payload } }\r\n        case ROOMS_USER_LEAVE_IN_ROOM:\r\n            return { ...state, activeRoom: { ...state.activeRoom, users: [\r\n                ...state.activeRoom.users.filter(user => {                        \r\n                    return user._id !== action.payload\r\n                })\r\n            ] } }\r\n        case ROOMS_USER_JOIN_IN_ROOM:\r\n            return { ...state, activeRoom: { ...state.activeRoom, users: [ ...state.activeRoom.users, action.payload ] } }\r\n        case ROOMS_EDIT_IN_ROOM:\r\n            return { ...state, activeRoom: { ...state.activeRoom, title: action.payload.title, isPrivate: action.payload.isPrivate } }\r\n        case ROOMS_LEAVE_ROOM:\r\n            return { ...state, activeRoom: false }\r\n        case ROOMS_USER_JOIN_ROOM:\r\n            return { ...state, rooms: state.rooms.map(room => \r\n                action.payload.roomId === room._id ? \r\n                { ...room, users: [ action.payload.user, ...room.users ] } :\r\n                room\r\n            ) }\r\n        case ROOMS_USER_LEAVE_ROOM:\r\n            return { ...state, rooms: state.rooms.map(room => \r\n                action.payload.roomId === room._id ? \r\n                { ...room, users: [\r\n                        ...room.users.filter(user => {                        \r\n                            return user._id !== action.payload.userId\r\n                        })\r\n                    ]\r\n                } :\r\n                room\r\n            ) }\r\n        case ROOMS_ADD_MESSAGE: \r\n            return { ...state, activeRoom: { ...state.activeRoom, dialog: { ...state.activeRoom.dialog, messages: [ ...state.activeRoom.dialog.messages, action.payload ] } } }\r\n        case ROOMS_SUCCESS_MESSAGE: \r\n            return { ...state, activeRoom: { ...state.activeRoom, dialog: { ...state.activeRoom.dialog, messages: state.activeRoom.dialog.messages.map(message => \r\n                action.payload._id === message._id ? \r\n                { ...message, isLoading: false, _id: action.payload._newId } :\r\n                message\r\n            ) } } }\r\n        case ROOMS_ERROR_MESSAGE: \r\n            return { ...state, activeRoom: { ...state.activeRoom, dialog: { ...state.activeRoom.dialog, messages: state.activeRoom.dialog.messages.map(message => \r\n                action.payload === message._id ? \r\n                { ...message, isLoading: false, isError: true } :\r\n                message\r\n            ) } } }\r\n        case ROOMS_EDIT_MESSAGE: \r\n            return { ...state, activeRoom: { ...state.activeRoom, dialog: { ...state.activeRoom.dialog, messages: state.activeRoom.dialog.messages.map(message => \r\n                action.payload._id === message._id ? \r\n                { ...message, ...action.payload, isEdit: true } :\r\n                message\r\n            ) } } }\r\n        case ROOMS_DELETE_MESSAGE:\r\n            return { ...state, activeRoom: { ...state.activeRoom, dialog: { ...state.activeRoom.dialog, messages: [\r\n                ...state.activeRoom.dialog.messages.filter(message => {        \r\n                    return !action.payload.find(x => x === message._id)\r\n                })\r\n            ]\r\n            } } }\r\n        case ROOMS_READ_MESSAGE:\r\n            return { ...state, activeRoom: { ...state.activeRoom, dialog: { ...state.activeRoom.dialog, messages: state.activeRoom.dialog.messages.map(message => \r\n                !message.isRead && message.user._id === action.payload ? \r\n                { ...message, isRead: true } :\r\n                message\r\n            ) } } }\r\n        case ROOMS_READ_MESSAGES:\r\n            return { ...state, activeRoom: { ...state.activeRoom, dialog: { ...state.activeRoom.dialog, messages: state.activeRoom.dialog.messages.map(message => \r\n                !message.isRead && message.user._id !== action.payload ? \r\n                { ...message, isRead: true } :\r\n                message\r\n            ) } } }\r\n        case ROOMS_SET_REMOTE_STREAM:\r\n            return { ...state, activeRoom: { ...state.activeRoom, remoteStream: action.payload } }\r\n        case ROOMS_SET_LOADING:\r\n            return { ...state, activeRoom: { ...state.activeRoom, canLoad: false, isLoading: true } }\r\n        case ROOMS_LOAD_MESSAGES:\r\n            return { ...state, activeRoom: { ...state.activeRoom, isLoading: false, canLoad: action.payload.canLoad, dialog: { ...state.activeRoom.dialog, messages: [...action.payload.messages, ...state.activeRoom.dialog.messages] } } }\r\n        case ROOMS_ADD_TYPER: \r\n            return { ...state, activeRoom: { ...state.activeRoom, typers: [ action.payload, ...state.activeRoom.typers ] } }\r\n        case ROOMS_REMOVE_TYPER: \r\n            return { ...state, activeRoom: { ...state.activeRoom, typers: [ ...state.activeRoom.typers.filter(user => {        \r\n                return user._id !== action.payload\r\n            }) ] } }\r\n        case ROOMS_SET_SPEAKING_STATUS: \r\n            return { ...state, activeRoom: { ...state.activeRoom, users: state.activeRoom.users.map(user => \r\n                user._id === action.payload.userId ?\r\n                { ...user, speaking: action.payload.speaking } :\r\n                user\r\n            ) } }\r\n        default: \r\n            return state\r\n    }\r\n}\r\n\r\nexport default rooms","import { \r\n    MEDIA_TOGGLE_MICROPHONE,\r\n    MEDIA_TOGGLE_MUSIC,\r\n    MEDIA_TOGGLE_CAMERA\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    micOn: false,\r\n    musicOn: true,\r\n    cameraOn: false,\r\n}\r\n\r\nconst media = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case MEDIA_TOGGLE_MICROPHONE: {\r\n            return { ...state, micOn: action.payload }\r\n        }\r\n        case MEDIA_TOGGLE_MUSIC: {\r\n            return { ...state, musicOn: action.payload }\r\n        }\r\n        case MEDIA_TOGGLE_CAMERA: {\r\n            return { ...state, cameraOn: action.payload }\r\n        }\r\n        default:    \r\n            return state\r\n    }\r\n}\r\n\r\nexport default media","import { \r\n    DIALOGS_ADD,\r\n    DIALOGS_GET,\r\n    DIALOGS_ADD_MESSAGE,\r\n    DIALOGS_SUCCESS_MESSAGE,\r\n    DIALOGS_ERROR_MESSAGE,\r\n    DIALOGS_READ_MESSAGES,\r\n    DIALOGS_LOAD,\r\n    DIALOGS_SET_TYPER,\r\n    DIALOGS_EDIT_MESSAGE,\r\n    DIALOGS_DELETE_MESSAGE,\r\n    DIALOGS_SET_LOADING,\r\n    DIALOGS_LOAD_MESSAGES,\r\n    DIALOGS_UPDATE_ONLINE,\r\n    DIALOGS_SET_FORWARD,\r\n    DIALOGS_PRELOAD\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    isFetching: true,\r\n    dialogs: [],\r\n    forwardMessages: [],\r\n    canLoad: false\r\n}\r\n\r\nconst dialogs = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case DIALOGS_GET: {\r\n            return { ...state, dialogs: action.payload.dialogs, isFetching: false, noReadCount: action.payload.noReadCount, canLoad: action.payload.dialogs.length === 20 }\r\n        }\r\n        case DIALOGS_ADD:\r\n            return { ...state, dialogs: [ action.payload, ...state.dialogs ]  }\r\n        case DIALOGS_PRELOAD:\r\n            return { ...state, dialogs: [ ...state.dialogs, ...action.payload ], canLoad: action.payload.length === 20 }\r\n        case DIALOGS_LOAD:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                { ...dialog, messages: action.payload.messages, getted: true, canLoad: action.payload.canLoad } :\r\n                dialog\r\n            ) }\r\n        case DIALOGS_ADD_MESSAGE:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                { ...dialog, messages: [\r\n                        ...dialog.messages,\r\n                        action.payload.message\r\n                    ],\r\n                    lastMessage: action.payload.message,\r\n                    noRead: action.payload.noRead ? dialog.noRead + 1 : dialog.noRead,\r\n                } :\r\n                dialog\r\n            ).sort((a, b) => {\r\n                if(!(a.lastMessage && b.lastMessage))\r\n                    return 0\r\n\r\n                a = new Date(a.lastMessage.createdAt);\r\n                b = new Date(b.lastMessage.createdAt);\r\n                \r\n                return a>b ? -1 : a<b ? 1 : 0;\r\n            }), noReadCount: action.payload.noReadCount ? state.noReadCount+1 : state.noReadCount }\r\n        case DIALOGS_SUCCESS_MESSAGE: \r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                { ...dialog, messages: dialog.messages.map(message => \r\n                        action.payload._id === message._id ? \r\n                        { ...message, isLoading: false, _id: action.payload._newId } :\r\n                        message\r\n                    ),\r\n                    lastMessage: { ...dialog.lastMessage, isLoading: false }\r\n                } :\r\n                dialog\r\n            ) }\r\n        case DIALOGS_ERROR_MESSAGE: \r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                { ...dialog, messages: dialog.messages.map(message => \r\n                        action.payload._id === message._id ? \r\n                        { ...message, isLoading: false, isError: true } :\r\n                        message\r\n                    ),\r\n                    lastMessage: { ...dialog.lastMessage, isLoading: false, isError: true }\r\n                } :\r\n                dialog\r\n            ) }\r\n        case DIALOGS_UPDATE_ONLINE:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.userId === dialog.user._id ? \r\n                { ...dialog, user: { ...dialog.user, online: action.payload.online, onlineAt: action.payload.onlineAt } } :\r\n                dialog\r\n            ) }\r\n        case DIALOGS_READ_MESSAGES:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                { ...dialog, messages: dialog.messages.map(message => \r\n                        !message.isRead && message.user._id === action.payload.userId ? \r\n                        { ...message, isRead: true } :\r\n                        message\r\n                    ),\r\n                    noRead: action.payload.noRead ? 0 : dialog.noRead,\r\n                    lastMessage: { ...dialog.lastMessage, isRead: true }\r\n                } :\r\n                dialog\r\n            ), noReadCount: action.payload.noReadCount ? state.noReadCount-1 : state.noReadCount }\r\n        case DIALOGS_EDIT_MESSAGE:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                    { ...dialog, messages: dialog.messages.map(message => \r\n                        action.payload.message._id === message._id ? \r\n                        { ...message, ...action.payload.message, isEdit: true } :\r\n                        message\r\n                    ),\r\n                    lastMessage: action.payload.editLast ? { ...dialog.lastMessage, ...action.payload.message } : dialog.lastMessage\r\n                } :\r\n                dialog\r\n            ) }\r\n        case DIALOGS_DELETE_MESSAGE:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                    { ...dialog, messages: [ ...dialog.messages.filter(message => {        \r\n                        return !action.payload.messageIds.find(x => x === message._id)\r\n                    })],\r\n                    lastMessage: action.payload.lastMessage, \r\n                    noRead: action.payload.noRead || action.payload.noRead === 0 ? action.payload.noRead : dialog.noRead\r\n                } :\r\n                dialog\r\n            ).sort((a, b) => {\r\n                if(!(a.lastMessage && b.lastMessage))\r\n                    return 0\r\n\r\n                a = new Date(a.lastMessage.createdAt);\r\n                b = new Date(b.lastMessage.createdAt);\r\n                \r\n                return a>b ? -1 : a<b ? 1 : 0;\r\n            }), noReadCount: action.payload.noReadCount || action.payload.noReadCount === 0 ? action.payload.noReadCount : state.noReadCount }\r\n        case DIALOGS_SET_LOADING:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload === dialog._id ? \r\n                    { ...dialog, canLoad: false, isLoading: true } :\r\n                dialog\r\n            )\r\n            }\r\n        case DIALOGS_LOAD_MESSAGES:\r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.dialogId === dialog._id ? \r\n                    { ...dialog,  isLoading: false, canLoad: action.payload.canLoad, messages: [...action.payload.messages, ...dialog.messages] } :\r\n                dialog\r\n            )\r\n            }\r\n        case DIALOGS_SET_TYPER: \r\n            return { ...state, dialogs: state.dialogs.map(dialog => \r\n                action.payload.userId === dialog.user._id ? \r\n                { ...dialog, typing: action.payload.typing } :\r\n                dialog\r\n            ) }\r\n        case DIALOGS_SET_FORWARD: \r\n            return { ...state, forwardMessages: action.payload }\r\n        default: \r\n            return state\r\n    }\r\n}\r\n\r\nexport default dialogs","import { \r\n    USERS_ADD,\r\n    USERS_SET_ACTIVE_USER_ID,\r\n    USERS_SET_FRIEND_STATUS,\r\n    USERS_SET,\r\n    USERS_FRIENDS_GET,\r\n    USERS_REQUESTED_GET,\r\n    USERS_PENDING_GET,\r\n    USERS_FRIENDS_REMOVE,\r\n    USERS_REQUESTED_REMOVE,\r\n    USERS_PENDING_REMOVE,\r\n    USERS_FRIENDS_ADD,\r\n    USERS_REQUESTED_ADD,\r\n    USERS_PENDING_ADD\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    isFetching: true,\r\n    getted: false,\r\n    activeUserId: false,\r\n    isError: false,\r\n    canLoad: false,\r\n    users: [],\r\n    friends: {\r\n        users: [],\r\n        getted: false,\r\n        canLoad: false,\r\n        isFetching: true,\r\n    },\r\n    requested: {\r\n        users: [],\r\n        getted: false,\r\n        canLoad: false,\r\n        isFetching: true,\r\n    },\r\n    pending: {\r\n        users: [],\r\n        getted: false,\r\n        canLoad: false,\r\n        isFetching: true,\r\n    },\r\n}\r\n\r\nconst rooms = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case USERS_SET: {\r\n            return { ...state, users: action.payload.friends, canLoad: action.payload.canLoad, isFetching: false, getted: true }\r\n        }\r\n        case USERS_ADD:\r\n            return { ...state, users: [ action.payload, ...state.users ]  }\r\n        case USERS_SET_ACTIVE_USER_ID:\r\n            return {...state, activeUserId: action.payload}\r\n        case USERS_SET_FRIEND_STATUS:\r\n            return { ...state, users: state.users.map(user => \r\n                action.payload.userId === user._id ? \r\n                { ...user, friendStatus: action.payload.friendStatus\r\n                } :\r\n                user\r\n            ) }\r\n        case USERS_FRIENDS_GET:\r\n            return { ...state, friends: { ...state.friends, users: action.payload.users, canLoad: action.payload.canLoad, isFetching: false, getted: true } }\r\n        case USERS_REQUESTED_GET:\r\n            return { ...state, requested: { ...state.requested, users: action.payload.users, canLoad: action.payload.canLoad, isFetching: false, getted: true } }\r\n        case USERS_PENDING_GET:\r\n            return { ...state, pending: { ...state.pending, users: action.payload.users, canLoad: action.payload.canLoad, isFetching: false, getted: true } }\r\n        case USERS_FRIENDS_REMOVE:\r\n            return { ...state, friends: { ...state.friends, users: [ ...state.friends.users.filter(user => {        \r\n                return action.payload.userId !== user._id\r\n            })] } }\r\n        case USERS_REQUESTED_REMOVE:\r\n            return { ...state, requested: { ...state.requested, users: [ ...state.requested.users.filter(user => {        \r\n                return action.payload.userId !== user._id\r\n            })] } }\r\n        case USERS_PENDING_REMOVE:\r\n            return { ...state, pending: { ...state.pending, users: [ ...state.pending.users.filter(user => {        \r\n                return action.payload.userId !== user._id\r\n            })] } }\r\n        case USERS_FRIENDS_ADD:\r\n            return { ...state, friends: { ...state.friends, users: [ action.payload.user, ...state.friends.users] } }\r\n        case USERS_REQUESTED_ADD:\r\n            return { ...state, requested: { ...state.requested, users: [ action.payload.user, ...state.requested.users] } }\r\n        case USERS_PENDING_ADD:\r\n            return { ...state, pending: { ...state.pending, users: [ action.payload.user, ...state.pending.users] } }\r\n        default: \r\n            return state\r\n    }\r\n}\r\n\r\nexport default rooms","import { \r\n    NOTIFICATIONS_GET,\r\n    NOTIFICATIONS_ADD,\r\n    NOTIFICATIONS_READ,\r\n    NOTIFICATIONS_SET_NO_READ,\r\n    NOTIFICATIONS_REMOVE\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    isFetching: true,\r\n    getted: false,\r\n    activeRoom: false,\r\n    isError: false,\r\n    notifications: [],\r\n    noRead: 0\r\n}\r\n\r\nconst rooms = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case NOTIFICATIONS_GET: {\r\n            return { ...state, notifications: action.payload, isFetching: false, getted: true }\r\n        }\r\n        case NOTIFICATIONS_ADD:\r\n            return { ...state, notifications: [ action.payload, ...state.notifications ], noRead: state.noRead+1 }\r\n        case NOTIFICATIONS_READ:\r\n            return { ...state, notifications: state.notifications.map(notification => \r\n                action.payload === notification._id ?\r\n                { ...notification, isRead: true } :\r\n                notification\r\n            ), noRead: state.noRead - 1 }\r\n        case NOTIFICATIONS_SET_NO_READ:\r\n            return { ...state, noRead: action.payload }\r\n        case NOTIFICATIONS_REMOVE:\r\n            return { ...state, notifications: [...state.notifications.filter(notification => notification._id !== action.payload)] }\r\n        default: \r\n            return state\r\n    }\r\n}\r\n\r\nexport default rooms","import { \r\n    CALL_SET_USER,\r\n    CALL_SET_STATUS,\r\n    CALL_SET_REMOTE_STREAM,\r\n    CALL_SET_MEDIA\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    user: false,\r\n    status: 'none', // none, outcoming, incoming, busy, active, canceled\r\n    remoteStream: false,\r\n    media: 'audio'\r\n}\r\n\r\nconst call = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case CALL_SET_USER:\r\n            return { ...state, user: action.payload.user, status: action.payload.status }\r\n        case CALL_SET_STATUS:\r\n            return { ...state, status: action.payload }\r\n        case CALL_SET_REMOTE_STREAM:\r\n            return { ...state, remoteStream: action.payload }\r\n        case CALL_SET_MEDIA:\r\n            return { ...state, media: action.payload }\r\n        default:    \r\n            return state\r\n    }\r\n}\r\n\r\nexport default call","import { \r\n    SLIDER_SET\r\n} from '../constants'\r\n\r\nconst INITIAL_STATE = {\r\n    images: [],\r\n    index: 0\r\n}\r\n\r\nconst user = (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case SLIDER_SET: {\r\n            return { ...state, images: action.payload.images, index: action.payload.index }\r\n        }\r\n        default: \r\n            return state\r\n    }\r\n}\r\n\r\nexport default user","import { combineReducers } from 'redux'\r\n\r\nimport user from './user'\r\nimport rooms from './rooms'\r\nimport media from './media'\r\nimport dialogs from './dialogs'\r\nimport users from './users'\r\nimport notifications from './notifications'\r\nimport call from './call'\r\nimport slider from './slider'\r\n\r\nexport default combineReducers({\r\n    user,\r\n    rooms,\r\n    media,\r\n    dialogs,\r\n    users,\r\n    notifications,\r\n    call,\r\n    slider\r\n})","import { createStore, applyMiddleware } from 'redux'\r\n\r\nimport rootReducer from './reducers'\r\nimport ReduxThunk from 'redux-thunk'\r\n\r\nexport default createStore(rootReducer, applyMiddleware(ReduxThunk))","export function randomInteger(min, max) {\r\n    let rand = min + Math.random() * (max + 1 - min);\r\n    return Math.floor(rand);\r\n}\r\n\r\nexport function setTitle(path, routeArray) {\r\n\tvar pageTitle;\r\n\tfor (var i=0; i < routeArray.length; i++) {\r\n\t\tif (routeArray[i].path === path) {\r\n\t\t\tpageTitle = 'Hevachat | ' + routeArray[i].title;\r\n\t\t}\r\n\t}\r\n\tdocument.title = (pageTitle) ? pageTitle : 'Hevachat';\r\n}\r\n\r\nexport function setForceTitle(title) {\r\n\tdocument.title = 'Hevachat | ' + title;\r\n}","import 'webrtc-adapter'\r\nimport SocketController from './SocketController';\r\nimport store from '../Redux/store';\r\nimport { ROOMS_SET_REMOTE_STREAM, MEDIA_TOGGLE_MICROPHONE, MEDIA_TOGGLE_MUSIC, CALL_SET_REMOTE_STREAM, MEDIA_TOGGLE_CAMERA, CALL_SET_MEDIA } from '../Redux/constants';\r\nimport hark from 'hark'\r\n\r\nlet WebRtcPeerConnection = false\r\nlet activeRoomId = false\r\nlet activeCallId = false\r\nlet localStream = false\r\nlet remoteStream = false\r\nlet speechEvents = false\r\n\r\n// Internet Explorer 6-11\r\nconst isIE = /*@cc_on!@*/false || !!document.documentMode;\r\n\r\n// Edge 20+\r\nconst isEdge = !isIE && !!window.StyleMedia;\r\n\r\nconst RTCPC = RTCPeerConnection || window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\r\nconst RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription || window.RTCSessionDescription;\r\n// const RTCIceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate;\r\n\r\nconst mediaConstraintsCall = {\r\n    offerToReceiveAudio: true,\r\n    offerToReceiveVideo: true\r\n}\r\nconst mediaConstraintsRoom = {\r\n    offerToReceiveAudio: true,\r\n    offerToReceiveVideo: false\r\n}\r\n\r\nconst optionsRoom = {\r\n    'iceServers': [\r\n        {urls: 'stun:173.194.66.127:19302'},\r\n        {\r\n          urls: 'turn:89.223.100.223:3478',\r\n          credential: 'TkYUraQew3RjwTA2JPjAaWL1Q7FIamc',\r\n          username: 'hevachat'\r\n        }\r\n    ],\r\n};\r\n\r\nconst optionsCall = {\r\n    'iceServers': [\r\n        {urls: 'stun:stun01.sipphone.com'}, \r\n        {urls: 'stun:stun.ekiga.net'}, \r\n        {urls: 'stun:stun.fwdnet.net'}, \r\n        {urls: 'stun:stun.ideasip.com'}, \r\n        {urls: 'stun:stun.iptel.org'}, \r\n        {urls: 'stun:stun.rixtelecom.se'}, \r\n        {urls: 'stun:stun.schlund.de'}, \r\n        {urls: 'stun:stun.l.google.com:19302'}, \r\n        {urls: 'stun:stun1.l.google.com:19302'}, \r\n        {urls: 'stun:stun2.l.google.com:19302'}, \r\n        {urls: 'stun:stun3.l.google.com:19302'}, \r\n        {urls: 'stun:stun4.l.google.com:19302'}, \r\n        {urls: 'stun:stunserver.org'}, \r\n        {urls: 'stun:stun.softjoys.com'}, \r\n        {urls: 'stun:stun.voiparound.com'}, \r\n        {urls: 'stun:stun.voipbuster.com'}, \r\n        {urls: 'stun:stun.voipstunt.com'}, \r\n        {urls: 'stun:stun.voxgratia.org'}, \r\n        {urls: 'stun:stun.xten.com'}, \r\n        {\r\n          urls: 'turn:89.223.100.223:3478',\r\n          credential: 'TkYUraQew3RjwTA2JPjAaWL1Q7FIamc',\r\n          username: 'hevachat'\r\n        }\r\n    ],\r\n};\r\n\r\nfunction createEmptyStream(callback) {\r\n    let audioCtx = new (window.AudioContext || window.webkitAudioContext)()\r\n    let dest = audioCtx.createMediaStreamDestination()\r\n    return callback(dest.stream)\r\n}\r\n\r\nconst getMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\r\n// navigator.mediaDevices.getUserMedia \r\nfunction getUserMedia(media, callback) {    \r\n    if(isIE || isEdge) {\r\n        navigator.mediaDevices.getUserMedia(media).then(stream => {\r\n            callback(stream)\r\n        })\r\n        .catch((err) => {\r\n            createEmptyStream(callback)\r\n        })\r\n    } else {\r\n        getMedia(\r\n            media, \r\n            callback, \r\n            () => {\r\n                if(media.video)\r\n                    getMedia(\r\n                        {audio: true, video: false}, \r\n                        callback, \r\n                        () => {\r\n                            createEmptyStream(callback)\r\n                        }\r\n                    );\r\n                else\r\n                    createEmptyStream(callback)\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nfunction onRoomOffer(error, offer) {\r\n    if(error) return console.log(error);\r\n\r\n    SocketController.sendRoomOfferSdp({roomId: activeRoomId, offerSdp: offer.sdp})\r\n}\r\n\r\nfunction onRoomIceCandidate(e) {  \r\n    if(e.candidate) {\r\n        SocketController.sendRoomIceCandidate({roomId: activeRoomId, candidate: e.candidate})\r\n    } \r\n}\r\n\r\nfunction onCallOffer(error, offer, media) {\r\n    if(error) return console.log(error);\r\n\r\n    SocketController.sendCallOfferSdp({userId: activeCallId, offerSdp: offer, media})\r\n}\r\n\r\nfunction onCallIceCandidate(e) {\r\n    if(e.candidate) {\r\n        SocketController.sendCallIceCandidate({userId: activeCallId, candidate: e.candidate})\r\n    } \r\n}\r\n\r\nexport default { \r\n    // Global functions\r\n    toggleMicrophone() {\r\n        localStream.getAudioTracks()[0].enabled = !localStream.getAudioTracks()[0].enabled\r\n        store.dispatch({\r\n            type: MEDIA_TOGGLE_MICROPHONE,\r\n            payload: localStream.getAudioTracks()[0].enabled\r\n        })\r\n    },\r\n    toggleMusic() {\r\n        remoteStream.getAudioTracks()[0].enabled = !remoteStream.getAudioTracks()[0].enabled\r\n\r\n        store.dispatch({\r\n            type: MEDIA_TOGGLE_MUSIC,\r\n            payload: remoteStream.getAudioTracks()[0].enabled\r\n        })\r\n    },\r\n\r\n    // Rooms conference\r\n    connectRoom: (roomId) => {\r\n        activeRoomId = roomId\r\n        \r\n        getUserMedia({audio: true, video: false}, (stream) => {\r\n            localStream = stream\r\n\r\n            localStream.getAudioTracks()[0].enabled = false\r\n\r\n            WebRtcPeerConnection = new RTCPC(optionsRoom)\r\n                        \r\n            for (const track of stream.getTracks()) {\r\n                WebRtcPeerConnection.addTrack(track, stream)\r\n            }\r\n\r\n            WebRtcPeerConnection.onicecandidate = onRoomIceCandidate\r\n\r\n            WebRtcPeerConnection.createOffer(mediaConstraintsRoom).then((offer) => {\r\n                WebRtcPeerConnection.setLocalDescription(offer)\r\n                \r\n                onRoomOffer(null, offer)\r\n            })\r\n        })\r\n    },\r\n    leaveRoom({roomId, lang}) {\r\n        if(WebRtcPeerConnection) {\r\n            WebRtcPeerConnection.close()\r\n            WebRtcPeerConnection = false\r\n        }\r\n\r\n        if(activeRoomId) {\r\n            SocketController.leaveRoom({roomId, lang})\r\n            activeRoomId = false\r\n        }\r\n\r\n        if(localStream) {\r\n            localStream.getTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n            localStream = false\r\n        }\r\n\r\n        if(remoteStream) {\r\n            remoteStream.getTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n            remoteStream = false\r\n        }\r\n\r\n        if(speechEvents) {\r\n            speechEvents.stop()\r\n            speechEvents = false\r\n        }\r\n\r\n        store.dispatch({\r\n            type: MEDIA_TOGGLE_MICROPHONE,\r\n            payload: false\r\n        })\r\n\r\n        store.dispatch({\r\n            type: MEDIA_TOGGLE_MUSIC,\r\n            payload: true\r\n        })\r\n    },\r\n    roomOnIceCandidate: (e) => {\r\n        if(e.candidate) {\r\n            let wait = setInterval(() => {\r\n                if(WebRtcPeerConnection) {\r\n                    clearInterval(wait)\r\n                    WebRtcPeerConnection.addIceCandidate(e)\r\n                }\r\n            }, 100)\r\n        }\r\n    },\r\n    onRoomAnswerSdp: (sdpAnswer) => {\r\n        try {\r\n            let answer = new RTCSessionDescription({\r\n                type: 'answer',\r\n                sdp: sdpAnswer\r\n            })\r\n            \r\n            WebRtcPeerConnection.setRemoteDescription(answer);\r\n    \r\n            let stream = new MediaStream();\r\n    \r\n            for (const sender of WebRtcPeerConnection.getReceivers()) {\r\n                stream.addTrack(sender.track);\r\n            }\r\n    \r\n            remoteStream = stream\r\n    \r\n            store.dispatch({\r\n                type: ROOMS_SET_REMOTE_STREAM,\r\n                payload: stream\r\n            })\r\n    \r\n            speechEvents = hark(localStream, {});\r\n     \r\n            speechEvents.on('speaking', function() {\r\n                SocketController.sendRoomSpeaking({roomId: activeRoomId})\r\n            });\r\n        \r\n            speechEvents.on('stopped_speaking', function() {\r\n                SocketController.sendRoomStopSpeaking({roomId: activeRoomId})\r\n            });\r\n        } catch (error) {\r\n            \r\n        }\r\n    },\r\n\r\n    call: (userId, create = false) => {\r\n        activeCallId = userId\r\n\r\n        getUserMedia({audio: true, video: true}, (stream) => {\r\n            localStream = stream\r\n\r\n            if(localStream.getVideoTracks()[0])\r\n                localStream.getVideoTracks()[0].enabled = false\r\n\r\n            WebRtcPeerConnection = new RTCPC(optionsCall)\r\n            \r\n            for (const track of stream.getTracks()) {\r\n                WebRtcPeerConnection.addTrack(track, stream)\r\n            }\r\n\r\n            WebRtcPeerConnection.onicecandidate = onCallIceCandidate\r\n\r\n            if(create)\r\n                WebRtcPeerConnection.createOffer(mediaConstraintsCall).then((offer) => {\r\n                    WebRtcPeerConnection.setLocalDescription(offer)\r\n                    onCallOffer(null, offer, 'audio')\r\n                })\r\n            \r\n            store.dispatch({\r\n                type: MEDIA_TOGGLE_MICROPHONE,\r\n                payload: true\r\n            })\r\n        })\r\n    },\r\n\r\n    stopCall: () => {\r\n        if(WebRtcPeerConnection) {\r\n            WebRtcPeerConnection.close()\r\n            WebRtcPeerConnection = false\r\n        }\r\n\r\n        if(activeCallId) {\r\n            activeCallId = false\r\n        }\r\n\r\n        if(localStream) {\r\n            for (const track of localStream.getTracks()) {\r\n                track.stop()\r\n            }\r\n\r\n            localStream = false\r\n        }\r\n\r\n        if(remoteStream) {\r\n            for (const track of remoteStream.getTracks()) {\r\n                track.stop()\r\n            }\r\n            remoteStream = false\r\n            store.dispatch({\r\n                type: CALL_SET_REMOTE_STREAM,\r\n                payload: false\r\n            })\r\n        }\r\n\r\n        store.dispatch({\r\n            type: CALL_SET_REMOTE_STREAM,\r\n            payload: false\r\n        })\r\n\r\n        store.dispatch({\r\n            type: MEDIA_TOGGLE_MICROPHONE,\r\n            payload: false\r\n        })\r\n\r\n        store.dispatch({\r\n            type: MEDIA_TOGGLE_MUSIC,\r\n            payload: true\r\n        })\r\n\r\n        store.dispatch({\r\n            type: MEDIA_TOGGLE_CAMERA,\r\n            payload: false\r\n        })\r\n\r\n        store.dispatch({\r\n            type: CALL_SET_MEDIA,\r\n            payload: 'audio'\r\n        })\r\n    },\r\n\r\n    callToggleCamera: () => {\r\n        if(localStream) {\r\n            if(localStream.getVideoTracks()[0]) {\r\n                localStream.getVideoTracks()[0].enabled = !localStream.getVideoTracks()[0].enabled\r\n                store.dispatch({\r\n                    type: MEDIA_TOGGLE_CAMERA,\r\n                    payload: localStream.getVideoTracks()[0].enabled\r\n                })\r\n\r\n                SocketController.toggleCameraCall(activeCallId, localStream.getVideoTracks()[0].enabled ? 'video' : 'audio')\r\n            }\r\n        }\r\n    },\r\n\r\n    onCallOfferSdp: ({offerSdp, media}) => {\r\n        let wait = setInterval(() => {\r\n            if(WebRtcPeerConnection) {\r\n                clearInterval(wait)\r\n                WebRtcPeerConnection.setRemoteDescription(offerSdp);\r\n\r\n                WebRtcPeerConnection.createAnswer(mediaConstraintsCall).then((answer) => {\r\n                    WebRtcPeerConnection.setLocalDescription(answer)\r\n                    SocketController.sendCallAnswerSdp({userId: activeCallId, answerSdp: answer})\r\n\r\n                    let stream = new MediaStream();\r\n\r\n                    if(remoteStream) {\r\n                        for (const track of remoteStream.getTracks()) {\r\n                            track.stop();\r\n                        }\r\n                        remoteStream = false\r\n                    }\r\n\r\n                    for (const sender of WebRtcPeerConnection.getReceivers()) {\r\n                        stream.addTrack(sender.track);\r\n                    }\r\n\r\n                    remoteStream = stream\r\n\r\n                    store.dispatch({\r\n                        type: CALL_SET_REMOTE_STREAM,\r\n                        payload: stream\r\n                    })\r\n                    store.dispatch({\r\n                        type: CALL_SET_MEDIA,\r\n                        payload: media\r\n                    })\r\n                })\r\n            }\r\n        }, 100);\r\n    },\r\n\r\n    onCallAnswerSdp: (answer) => {\r\n        let wait = setInterval(() => {\r\n            if(WebRtcPeerConnection) {\r\n                clearInterval(wait)\r\n                WebRtcPeerConnection.setRemoteDescription(answer);\r\n\r\n                let stream = new MediaStream();\r\n\r\n                if(remoteStream) {\r\n                    for (const track of remoteStream.getTracks()) {\r\n                        track.stop();\r\n                    }\r\n                    remoteStream = false\r\n                }\r\n\r\n                for (const sender of WebRtcPeerConnection.getReceivers()) {\r\n                    stream.addTrack(sender.track);\r\n                }\r\n                \r\n                remoteStream = stream\r\n\r\n                store.dispatch({\r\n                    type: CALL_SET_REMOTE_STREAM,\r\n                    payload: remoteStream\r\n                })\r\n            }\r\n        }, 100);\r\n    },\r\n\r\n    callOnIceCandidate: (candidate) => {\r\n        if(candidate) {\r\n            let wait = setInterval(() => {\r\n                if(WebRtcPeerConnection) {\r\n                    clearInterval(wait)\r\n                    WebRtcPeerConnection.addIceCandidate(candidate)\r\n                }\r\n            }, 100)\r\n        }\r\n    },\r\n}","export const urlApi = 'https://romadevtest.tk:8080'\r\nexport const timeStamps = [\r\n    {\r\n        time: 60,\r\n        label: '1 minute'\r\n    },\r\n    {\r\n        time: 1800,\r\n        label: '30 minute'\r\n    },\r\n    {\r\n        time: 3600,\r\n        label: '1 hour'\r\n    },\r\n    {\r\n        time: 86400,\r\n        label: '24 hour'\r\n    },\r\n    {\r\n        time: 604800,\r\n        label: '7 days'\r\n    },\r\n    {\r\n        time: 2419200,\r\n        label: '1 month'\r\n    },\r\n    {\r\n        time: 999999999,\r\n        label: 'Forever'\r\n    },\r\n]","import io from 'socket.io-client'\r\nimport store from '../Redux/store'\r\nimport {\r\n    ROOMS_ADD,\r\n    ROOMS_USER_JOIN_ROOM,\r\n    ROOMS_USER_LEAVE_ROOM,\r\n    ROOMS_ADD_MESSAGE,\r\n    ROOMS_DELETE_MESSAGE,\r\n    ROOMS_READ_MESSAGE,\r\n    ROOMS_EDIT_MESSAGE,\r\n    ROOMS_ADD_TYPER,\r\n    ROOMS_REMOVE_TYPER,\r\n    ROOMS_SET_SPEAKING_STATUS,\r\n    ROOMS_USER_JOIN_IN_ROOM,\r\n    ROOMS_USER_LEAVE_IN_ROOM,\r\n    DIALOGS_ADD_MESSAGE,\r\n    DIALOGS_READ_MESSAGES,\r\n    DIALOGS_SET_TYPER,\r\n    DIALOGS_EDIT_MESSAGE,\r\n    DIALOGS_DELETE_MESSAGE,\r\n    DIALOGS_ADD,\r\n    USERS_SET_FRIEND_STATUS,\r\n    USERS_FRIENDS_ADD,\r\n    USERS_PENDING_ADD,\r\n    USERS_REQUESTED_ADD,\r\n    USERS_FRIENDS_REMOVE,\r\n    USERS_PENDING_REMOVE,\r\n    USERS_REQUESTED_REMOVE,\r\n    USERS_ADD,\r\n    NOTIFICATIONS_ADD,\r\n    NOTIFICATIONS_READ,\r\n    NOTIFICATIONS_SET_NO_READ,\r\n    NOTIFICATIONS_REMOVE,\r\n    ROOMS_EDIT_ROOM,\r\n    ROOMS_EDIT_IN_ROOM,\r\n    ROOMS_DELETE_ROOM,\r\n    CALL_SET_USER,\r\n    CALL_SET_STATUS,\r\n    CALL_SET_MEDIA,\r\n    ROOMS_SET_MUTED\r\n} from '../Redux/constants'\r\nimport WebRtcController from './WebRtcController'\r\nimport {urlApi} from '../config'\r\n\r\nlet socket = null\r\nlet activeLang = false\r\nlet unmuteTimer = false\r\n\r\nexport default { \r\n    init: (apiToken) => {\r\n        socket = io(urlApi, {transports: ['websocket', 'polling', 'flashsocket']})\r\n        socket.on('connect', () => {\r\n            socket.emit('auth', apiToken)\r\n\r\n            fetch(`${urlApi}/api/call/check`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${apiToken}`,\r\n                }\r\n            })\r\n            .then((response) => response.json())\r\n            .then(({have, call}) => {\r\n                if(have) {\r\n                    fetch(`${urlApi}/api/user/get`, {\r\n                        method: \"post\",\r\n                        headers: {\r\n                            Accept: \"application/json\",\r\n                            \"Content-Type\": \"application/json\",\r\n                            Authorization: `Bearer ${apiToken}`,\r\n                        },\r\n                        body: JSON.stringify({\r\n                            userId: call.userFrom._id\r\n                        })\r\n                    })\r\n                    .then((response) => response.json())\r\n                    .then(({user, friendStatus}) => {\r\n                        store.dispatch({\r\n                            type: CALL_SET_USER,\r\n                            payload: {user, status: 'incoming'}\r\n                        })\r\n                    });\r\n                }\r\n            });\r\n        })\r\n\r\n        socket.on('createRoom', room => {\r\n            store.dispatch({\r\n                type: ROOMS_ADD,\r\n                payload: room\r\n            })\r\n        })\r\n\r\n        socket.on('editRoom', room => {\r\n            store.dispatch({\r\n                type: ROOMS_EDIT_ROOM,\r\n                payload: room\r\n            })\r\n        })\r\n\r\n        socket.on('editInRoom', room => {\r\n            store.dispatch({\r\n                type: ROOMS_EDIT_IN_ROOM,\r\n                payload: room\r\n            })\r\n        })\r\n\r\n        socket.on('deleteRoom', roomId => {\r\n            store.dispatch({\r\n                type: ROOMS_DELETE_ROOM,\r\n                payload: roomId\r\n            })\r\n        })\r\n\r\n        socket.on('joinRoom', ({roomId, user}) => {\r\n            store.dispatch({\r\n                type: ROOMS_USER_JOIN_ROOM,\r\n                payload: {roomId, user}\r\n            })\r\n        })\r\n\r\n        socket.on('joinInRoom', (user) => {\r\n            store.dispatch({\r\n                type: ROOMS_USER_JOIN_IN_ROOM,\r\n                payload: user\r\n            })\r\n        })\r\n\r\n        socket.on('leaveRoom', ({roomId, userId}) => {\r\n            store.dispatch({\r\n                type: ROOMS_USER_LEAVE_ROOM,\r\n                payload: {roomId, userId}\r\n            })\r\n        })\r\n\r\n        socket.on('leaveInRoom', (userId) => {\r\n            store.dispatch({\r\n                type: ROOMS_USER_LEAVE_IN_ROOM,\r\n                payload: userId\r\n            })\r\n        })\r\n\r\n        socket.on('sendMessageRoom', (message) => {\r\n            store.dispatch({\r\n                type: ROOMS_ADD_MESSAGE,\r\n                payload: message\r\n            })\r\n\r\n            if(store.getState().rooms.activeRoom.typers.find(x => x._id === message.user._id)) {\r\n                store.dispatch({\r\n                    type: ROOMS_REMOVE_TYPER,\r\n                    payload: message.user._id\r\n                })\r\n            }\r\n        })\r\n\r\n        socket.on('deleteMessageRoom', (messageIds) => {\r\n            store.dispatch({\r\n                type: ROOMS_DELETE_MESSAGE,\r\n                payload: messageIds\r\n            })\r\n        })\r\n\r\n        socket.on('readMessagesRoom', roomId => {\r\n            if(store.getState().rooms.activeRoom && store.getState().rooms.activeRoom._id === roomId)\r\n                store.dispatch({\r\n                    type: ROOMS_READ_MESSAGE,\r\n                    payload: store.getState().user._id\r\n                })\r\n        })\r\n\r\n        socket.on('editMessageRoom', message => {\r\n            store.dispatch({\r\n                type: ROOMS_EDIT_MESSAGE,\r\n                payload: message\r\n            })\r\n        })\r\n\r\n        socket.on('typingRoom', user => {\r\n            if(!store.getState().rooms.activeRoom.typers.find(x => x._id === user._id)) {\r\n                store.dispatch({\r\n                    type: ROOMS_ADD_TYPER,\r\n                    payload: user\r\n                })\r\n    \r\n                setTimeout(() => {\r\n                    store.dispatch({\r\n                        type: ROOMS_REMOVE_TYPER,\r\n                        payload: user._id\r\n                    })\r\n                }, 2500)\r\n            }\r\n        })\r\n\r\n        socket.on('roomAnswerSdp', answerSdp => {\r\n            WebRtcController.onRoomAnswerSdp(answerSdp)\r\n        })\r\n\r\n        socket.on('roomOnIceCandidate', candidate => {\r\n            WebRtcController.roomOnIceCandidate(candidate)\r\n        })\r\n\r\n        socket.on('roomSpeaking', userId => {\r\n            store.dispatch({\r\n                type: ROOMS_SET_SPEAKING_STATUS,\r\n                payload: {userId, speaking: true}\r\n            })\r\n        })\r\n\r\n        socket.on('roomStopSpeaking', userId => {\r\n            store.dispatch({\r\n                type: ROOMS_SET_SPEAKING_STATUS,\r\n                payload: {userId, speaking: false}\r\n            })\r\n        })\r\n\r\n        socket.on('sendMessageDialog', ({message, otherId}) => {\r\n            if(store.getState().dialogs.dialogs.find(x => x.user._id === message.user._id) && store.getState().dialogs.dialogs.find(x => x.user._id === message.user._id).typing) {\r\n                store.dispatch({\r\n                    type: DIALOGS_SET_TYPER,\r\n                    payload: {userId: message.user._id, typing: false}\r\n                })\r\n            }\r\n\r\n            if(store.getState().dialogs.dialogs.find(x => x._id === message.dialogId)) {\r\n                let noReadCount = false\r\n\r\n                if(\r\n                    message.user._id !== store.getState().user._id &&\r\n                    !store.getState().dialogs.dialogs.find(x => x._id === message.dialogId).noRead\r\n                ) {\r\n                    noReadCount = true\r\n                }\r\n\r\n                store.dispatch({\r\n                    type: DIALOGS_ADD_MESSAGE,\r\n                    payload: {message, dialogId: message.dialogId, noRead: message.user._id !== store.getState().user._id, noReadCount}\r\n                })\r\n            } else {\r\n                fetch(`${urlApi}/api/user/get`, {\r\n                    method: \"post\",\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: `Bearer ${apiToken}`,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        userId: otherId\r\n                    })\r\n                })\r\n                .then((response) => response.json())\r\n                .then(({user, friendStatus}) => {\r\n                    let dialog = {\r\n                        lastMessage: message,\r\n                        _id: message.dialogId,\r\n                        users: [store.getState().user, user],\r\n                        user: user,\r\n                        getted: false,\r\n                        typing: false,\r\n                        noRead: 1,\r\n                        messages: []\r\n                    }\r\n                    store.dispatch({\r\n                        type: DIALOGS_ADD,\r\n                        payload: dialog\r\n                    })\r\n                });\r\n            }\r\n        })\r\n\r\n        socket.on('sendNotification', notification => {\r\n            if(store.getState().notifications.getted)\r\n                store.dispatch({\r\n                    type: NOTIFICATIONS_ADD,\r\n                    payload: notification\r\n                })\r\n            else \r\n                store.dispatch({\r\n                    type: NOTIFICATIONS_SET_NO_READ,\r\n                    payload: store.getState().notifications.noRead+1\r\n                })\r\n        })\r\n\r\n        socket.on('readNotification', id => {\r\n            store.dispatch({\r\n                type: NOTIFICATIONS_READ,\r\n                payload: id\r\n            })\r\n        })\r\n\r\n        socket.on('removeNotification', ({id, read}) => {\r\n            let noRead = store.getState().notifications.noRead\r\n            \r\n            if(!read)\r\n                noRead--\r\n\r\n            store.dispatch({\r\n                type: NOTIFICATIONS_SET_NO_READ,\r\n                payload: noRead\r\n            })\r\n\r\n            store.dispatch({\r\n                type: NOTIFICATIONS_REMOVE,\r\n                payload: id\r\n            })\r\n        })\r\n\r\n        socket.on('readMessagesDialog', ({dialogId, userId}) => {\r\n            store.dispatch({\r\n                type: DIALOGS_READ_MESSAGES,\r\n                payload: {dialogId, userId, noRead: userId !== store.getState().user._id, noReadCount: userId !== store.getState().user._id}\r\n            })\r\n        })\r\n\r\n        socket.on('editMessageDialog', ({message, dialogId}) => {\r\n            let last = store.getState().dialogs.dialogs.find(x => x._id === dialogId).lastMessage\r\n\r\n            let editLast\r\n            if(last)\r\n                editLast = message._id === last._id\r\n            else \r\n                editLast = false\r\n\r\n            store.dispatch({\r\n                type: DIALOGS_EDIT_MESSAGE,\r\n                payload: {message, dialogId, editLast}\r\n            })\r\n        })\r\n\r\n        socket.on('deleteMessageDialog', ({messageIds, dialogId, lastMessage, noRead, noReadCount}) => {\r\n            console.log(noReadCount)\r\n            store.dispatch({\r\n                type: DIALOGS_DELETE_MESSAGE,\r\n                payload: {dialogId, messageIds, lastMessage, noRead, noReadCount}\r\n            })\r\n        })\r\n\r\n        socket.on('typingDialog', userId => {\r\n            if(store.getState().dialogs.dialogs.find(x => x.user._id === userId)) {\r\n                store.dispatch({\r\n                    type: DIALOGS_SET_TYPER,\r\n                    payload: {userId, typing: true}\r\n                })\r\n    \r\n                setTimeout(() => {\r\n                    store.dispatch({\r\n                        type: DIALOGS_SET_TYPER,\r\n                        payload: {userId, typing: false}\r\n                    })\r\n                }, 2500)\r\n            }\r\n        })\r\n\r\n        socket.on('sendRequestFriend', ({userId, friendStatus}) => {\r\n            store.dispatch({\r\n                type: USERS_SET_FRIEND_STATUS,\r\n                payload: {userId, friendStatus}\r\n            })\r\n\r\n            if(store.getState().users.pending.getted) {\r\n                store.dispatch({\r\n                    type: USERS_PENDING_REMOVE,\r\n                    payload: {userId}\r\n                })\r\n            }\r\n    \r\n            if(store.getState().users.requested.getted) {\r\n                if(store.getState().users.users.find(x => x._id === userId)) {\r\n                    store.dispatch({\r\n                        type: USERS_REQUESTED_ADD,\r\n                        payload: {user: store.getState().users.users.find(x => x._id === userId)}\r\n                    })\r\n                } else {\r\n                    fetch(`${urlApi}/api/user/get`, {\r\n                        method: \"post\",\r\n                        headers: {\r\n                            Accept: \"application/json\",\r\n                            \"Content-Type\": \"application/json\",\r\n                            Authorization: `Bearer ${apiToken}`,\r\n                        },\r\n                        body: JSON.stringify({\r\n                            userId: userId\r\n                        })\r\n                    })\r\n                    .then((response) => response.json())\r\n                    .then(({user, friendStatus}) => {\r\n                        user.friendStatus = friendStatus\r\n                        store.dispatch({\r\n                            type: USERS_ADD,\r\n                            payload: user\r\n                        })\r\n                        store.dispatch({\r\n                            type: USERS_REQUESTED_ADD,\r\n                            payload: {user}\r\n                        })\r\n                    });\r\n                }\r\n            }\r\n        })\r\n\r\n        socket.on('sendAcceptFriend', ({userId, friendStatus}) => {\r\n            store.dispatch({\r\n                type: USERS_SET_FRIEND_STATUS,\r\n                payload: {userId, friendStatus}\r\n            })\r\n    \r\n            if(store.getState().users.pending.getted) {\r\n                store.dispatch({\r\n                    type: USERS_PENDING_REMOVE,\r\n                    payload: {userId}\r\n                })\r\n            }\r\n    \r\n            if(store.getState().users.friends.getted) {\r\n                if(store.getState().users.users.find(x => x._id === userId)) {\r\n                    store.dispatch({\r\n                        type: USERS_FRIENDS_ADD,\r\n                        payload: {user: store.getState().users.users.find(x => x._id === userId)}\r\n                    })\r\n                } else {\r\n                    fetch(`${urlApi}/api/user/get`, {\r\n                        method: \"post\",\r\n                        headers: {\r\n                            Accept: \"application/json\",\r\n                            \"Content-Type\": \"application/json\",\r\n                            Authorization: `Bearer ${apiToken}`,\r\n                        },\r\n                        body: JSON.stringify({\r\n                            userId: userId\r\n                        })\r\n                    })\r\n                    .then((response) => response.json())\r\n                    .then(({user, friendStatus}) => {\r\n                        user.friendStatus = friendStatus\r\n                        store.dispatch({\r\n                            type: USERS_ADD,\r\n                            payload: user\r\n                        })\r\n                        store.dispatch({\r\n                            type: USERS_FRIENDS_ADD,\r\n                            payload: {user}\r\n                        })\r\n                    });\r\n                }\r\n            }\r\n        })\r\n\r\n        socket.on('sendRemoveFriend', ({userId, friendStatus}) => {\r\n            store.dispatch({\r\n                type: USERS_SET_FRIEND_STATUS,\r\n                payload: {userId, friendStatus}\r\n            })\r\n    \r\n            if(store.getState().users.friends.getted) {\r\n                if(friendStatus === 1) {\r\n                    store.dispatch({\r\n                        type: USERS_FRIENDS_REMOVE,\r\n                        payload: {userId}\r\n                    })\r\n    \r\n                    if(store.getState().users.requested.getted) {\r\n                        if(store.getState().users.users.find(x => x._id === userId)) {\r\n                            store.dispatch({\r\n                                type: USERS_PENDING_ADD,\r\n                                payload: {user: store.getState().users.users.find(x => x._id === userId)}\r\n                            })\r\n                        } else {\r\n                            fetch(`${urlApi}/api/user/get`, {\r\n                                method: \"post\",\r\n                                headers: {\r\n                                    Accept: \"application/json\",\r\n                                    \"Content-Type\": \"application/json\",\r\n                                    Authorization: `Bearer ${apiToken}`,\r\n                                },\r\n                                body: JSON.stringify({\r\n                                    userId: userId\r\n                                })\r\n                            })\r\n                            .then((response) => response.json())\r\n                            .then(({user, friendStatus}) => {\r\n                                user.friendStatus = friendStatus\r\n                                store.dispatch({\r\n                                    type: USERS_ADD,\r\n                                    payload: user\r\n                                })\r\n                                store.dispatch({\r\n                                    type: USERS_PENDING_ADD,\r\n                                    payload: {user}\r\n                                })\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if(store.getState().users.pending.getted && friendStatus === 0) {\r\n                store.dispatch({\r\n                    type: USERS_PENDING_REMOVE,\r\n                    payload: {userId}\r\n                })\r\n            }\r\n    \r\n            if(store.getState().users.requested.getted && friendStatus === 0) {\r\n                store.dispatch({\r\n                    type: USERS_REQUESTED_REMOVE,\r\n                    payload: {userId}\r\n                })\r\n            }\r\n        })\r\n\r\n        socket.on('sendUserCall', userId => {\r\n            fetch(`${urlApi}/api/user/get`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${apiToken}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    userId: userId\r\n                })\r\n            })\r\n            .then((response) => response.json())\r\n            .then(({user, friendStatus}) => {\r\n                store.dispatch({\r\n                    type: CALL_SET_USER,\r\n                    payload: {user, status: 'incoming'}\r\n                })\r\n            });\r\n        })\r\n\r\n        socket.on('sendUserAcceptCall', userId => {\r\n            if(store.getState().call.user && store.getState().call.user._id === userId) {\r\n                store.dispatch({\r\n                    type: CALL_SET_STATUS,\r\n                    payload: 'active'\r\n                })\r\n                WebRtcController.call(userId, true)\r\n            }\r\n        })\r\n\r\n        socket.on('callOnIceCandidate', candidate => {\r\n            if(store.getState().call.user) {\r\n                WebRtcController.callOnIceCandidate(candidate)\r\n            }\r\n        })\r\n\r\n        socket.on('stopUserCall', userId => {\r\n            if(store.getState().call.user && store.getState().call.user._id === userId) {\r\n                if(store.getState().call.status === 'outcoming')\r\n                    store.dispatch({\r\n                        type: CALL_SET_STATUS,\r\n                        payload: 'canceled'\r\n                    })\r\n                \r\n                if(store.getState().call.status === 'incoming')\r\n                    store.dispatch({\r\n                        type: CALL_SET_USER,\r\n                        payload: {user: false, status: 'none'}\r\n                    })\r\n                \r\n                if(store.getState().call.status === 'active') {\r\n                    store.dispatch({\r\n                        type: CALL_SET_USER,\r\n                        payload: {user: false, status: 'none'}\r\n                    })\r\n\r\n                    WebRtcController.stopCall()\r\n                }\r\n            }\r\n        })\r\n\r\n        socket.on('callOfferSdp', ({offerSdp, media}) => {\r\n            if(store.getState().call.user) {\r\n                WebRtcController.onCallOfferSdp({offerSdp, media})\r\n            }\r\n        })\r\n\r\n        socket.on('callAnswerSdp', sdp => {\r\n            if(store.getState().call.user) {\r\n                WebRtcController.onCallAnswerSdp(sdp)\r\n            }\r\n        })\r\n\r\n        socket.on('toggleCameraCall', ({userId, media}) => {\r\n            if(store.getState().call.user && store.getState().call.user._id === userId) {\r\n                store.dispatch({\r\n                    type: CALL_SET_MEDIA,\r\n                    payload: media\r\n                })\r\n            }\r\n        })\r\n\r\n        socket.on('muteRoom', ({roomId, muted}) => {\r\n            if(store.getState().rooms.activeRoom && store.getState().rooms.activeRoom._id === roomId) {\r\n                store.dispatch({\r\n                    type: ROOMS_SET_MUTED,\r\n                    payload: muted\r\n                })\r\n\r\n                if(unmuteTimer) {\r\n                    clearTimeout(unmuteTimer)\r\n                }\r\n\r\n                if((muted.numDate*1000) <= 86400000) {\r\n                    unmuteTimer = setTimeout(() => {\r\n                        if(store.getState().rooms.activeRoom && \r\n                        store.getState().rooms.activeRoom._id === roomId && \r\n                        !!store.getState().rooms.activeRoom.muted && \r\n                        store.getState().rooms.activeRoom.muted.date === muted.date) {\r\n                            store.dispatch({\r\n                                type: ROOMS_SET_MUTED,\r\n                                payload: false\r\n                            })\r\n                        }\r\n                    }, muted.numDate*1000);\r\n                }\r\n            }\r\n        })\r\n\r\n        socket.on('unmuteRoom', roomId => {\r\n            if(store.getState().rooms.activeRoom && store.getState().rooms.activeRoom._id === roomId) {\r\n                store.dispatch({\r\n                    type: ROOMS_SET_MUTED,\r\n                    payload: false\r\n                })\r\n\r\n                if(unmuteTimer) {\r\n                    clearTimeout(unmuteTimer)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    getSocketId: () => {\r\n        return socket.id\r\n    },\r\n    joinLang: lang => {\r\n        if(activeLang)\r\n            socket.emit('leaveLang', lang)\r\n        \r\n        socket.emit('joinLang', lang)\r\n        activeLang = lang\r\n    },\r\n    createRoom: ({room, lang}) => {\r\n        socket.emit('createRoom', {room, lang})\r\n    },\r\n    joinRoom: ({roomId, lang}) => {\r\n        socket.emit('joinRoom', {roomId, lang, userId: store.getState().user._id})\r\n    },\r\n    leaveRoom: ({roomId, lang}) => {\r\n        socket.emit('leaveRoom', {roomId, lang})\r\n    },\r\n    sendMessageRoom: ({roomId, message}) => {\r\n        socket.emit('sendMessageRoom', {roomId, message})\r\n    },\r\n    typingRoom: (roomId) => {\r\n        socket.emit('typingRoom', roomId)\r\n    },\r\n\r\n    // Room conference\r\n    sendRoomIceCandidate: ({roomId, candidate}) => {\r\n        socket.emit('roomIceCandidate', {roomId, candidate})\r\n    },\r\n    sendRoomOfferSdp: ({roomId, offerSdp}) => {\r\n        socket.emit('roomOfferSdp', {roomId, offerSdp})\r\n    },\r\n    sendRoomSpeaking: ({roomId}) => {\r\n        socket.emit('roomSpeaking', roomId)\r\n    },\r\n    sendRoomStopSpeaking: ({roomId}) => {\r\n        socket.emit('roomStopSpeaking', roomId)\r\n    },\r\n    typingDialog: (otherId, userId) => {\r\n        socket.emit('typingDialog', {otherId, userId})\r\n    },\r\n\r\n    // Calls\r\n    sendCallOfferSdp: ({userId, offerSdp, media}) => {\r\n        socket.emit('callOfferSdp', {userId, offerSdp, media})\r\n    },\r\n    sendCallAnswerSdp: ({userId, answerSdp}) => {\r\n        socket.emit('callAnswerSdp', {userId, answerSdp})\r\n    },\r\n    sendCallIceCandidate: ({userId, candidate}) => {\r\n        socket.emit('callIceCandidate', {userId, candidate})\r\n    },\r\n    toggleCameraCall: (userId, media) => {\r\n        socket.emit('toggleCameraCall', {userId, media})\r\n    }\r\n}\r\n\r\n","import { \r\n    DIALOGS_GET,\r\n    DIALOGS_ADD,\r\n    DIALOGS_ADD_MESSAGE,\r\n    DIALOGS_SUCCESS_MESSAGE,\r\n    DIALOGS_ERROR_MESSAGE,\r\n    DIALOGS_READ_MESSAGES,\r\n    DIALOGS_LOAD,\r\n    DIALOGS_EDIT_MESSAGE,\r\n    DIALOGS_DELETE_MESSAGE,\r\n    DIALOGS_SET_LOADING,\r\n    DIALOGS_LOAD_MESSAGES,\r\n    DIALOGS_UPDATE_ONLINE,\r\n    DIALOGS_SET_FORWARD,\r\n    DIALOGS_PRELOAD\r\n} from '../constants'\r\nimport store from '../store';\r\nimport { randomInteger } from '../../Controllers/FunctionsController';\r\nimport SocketController from '../../Controllers/SocketController';\r\nimport { toast } from 'react-toastify';\r\nimport {urlApi} from '../../config'\r\n\r\nexport const dialogsGet = (apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/dialog/get-all`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        }\r\n    })\r\n    .then((response) => response.json())\r\n    .then((dialogs) => {\r\n        for (let i = 0; i < dialogs.length; i++) {\r\n            let existDialog = store.getState().dialogs.dialogs.find(x => x._id === dialogs[i]._id)\r\n            \r\n            if(existDialog) {\r\n                dialogs[i] = existDialog\r\n            } else {\r\n                dialogs[i].user = dialogs[i].users.find(user => user._id !== store.getState().user._id)\r\n\r\n                if(!dialogs[i].user)\r\n                    dialogs[i].user = dialogs[i].users[0]\r\n\r\n                dialogs[i].typers = []\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: DIALOGS_GET,\r\n            payload: dialogs\r\n        })\r\n    });\r\n}\r\n\r\nexport const dialogsLoad = (apiToken) => (dispatch) => {\r\n    if(store.getState().dialogs.canLoad) {\r\n        dispatch({\r\n            type: DIALOGS_PRELOAD,\r\n            payload: []\r\n        })\r\n\r\n        fetch(`${urlApi}/api/dialog/load`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                lastDialogId: store.getState().dialogs.dialogs[store.getState().dialogs.dialogs.length-1]._id,\r\n                firstDialogId: store.getState().dialogs.dialogs[0]._id\r\n            })\r\n        })\r\n        .then((response) => response.json())\r\n        .then((dialogs) => {\r\n            for (let i = 0; i < dialogs.length; i++) {\r\n                let existDialog = store.getState().dialogs.dialogs.find(x => x._id === dialogs[i]._id)\r\n                \r\n                if(existDialog) {\r\n                    dialogs[i] = existDialog\r\n                } else {\r\n                    dialogs[i].user = dialogs[i].users.find(user => user._id !== store.getState().user._id)\r\n    \r\n                    if(!dialogs[i].user)\r\n                        dialogs[i].user = dialogs[i].users[0]\r\n    \r\n                    dialogs[i].typers = []\r\n                }\r\n            }\r\n            \r\n            dispatch({\r\n                type: DIALOGS_PRELOAD,\r\n                payload: dialogs\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\nexport const dialogGet = (userId, apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/dialog/get`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then(({dialog, messages}) => {\r\n        if(!dialog.error) {\r\n            dialog.user = dialog.users.find(user => user._id !== store.getState().user._id)\r\n\r\n            if(!dialog.user)\r\n                dialog.user = dialog.users[0]\r\n\r\n            dialog.typing = false\r\n\r\n            dialog.getted = true\r\n\r\n            dialog.messages = messages.reverse()\r\n            dialog.lastMessage = false\r\n            dialog.canLoad = messages.length === 50\r\n            dialog.isLoading = false\r\n\r\n            dispatch({\r\n                type: DIALOGS_ADD,\r\n                payload: dialog\r\n            })\r\n        } else {\r\n            let dialog = {\r\n                getted: true,\r\n                isNotFound: true,\r\n                user: {_id: userId}\r\n            }\r\n\r\n            dispatch({\r\n                type: DIALOGS_ADD,\r\n                payload: dialog\r\n            })\r\n        }\r\n    });\r\n}\r\n\r\nexport const dialogLoad = (userId, apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/dialog/get`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then(({dialog, messages}) => {\r\n        dialog.messages = messages.reverse()\r\n\r\n        dispatch({\r\n            type: DIALOGS_LOAD,\r\n            payload: {dialogId: dialog._id, messages: dialog.messages, canLoad: messages.length === 50}\r\n        })\r\n    });\r\n}\r\n\r\nexport const updateOnline = (userId, apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/get-online`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then(({online, onlineAt}) => {\r\n        dispatch({\r\n            type: DIALOGS_UPDATE_ONLINE,\r\n            payload: {userId, online, onlineAt}\r\n        })\r\n    });\r\n}\r\n\r\nexport const setForward = (messages) => (dispatch) => {\r\n    dispatch({\r\n        type: DIALOGS_SET_FORWARD,\r\n        payload: messages\r\n    })\r\n}\r\n\r\nexport const sendMessage = (message, apiToken) => (dispatch) => {\r\n    let formData = new FormData()\r\n    let _id = randomInteger(0, 1000000)\r\n    let images = []\r\n    let files = []\r\n    let sounds = []\r\n\r\n    for (let i = 0; i < message.images.length; i++) {\r\n        formData.append('images'+i, message.images[i].file)\r\n        message.images[i].file = false\r\n        images.push(message.images[i])\r\n    }\r\n\r\n    for (let i = 0; i < message.files.length; i++) {\r\n        formData.append('files'+i, message.files[i].file)\r\n        message.files[i].file = false\r\n        files.push(message.files[i])\r\n    }\r\n\r\n    for (let i = 0; i < message.sounds.length; i++) {\r\n        formData.append('sounds'+i, message.sounds[i].file)\r\n        message.sounds[i].file = false\r\n        sounds.push(message.sounds[i])\r\n    }\r\n\r\n    let localMessage = {\r\n        _id,\r\n        user: store.getState().user,\r\n        text: message.text,\r\n        images,\r\n        sounds,\r\n        files,\r\n        isLoading: true,\r\n        isError: false,\r\n        isRead: false,\r\n        recentMessages: message.recentMessages,\r\n        createdAt: Date.now(),\r\n        type: 'message'\r\n    }\r\n    \r\n    dispatch({\r\n        type: DIALOGS_ADD_MESSAGE,\r\n        payload: {message: localMessage, dialogId: message.dialogId}\r\n    })\r\n\r\n    let recentMessages = []\r\n\r\n    message.recentMessages.map(m => {\r\n        recentMessages.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    message.recentMessages = recentMessages\r\n    message.socketId = SocketController.getSocketId()\r\n\r\n    formData.append('text', message.text)\r\n    formData.append('recentMessages', message.recentMessages)\r\n    formData.append('dialogId', message.dialogId)\r\n    formData.append('userId', message.userId)\r\n    formData.append('socketId', SocketController.getSocketId())\r\n\r\n    fetch(`${urlApi}/api/dialog/send-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                // 'Accept': 'application/json',\r\n                // 'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(messageRes => {\r\n            if(messageRes.error) {\r\n                if(messageRes.errors[0].msg === 'max_size') {\r\n                    toast.error(\"Max file size upload 10 Mb.\", {\r\n                        position: toast.POSITION.TOP_CENTER\r\n                    });\r\n                }\r\n\r\n                return dispatch({\r\n                    type: DIALOGS_ERROR_MESSAGE,\r\n                    payload: {_id, dialogId: message.dialogId}\r\n                })\r\n            }\r\n            dispatch({\r\n                type: DIALOGS_SUCCESS_MESSAGE,\r\n                payload: {_id, _newId: messageRes._id, dialogId: message.dialogId}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            dispatch({\r\n                type: DIALOGS_ERROR_MESSAGE,\r\n                payload: {_id, dialogId: message.dialogId}\r\n            })\r\n        })\r\n}\r\n\r\nexport const editMessage = (message, apiToken) => (dispatch) => {\r\n    let formData = new FormData()\r\n\r\n    let images = []\r\n    let files = []\r\n    let sounds = []\r\n\r\n    let oldImages = []\r\n    let oldFiles = []\r\n    let oldSounds = []\r\n\r\n    for (let i = 0; i < message.images.length; i++) {\r\n        if(message.images[i].file) {\r\n            formData.append('images'+i, message.images[i].file)\r\n\r\n            images.push(message.images[i])\r\n        } else {\r\n            oldImages.push(message.images[i].id)\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < message.files.length; i++) {\r\n        if(message.files[i].file) {\r\n            formData.append('files'+i, message.files[i].file)\r\n\r\n            files.push(message.files[i])\r\n        } else {\r\n            oldFiles.push(message.files[i].id)\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < message.sounds.length; i++) {\r\n        if(message.sounds[i].file) {\r\n            formData.append('sounds'+i, message.sounds[i].file)\r\n\r\n            sounds.push(message.sounds[i])\r\n        } else {\r\n            oldSounds.push(message.sounds[i].id)\r\n        }        \r\n    }\r\n\r\n    let localMessage = {\r\n        _id: message._id,\r\n        user: store.getState().user,\r\n        text: message.text,\r\n        images: message.images,\r\n        sounds: message.sounds,\r\n        files: message.files,\r\n        isLoading: true,\r\n        isError: false,\r\n        recentMessages: message.recentMessages,\r\n    }\r\n\r\n    let last = store.getState().dialogs.dialogs.find(x => x._id === message.dialogId).messages[store.getState().dialogs.dialogs.find(x => x._id === message.dialogId).messages.length-1]\r\n    \r\n    dispatch({\r\n        type: DIALOGS_EDIT_MESSAGE,\r\n        payload: {\r\n            message: localMessage, \r\n            dialogId: message.dialogId, \r\n            editLast: last._id === message._id\r\n        }\r\n    })\r\n\r\n    let recentMessages = []\r\n\r\n    message.recentMessages.map(m => {\r\n        recentMessages.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    message.recentMessages = recentMessages\r\n    message.socketId = SocketController.getSocketId()\r\n    \r\n    formData.append('_id', message._id)\r\n    formData.append('text', message.text)\r\n    formData.append('recentMessages', message.recentMessages)\r\n    formData.append('userId', message.userId)\r\n    formData.append('dialogId', message.dialogId)\r\n    formData.append('socketId', SocketController.getSocketId())\r\n    formData.append('oldImages', oldImages)\r\n    formData.append('oldSounds', oldSounds)\r\n    formData.append('oldFiles', oldFiles)\r\n\r\n    fetch(`${urlApi}/api/dialog/edit-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(messageRes => {\r\n            if(messageRes.error) {\r\n                if(messageRes.errors[0].msg === 'max_size') {\r\n                    toast.error(\"Max file size upload 10 Mb.\", {\r\n                        position: toast.POSITION.TOP_CENTER\r\n                    });\r\n                }\r\n                return dispatch({\r\n                    type: DIALOGS_ERROR_MESSAGE,\r\n                    payload: {_id: message._id, dialogId: message.dialogId}\r\n                })\r\n            }\r\n            dispatch({\r\n                type: DIALOGS_SUCCESS_MESSAGE,\r\n                payload: {_id: message._id, _newId: message._id, dialogId: message.dialogId}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            dispatch({\r\n                type: DIALOGS_ERROR_MESSAGE,\r\n                payload: {_id: message._id, dialogId: message.dialogId}\r\n            })\r\n        })\r\n}\r\n\r\nexport const readMessages = ({dialogId, userId, otherId}, apiToken) => (dispatch) => {\r\n    let readMessages = store.getState().dialogs.dialogs.find(dialog => dialog._id === dialogId).messages.filter(x => !x.isRead && x.user._id !== userId)\r\n\r\n    setTimeout(() => {\r\n        if(!!readMessages.length) {\r\n            dispatch({\r\n                type: DIALOGS_READ_MESSAGES,\r\n                payload: {dialogId, userId: otherId, noRead: true, noReadCount: true}\r\n            })\r\n        }\r\n    }, 1)\r\n\r\n    if(!!readMessages.length) {\r\n        fetch(`${urlApi}/api/dialog/read-messages`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${apiToken}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    dialogId,\r\n                    otherId,\r\n                    socketId: SocketController.getSocketId()\r\n                })\r\n            })\r\n            .then()\r\n            .catch(() => {\r\n                \r\n            })\r\n    }\r\n}\r\n\r\nexport const retrySendMessage = (message, apiToken) => (dispatch) => {\r\n    let dialogId = message.dialogId\r\n    let formData = new FormData()\r\n    let images = []\r\n\r\n    let localMessage = {\r\n        _id: message._id,\r\n        user: store.getState().user,\r\n        text: message.text,\r\n        images: message.images,\r\n        sounds: [],\r\n        files: [],\r\n        isLoading: true,\r\n        isError: false,\r\n        recentMessages: message.recentMessages,\r\n        createdAt: Date.now(),\r\n        type: 'message'\r\n    }\r\n\r\n    dispatch({\r\n        type: DIALOGS_DELETE_MESSAGE,\r\n        payload: {dialogId, messageIds: [message._id], lastMessage: false}\r\n    })\r\n\r\n    dispatch({\r\n        type: DIALOGS_ADD_MESSAGE,\r\n        payload: {message: localMessage, dialogId: message.dialogId}\r\n    })\r\n\r\n    for (let i = 0; i < message.images.length; i++) {\r\n        formData.append('images'+i, message.images[i].file)\r\n\r\n        images.push(message.images[i].path)\r\n    }\r\n\r\n    let recentMessages = []\r\n\r\n    message.recentMessages.map(m => {\r\n        recentMessages.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    message.recentMessages = recentMessages\r\n    message.socketId = SocketController.getSocketId()\r\n\r\n    formData.append('text', message.text)\r\n    formData.append('recentMessages', message.recentMessages)\r\n    formData.append('userId', message.userId)\r\n    formData.append('dialogId', message.dialogId)\r\n    formData.append('socketId', SocketController.getSocketId())\r\n\r\n    fetch(`${urlApi}/api/dialog/send-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                // 'Accept': 'application/json',\r\n                // 'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(messageRes => {\r\n            if(messageRes.error) {\r\n                return dispatch({\r\n                    type: DIALOGS_ERROR_MESSAGE,\r\n                    payload: {_id: message._id, dialogId: message.dialogId}\r\n                })\r\n            }\r\n            dispatch({\r\n                type: DIALOGS_SUCCESS_MESSAGE,\r\n                payload: {_id: message._id, _newId: messageRes._id, dialogId: message.dialogId}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            dispatch({\r\n                type: DIALOGS_ERROR_MESSAGE,\r\n                payload: {_id: message._id, dialogId: message.dialogId}\r\n            })\r\n        })\r\n}\r\n\r\nexport const deleteMessage = ({dialogId, otherId, deleteMessages}, apiToken) => (dispatch) => {\r\n    let messageIds = []\r\n    deleteMessages.map(m => {\r\n        messageIds.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    let lastMessage\r\n\r\n    if(store.getState().dialogs.dialogs.find(x => x._id === dialogId) && !!store.getState().dialogs.dialogs.find(x => x._id === dialogId).messages.length)\r\n        lastMessage = store.getState().dialogs.dialogs.find(x => x._id === dialogId).messages.filter(x => !messageIds.find(y => y === x._id)).pop()\r\n    else \r\n        lastMessage = false\r\n\r\n    dispatch({\r\n        type: DIALOGS_DELETE_MESSAGE,\r\n        payload: {dialogId, messageIds, lastMessage}\r\n    })\r\n\r\n    fetch(`${urlApi}/api/dialog/delete-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                dialogId,\r\n                otherId,\r\n                messageIds,\r\n                socketId: SocketController.getSocketId()\r\n            })\r\n        })\r\n        .then()\r\n        .catch(() => {\r\n            \r\n        })\r\n}\r\n\r\nexport const deleteLocalMessage = (_id, dialogId) => (dispatch) => {\r\n    let messageIds = [_id]\r\n\r\n    let lastMessage\r\n    if(store.getState().dialogs.dialogs.find(x => x._id === dialogId) && !!store.getState().dialogs.dialogs.find(x => x._id === dialogId).messages.length)\r\n        lastMessage = store.getState().dialogs.dialogs.find(x => x._id === dialogId).messages.filter(x => !messageIds.find(y => y === x._id)).pop()\r\n    else \r\n        lastMessage = false\r\n\r\n    dispatch({\r\n        type: DIALOGS_DELETE_MESSAGE,\r\n        payload: {dialogId, messageIds, lastMessage}\r\n    })\r\n}\r\n\r\nexport const loadMessages = ({dialogId}, apiToken) => (dispatch) => {\r\n    let lastMessage = store.getState().dialogs.dialogs.find(x => x._id === dialogId).messages[0]\r\n\r\n    dispatch({\r\n        type: DIALOGS_SET_LOADING,\r\n        payload: dialogId\r\n    })\r\n\r\n    fetch(`${urlApi}/api/dialog/load-messages`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                dialogId,\r\n                lastMessageId: lastMessage._id\r\n            })\r\n        }) \r\n        .then(response => response.json())\r\n        .then(messages => {\r\n            dispatch({\r\n                type: DIALOGS_LOAD_MESSAGES,\r\n                payload: {dialogId,  messages: messages.reverse(), canLoad: messages.length  === 50}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            \r\n        })\r\n}","export default {\r\n    ru: {\r\n        settings: '',\r\n        change_profile: ' ',\r\n        language: '',\r\n        logout: '',\r\n        back: '',\r\n        save: '',\r\n        next: '',\r\n        firstName: '',\r\n        lastName: '',\r\n        city: '',\r\n        last_name_not_empty: '    ',\r\n        first_name_not_empty: '    ',\r\n        title_not_empty: '    ',\r\n        rooms: '',\r\n        create_room: ' ',\r\n        something_goes_wrong: '-   ...',\r\n        chats: '',\r\n        notifications: '',\r\n        contacts: '',\r\n        friends: '',\r\n        inbox: '',\r\n        outbox: '',\r\n        you_dont_have_friends: '   ,   ',\r\n        search: '',\r\n        message: '',\r\n        call: '',\r\n        accept: '',\r\n        decline: '',\r\n        not_indicated: ' ',\r\n        plus_friend: '+ ',\r\n        remove: \"\",\r\n        english: '',\r\n        russian: '',\r\n        you: '',\r\n        write_message: ' ...',\r\n        show_investments: ' ',\r\n        you_sure: ' ?',\r\n        delete: '',\r\n        delete_room: ' ',\r\n        invite_friends: ' ',\r\n        edit_room: ' ',\r\n        investments: '',\r\n        photos: '',\r\n        sounds: '',\r\n        files: '',\r\n        online: '',\r\n        missed_call: ' ',\r\n        outcoming_call: ' ',\r\n        incoming_call: ' ',\r\n        canceled_call: ' ',\r\n        select_language: ' ',\r\n        users_not_found: '  ',\r\n        user_not_found: '  ',\r\n        reply: '',\r\n        forward: '',\r\n        title: '',\r\n        new_room: ' ',\r\n        invite: '',\r\n        private_room: ' ',\r\n        start: '',\r\n        select_users: ' ',\r\n        new_chat: ' ',\r\n        invited_you_to_the_room: '()   ',\r\n        accept_your_friend_request: '()    ',\r\n        send_you_friend_request: '()    ',\r\n        january: '',\r\n        february: '',\r\n        march: '',\r\n        april: '',\r\n        may: '',\r\n        june: '',\r\n        july: '',\r\n        august: '',\r\n        september: '',\r\n        october: '',\r\n        november: '',\r\n        december: '',\r\n        jan: '',\r\n        feb: '',\r\n        mar: '',\r\n        apr: '',\r\n        jun: '',\r\n        jul: '',\r\n        aug: '',\r\n        sep: '',\r\n        oct: '',\r\n        nov: '',\r\n        dec: '',\r\n        in: '',\r\n        yerstaday: '',\r\n        today: '',\r\n        just_now: ' ',\r\n        here_wiil_placed_your_notifications: '    ',\r\n        create_your_first_room: '      ',\r\n        you_dont_have_chats: '   ,   ',\r\n        write_your_first_message: '    ',\r\n        typing: '',\r\n        attachment_messages: ' ',\r\n        messages: ''\r\n    },\r\n    en: {\r\n        settings: 'Settings',\r\n        change_profile: 'Change profile',\r\n        language: 'Language',\r\n        logout: 'Logout',\r\n        back: 'Back',\r\n        save: 'Save',\r\n        next: 'Next',\r\n        firstName: 'First name',\r\n        lastName: 'Last name',\r\n        city: 'City',\r\n        last_name_not_empty: 'First name cannot be empty',\r\n        first_name_not_empty: 'Last name cannot be empty',\r\n        title_not_empty: 'Title cannot be empty',\r\n        rooms: 'Rooms',\r\n        create_room: 'Create room',\r\n        something_goes_wrong: 'Something goes wrong...',\r\n        chats: 'Chats',\r\n        notifications: 'Notifications',\r\n        contacts: 'Contacts',\r\n        friends: 'Friends',\r\n        inbox: 'Inbox',\r\n        outbox: 'Outbox',\r\n        you_dont_have_friends: 'You dont have friends, lets add him',\r\n        search: 'Search',\r\n        message: 'Message',\r\n        call: 'Call',\r\n        accept: 'Accept',\r\n        decline: 'Decline',\r\n        not_indicated: 'Not indicated',\r\n        plus_friend: '+ Friend',\r\n        remove: \"Remove\",\r\n        english: 'English',\r\n        russian: 'Russian',\r\n        you: 'You',\r\n        write_message: 'Write message...',\r\n        show_investments: 'Show investments',\r\n        outcoming_call: 'Outcoming call',\r\n        incoming_call: 'Incoming call',\r\n        online: 'online',\r\n        invite: 'Invite',\r\n        delete_room: 'Delete room',\r\n        invite_friends: 'Invite friends',\r\n        edit_room: 'Edit room',\r\n        you_sure: 'You sure?',\r\n        delete: 'Delete',\r\n        investments: 'Investments',\r\n        photos: 'Photos',\r\n        sounds: 'Sounds',\r\n        files: 'Files',\r\n        missed_call: 'Missed call',\r\n        canceled_call: 'Canceled call',\r\n        select_language: 'Select language',\r\n        users_not_found: 'Users not found',\r\n        user_not_found: 'User not found',\r\n        reply: 'Reply',\r\n        forward: 'Forward',\r\n        title: 'Title',\r\n        new_room: 'New room',\r\n        private_room: 'Private room',\r\n        start: 'Start',\r\n        select_users: 'Select users',\r\n        new_chat: 'New chat',\r\n        invited_you_to_the_room: 'Invited you to the room',\r\n        accept_your_friend_request: 'Accept your friend request',\r\n        send_you_friend_request: 'Send you friend request',\r\n        january: 'January',\r\n        february: 'February',\r\n        march: 'March',\r\n        april: 'April',\r\n        may: 'May',\r\n        june: 'June',\r\n        july: 'July',\r\n        august: 'August',\r\n        september: 'September',\r\n        october: 'October',\r\n        november: 'November',\r\n        december: 'December',\r\n        jan: 'Jan',\r\n        feb: 'Feb',\r\n        mar: 'Mar',\r\n        apr: 'Apr',\r\n        jun: 'Jun',\r\n        jul: 'Jul',\r\n        aug: 'Aug',\r\n        sep: 'Sep',\r\n        oct: 'Oct',\r\n        nov: 'Nov',\r\n        dec: 'Dec',\r\n        in: 'in',\r\n        yerstaday: 'yerstaday',\r\n        today: 'Today',\r\n        just_now: 'just now',\r\n        here_wiil_placed_your_notifications: 'Here will placed your notifications',\r\n        create_your_first_room: 'Create your first room in this language',\r\n        you_dont_have_chats: 'You dont have chats, lets create new',\r\n        write_your_first_message: 'Write your first message to',\r\n        typing: 'typing',\r\n        attachment_messages: 'Attachment messages',\r\n        messages: 'Messages'\r\n    }\r\n}","import languages from \"../languages\";\r\nimport store from \"../Redux/store\";\r\n\r\nexport function getHM(date) {\r\n    var time = new Date(date)\r\n\r\n    var hours = time.getHours()\r\n    var minutes = time.getMinutes()\r\n\r\n    if (minutes.toString().length === 1) {\r\n        minutes = \"0\" + minutes;\r\n    }\r\n    if (hours.toString().length === 1) {\r\n        hours = \"0\" + hours;\r\n    }\r\n\r\n    return hours + \":\" + minutes\r\n}\r\n\r\nexport function timeAt(date) {\r\n    let lang = store.getState().user.lang\r\n    var time = new Date(date)\r\n\r\n    var day_diff = new Date().getDate() - time.getDate(),\r\n        year_diff = new Date().getFullYear() - time.getFullYear();\r\n    var year = time.getFullYear(),\r\n        month = time.getMonth()+1,\r\n        day = time.getDate();\r\n        \r\n    if (year_diff > 0)\r\n        return (\r\n            year.toString()+'.'\r\n            +((month<10) ? '0'+month.toString() : month.toString())+'.'\r\n            +((day<10) ? '0'+day.toString() : day.toString())\r\n        );\r\n\r\n    var arr=[\r\n        languages[lang].january,\r\n        languages[lang].february,\r\n        languages[lang].march,\r\n        languages[lang].april,\r\n        languages[lang].may,\r\n        languages[lang].june,\r\n        languages[lang].july,\r\n        languages[lang].august,\r\n        languages[lang].september,\r\n        languages[lang].october,\r\n        languages[lang].november,\r\n        languages[lang].december\r\n    ];\r\n\r\n    var r =\r\n    ( \r\n        (\r\n            day_diff === 0 && languages[lang].today\r\n        )\r\n        || (day_diff === 1 && languages[lang].yerstaday)\r\n        || (year_diff === 0 && day + ' ' + arr[month-1])\r\n    );\r\n    return r;\r\n}\r\n\r\nexport function LastMessageDate(timeR) {\r\n    let lang = store.getState().user.lang\r\n    var time = new Date(timeR)\r\n\r\n    var hours = time.getHours()\r\n    var minutes = time.getMinutes()\r\n\r\n    if (minutes.toString().length === 1) {\r\n        minutes = \"0\" + minutes;\r\n    }\r\n    if (hours.toString().length === 1) {\r\n        hours = \"0\" + hours;\r\n    }\r\n\r\n    var day_diff = new Date().getDate() - time.getDate(),\r\n        year_diff = new Date().getFullYear() - time.getFullYear();\r\n    var year = time.getFullYear(),\r\n        month = time.getMonth()+1,\r\n        day = time.getDate();\r\n        \r\n    if (year_diff > 0)\r\n        return (\r\n            year.toString()+'.'\r\n            +((month<10) ? '0'+month.toString() : month.toString())+'.'\r\n            +((day<10) ? '0'+day.toString() : day.toString())\r\n        );\r\n\r\n    var arr=[\r\n        languages[lang].jan,\r\n        languages[lang].feb,\r\n        languages[lang].mar,\r\n        languages[lang].apr,\r\n        languages[lang].may,\r\n        languages[lang].jun,\r\n        languages[lang].jul,\r\n        languages[lang].aug,\r\n        languages[lang].sep,\r\n        languages[lang].oct,\r\n        languages[lang].nov,\r\n        languages[lang].dec,\r\n    ];\r\n\r\n    var r =\r\n    ( \r\n        (\r\n            day_diff === 0 && \r\n            (hours + ':' +  minutes)\r\n        )\r\n        || (day_diff === 1 && languages[lang].yerstaday)\r\n        || (year_diff === 0 && day + ' ' + arr[month-1])\r\n    );\r\n\r\n    return r;\r\n}\r\n\r\nexport function OnlineDate(timeR) {\r\n    let lang = store.getState().user.lang\r\n    var time = new Date(timeR)\r\n\r\n    var hours = time.getHours()\r\n    var minutes = time.getMinutes()\r\n\r\n    if (minutes.toString().length === 1) {\r\n        minutes = \"0\" + minutes;\r\n    }\r\n    if (hours.toString().length === 1) {\r\n        hours = \"0\" + hours;\r\n    }\r\n\r\n    var diff = (((new Date()).getTime() - time.getTime()) / 1000),\r\n        day_diff = new Date().getDay() - time.getDay();\r\n     var   month_diff = (new Date().getMonth()+1) - (time.getMonth()+1)\r\n    var year = time.getFullYear(),\r\n        month = time.getMonth()+1,\r\n        day = time.getDate();\r\n\r\n    if (isNaN(day_diff) || day_diff < 0 || month_diff >= 1 )\r\n        return (\r\n            year.toString()+'.'\r\n            +((month<10) ? '0'+month.toString() : month.toString())+'.'\r\n            +((day<10) ? '0'+day.toString() + ' in ' + hours + ':' +  minutes : day.toString() + ' in ' + hours + ':' +  minutes)\r\n        );\r\n    \r\n        \r\n    var r =\r\n    ( \r\n        (\r\n            day_diff === 0 && \r\n            (\r\n                (diff < 60 && languages[lang].just_now)\r\n                || (diff < 120 && '1 minute ago')\r\n                || (diff < 3600 && Math.floor(diff / 60) + 'minutes ago')\r\n                || (diff < 7200 && '1 hour ago')\r\n                || (diff < 86400 && Math.floor(diff / 3600) + 'hours ago')\r\n            )\r\n        )\r\n        || (day_diff === 1 && languages[lang].yerstaday + languages[lang].in + hours + ':' +  minutes)\r\n        || (day_diff < 7 && day_diff + 'days ago' + languages[lang].in + hours + ':' +  minutes)\r\n        || (day_diff < 31 && Math.ceil(day_diff / 7) + 'weeks ago' + languages[lang].in + hours + ':' +  minutes)\r\n    );\r\n    return r;\r\n}","import React from 'react'\r\n\r\n// Material\r\nimport Button from '@material-ui/core/Button';\r\n\r\n// Icons\r\n\r\n\r\nclass ActionMenu extends React.Component {\r\n    state = {\r\n        active: false,\r\n        left: 0,\r\n        top: 0\r\n    }\r\n\r\n    toggleActive(e) {\r\n        let element = document.getElementById(this.props.from)\r\n        if(element) {\r\n            let find = false\r\n            if(e.path.find(x => x.id === this.props.from)) {\r\n                e.stopPropagation()\r\n                find = true\r\n            }\r\n            \r\n            let rect = element.getBoundingClientRect()\r\n\r\n            let top\r\n            let left\r\n            if(this.props.bottom) {\r\n                top = rect.y + element.clientHeight\r\n                left = rect.x\r\n                if(this.props.right)\r\n                    left = rect.x+element.clientWidth\r\n            }\r\n            else {\r\n                top = rect.y\r\n                left = rect.x+element.clientWidth\r\n            }\r\n            \r\n            this.setState({left, top})\r\n            if((this.props.event === 'click' && (this.state.active || find)) || this.props.event === 'hover')\r\n                this.setState({active: !this.state.active})\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.props.event === 'hover') {\r\n            document.getElementById(this.props.from).addEventListener('mouseenter', this.toggleActive.bind(this))\r\n            document.getElementById(this.props.from).addEventListener('mouseleave', this.toggleActive.bind(this))\r\n        }\r\n        if(this.props.event === 'click') {\r\n            document.getElementById(this.props.from).addEventListener('click', this.toggleActive.bind(this))\r\n            document.body.addEventListener('click', this.toggleActive.bind(this))\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if(this.props.event === 'hover') {\r\n            document.getElementById(this.props.from).removeEventListener('mouseenter', this.toggleActive.bind(this))\r\n            document.getElementById(this.props.from).removeEventListener('mouseleave', this.toggleActive.bind(this))\r\n        }\r\n        if(this.props.event === 'click') {\r\n            document.getElementById(this.props.from).removeEventListener('click', this.toggleActive.bind(this))\r\n            document.body.removeEventListener('click', this.toggleActive.bind(this))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={{left: this.state.left, top: this.state.top, transform: this.props.bottom ? this.props.right ? 'translateX(-100%)' : 'none' : null}} className={`action-menu-container ${this.state.active ? 'active' : ''}`}>\r\n                <div className={`action-menu`}>\r\n                    {this.props.actions.map((action, index) => {\r\n                        return action ? <Button key={index} onClick={() => {action.action()}} className=\"action-button\">{action.text}</Button> : null\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ActionMenu","// App\r\nimport React from 'react'\r\n\r\nimport Avatar from '../User/Avatar'\r\nimport { CSSTransitionGroup } from 'react-transition-group';\r\nimport '../../Css/Partials/RoomItem.css'\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\n\r\n// Material\r\nimport Button from '@material-ui/core/Button';\r\nimport { LastMessageDate } from '../../Controllers/TimeController';\r\nimport { connect } from 'react-redux';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\nimport QueryBuilderIcon from '@material-ui/icons/QueryBuilder';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\n\r\nimport * as dialogsActions from '../../Redux/actions/dialogs'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport ActionMenu from '../ActionMenu'\r\nimport { randomInteger } from '../../Controllers/FunctionsController';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\nclass DialogItem extends React.Component {\r\n    state = {\r\n        randomId: randomInteger(0, 100000)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <NavLink style={{textDecoration: 'none'}} onClick={(e) => {\r\n                if(`/chats/${this.props.user._id}` === this.props.history.location.pathname)\r\n                    e.preventDefault()\r\n            }} className=\"dialog-link\" to={`/chats/${this.props.user._id}`}>\r\n                <Button className={`dialog-item`}>\r\n                    <Avatar \r\n                        avatar={this.props.user.avatar ? this.props.user.avatar : false}\r\n                        online={this.props.user.online} \r\n                        style={{minWidth: 40, maxWidth: 40, height: 40, fontSize: 14, fontWeight: 600, backgroundColor: `rgb(${this.props.user.color})`}} \r\n                        name={this.props.user.name.first.charAt(0) + this.props.user.name.last.charAt(0)} \r\n                    />\r\n\r\n                    <div style={{\r\n                        flexGrow: 1,\r\n                        minWidth: 0,\r\n                        maxWidth: '100%',\r\n                        paddingRight: 10\r\n                    }}>\r\n                        <p className=\"user-name\"><span>{`${this.props.user.name.first} ${this.props.user.name.last}`}</span></p>\r\n                        {!this.props.typing && <p className=\"last-message\">\r\n                            {this.props.lastMessage.user._id === this.props.myUser._id && <span style={{color: '#999999'}}>{this.props.langProps.you}:&nbsp;</span>}\r\n                            {this.props.lastMessage.text && <span className=\"content\">{this.props.lastMessage.type === 'call' ? this.props.langProps[this.props.lastMessage.text] : this.props.lastMessage.text}</span>}\r\n                            \r\n                            {!this.props.lastMessage.text && \r\n                            this.props.lastMessage.images.length === 1 && \r\n                                <><span  className=\"content\" style={{color: '#008FF7'}}>{this.props.lastMessage.images[0].name}</span></>\r\n                            }\r\n\r\n                            {!this.props.lastMessage.text && \r\n                            this.props.lastMessage.images.length > 1 && \r\n                                <><span  className=\"content\" style={{color: '#008FF7'}}>{this.props.langProps.photos} [{this.props.lastMessage.images.length}]</span></>\r\n                            }\r\n\r\n                            {!this.props.lastMessage.text && \r\n                            !this.props.lastMessage.images.length && \r\n                            this.props.lastMessage.sounds.length === 1 &&\r\n                                <><span  className=\"content\" style={{color: '#008FF7'}}>{this.props.lastMessage.sounds[0].name}</span></>\r\n                            }\r\n\r\n                            {!this.props.lastMessage.text && \r\n                            !this.props.lastMessage.images.length && \r\n                            this.props.lastMessage.sounds.length > 1 &&\r\n                                <><span className=\"content\" style={{color: '#008FF7'}}>{this.props.langProps.sounds} [{this.props.lastMessage.sounds.length}]</span></>\r\n                            }\r\n\r\n                            {!this.props.lastMessage.text && \r\n                            !this.props.lastMessage.images.length && \r\n                            !this.props.lastMessage.sounds.length &&\r\n                            this.props.lastMessage.files.length === 1 &&\r\n                                <><span className=\"content\" style={{color: '#008FF7'}}>{this.props.lastMessage.files[0].name}</span></>\r\n                            }\r\n\r\n                            {!this.props.lastMessage.text && \r\n                            !this.props.lastMessage.images.length && \r\n                            !this.props.lastMessage.sounds.length &&\r\n                            this.props.lastMessage.files.length > 1 &&\r\n                                <><span className=\"content\" style={{color: '#008FF7'}}>{this.props.langProps.files} [{this.props.lastMessage.files.length}]</span></>\r\n                            }\r\n\r\n                            {!this.props.lastMessage.text && \r\n                            !this.props.lastMessage.images.length && \r\n                            !this.props.lastMessage.sounds.length &&\r\n                            !this.props.lastMessage.files.length &&\r\n                            !!this.props.lastMessage.recentMessages.length &&\r\n                                <><span className=\"content\" style={{color: '#008FF7'}}>Attachment messages [{this.props.lastMessage.recentMessages.length}]</span></>\r\n                            }\r\n                        </p>}\r\n                        {this.props.typing && <p className=\"last-message typing\">typing</p>}\r\n                    </div>\r\n                    <div className=\"dialog-info\">\r\n                        <span className=\"time-at\">{LastMessageDate(this.props.lastMessage.createdAt)}</span>\r\n                        <CSSTransitionGroup \r\n                    transitionName=\"message-status-transition\"\r\n                    transitionEnterTimeout={100}\r\n                    transitionLeaveTimeout={100}>\r\n                        {(this.props.lastMessage.user._id === this.props.myUser._id && !this.props.lastMessage.isError && this.props.lastMessage.isLoading) && <QueryBuilderIcon style={{marginTop: 2, fontSize: 16, color: '#B8C3CF'}} />}\r\n                        {(this.props.lastMessage.user._id === this.props.myUser._id && !this.props.lastMessage.isError && !this.props.lastMessage.isLoading && !this.props.lastMessage.isRead) && <DoneIcon style={{marginTop: 2, fontSize: 16, color: '#B8C3CF'}} />}\r\n                        {(this.props.lastMessage.user._id === this.props.myUser._id && !this.props.lastMessage.isError && !this.props.lastMessage.isLoading && this.props.lastMessage.isRead) && <DoneAllIcon style={{marginTop: 2, fontSize: 16, color: '#008FF7'}} />}\r\n                        {(this.props.lastMessage.user._id !== this.props.myUser._id && !!this.props.noRead) && <span className=\"unread-messages-count\">{this.props.noRead}</span>}\r\n                        {(this.props.lastMessage.user._id !== this.props.myUser._id && !this.props.noRead) && <span style={{height: 18}}></span>}\r\n                        {(this.props.lastMessage.user._id === this.props.myUser._id && !this.props.lastMessage.isLoading && this.props.lastMessage.isError) && <>\r\n                            <ActionMenu event=\"hover\" actions={[\r\n                                {text: 'Retry', action: () => {\r\n                                    let message = this.props.lastMessage\r\n                                    message.userId = this.props.user._id\r\n                                    message.dialogId = this.props.dialogId\r\n                                    this.props.dialogsActions.retrySendMessage(message, this.props.myUser.apiToken)\r\n                                }},\r\n                                {text: 'Delete', action: () => {\r\n                                    this.props.dialogsActions.deleteLocalMessage(this.props.lastMessage._id, this.props.dialogId)\r\n                                }},\r\n                            ]} from={'message-error-actions-'+this.state.randomId} />\r\n                            <ErrorOutlineIcon className='error' id={'message-error-actions-'+this.state.randomId} style={{marginTop: 2, fontSize: 16, color: '#FF3333'}} />\r\n                        </>}\r\n                        </CSSTransitionGroup>\r\n                    </div>\r\n                </Button>\r\n            </NavLink>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        myUser: state.user,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dialogsActions: bindActionCreators(dialogsActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(DialogItem)))","// App\r\nimport React from 'react'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\nimport {PageSettings} from '../Pages/PageSettings'\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as dialogsActions from '../Redux/actions/dialogs'\r\nimport { bindActionCreators } from 'redux'\r\n\r\n// Material\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { withStyles, Tooltip } from '@material-ui/core'\r\nimport showLoading from '../Partials/Loading'\r\nimport DialogItem from '../Partials/Dialog/DialogItem';\r\nimport { withRouter } from 'react-router-dom';\r\nimport ChatBubbleIcon from '@material-ui/icons/ChatBubble';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#008FF7',\r\n        position: 'absolute',\r\n        bottom: 20,\r\n        right: 20,\r\n        '&:hover': {\r\n            backgroundColor: '#008FF7',\r\n        }\r\n    }\r\n})\r\n\r\nconst CustomFab = withStyles(fabStyles)(Fab);\r\n\r\nclass Messages extends React.Component {\r\n    static contextType = PageSettings;\r\n\r\n    state = {\r\n        showBtnAdd: true,\r\n        scrollTop: 0\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.context.toggleHeader(true)\r\n\r\n        // if(!this.props.dialogs.getted) {\r\n        //     this.props.dialogsActions.dialogsGet(this.props.user.apiToken)\r\n        // }\r\n    }\r\n\r\n    onScroll() {\r\n        if(this.state.scrollTop < this.messagesBlock.getScrollTop()) {\r\n            if(this.state.showBtnAdd)\r\n                this.setState({showBtnAdd: false})\r\n        } else {\r\n            if(!this.state.showBtnAdd)\r\n                this.setState({showBtnAdd: true})\r\n        }\r\n\r\n        if((this.messagesBlock.getScrollHeight() - (this.messagesBlock.getClientHeight() + this.messagesBlock.getScrollTop())) === 0) {\r\n            this.props.dialogsActions.dialogsLoad(this.props.user.apiToken)\r\n        }\r\n\r\n        this.setState({scrollTop: this.messagesBlock.getScrollTop()})\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if(nextState.scrollTop !== this.state.scrollTop) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.context.toggleHeader(false)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <> \r\n                <div className=\"col-xl-3 col-lg-6 col-md-6 sidebar\" style={{overflow: 'hidden'}}>\r\n                    <h2 className=\"sidebar-title\">{this.props.langProps.chats}</h2>\r\n\r\n                    <Scrollbars\r\n                        ref={(ref) => {this.messagesBlock = ref}}\r\n                        renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                        renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                        className=\"scroll\"\r\n                        onScroll={() => {this.onScroll()}}\r\n                        style={{height: 'calc(100% - 78px)'}}\r\n                        autoHide\r\n                    >\r\n                        {this.props.dialogs.isFetching && showLoading(<div className=\"room-item\">\r\n                            <Skeleton variant=\"circle\" width={40} height={40} />\r\n                            <Skeleton variant=\"text\" style={{marginLeft: 12, flex: '1 1'}} />\r\n                        </div>)}\r\n                        {this.props.dialogs.dialogs.map((dialog, index) => {\r\n                            return dialog.lastMessage && (\r\n                                <DialogItem key={index} dialogId={dialog._id} typing={dialog.typing} noRead={dialog.noRead} lastMessage={dialog.lastMessage} user={dialog.user} />\r\n                            )\r\n                        })}\r\n                    </Scrollbars>\r\n\r\n                    {!this.props.dialogs.dialogs.find(x => x.lastMessage) && <div className=\"data-empty\">\r\n                        <ChatBubbleIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                        <p>{this.props.langProps.you_dont_have_chats}</p>\r\n                    </div>}\r\n\r\n                    <Tooltip title=\"Create dialog\" className={`scroll-to-bottom ${this.state.showBtnAdd ? 'active' : ''}`} placement=\"top\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.history.push({\r\n                                search: \"?act=newChat\"\r\n                            })\r\n                        }}>\r\n                            <AddIcon />\r\n                        </CustomFab>\r\n                    </Tooltip>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms,\r\n        dialogs: state.dialogs\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dialogsActions: bindActionCreators(dialogsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Messages)))\r\n","import React from 'react'\r\n\r\nexport default function showLoading(element) {\r\n    return <>\r\n        {element}\r\n        {element}\r\n        {element}\r\n        {element}\r\n        {element}\r\n        {element}\r\n        {element}\r\n        {element}\r\n        {element}\r\n        {element}\r\n    </>\r\n}","// App\r\nimport React from 'react'\r\n\r\nimport Avatar from '../User/Avatar'\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport '../../Css/Partials/RoomItem.css'\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Material\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass RoomItem extends React.Component {\r\n    render() {\r\n        return (\r\n            <Link style={{textDecoration: 'none'}} to={`/rooms/${this.props.room._id}`}>\r\n                <Button className=\"room-item\" title={`Room ${this.props.room.title}`}>\r\n                    <Avatar style={{minWidth: 40, maxWidth: 40, height: 40, fontSize: 14, fontWeight: 600, backgroundColor: `rgb(${this.props.room.color})`}} name={this.props.room.title.charAt(0)} />\r\n                    <div style={{\r\n                        flexGrow: 1,\r\n                        minWidth: 0,\r\n                        maxWidth: '100%',\r\n                        paddingRight: 10\r\n                    }}>\r\n                        <p>{this.props.room.isPrivate && <LockOutlinedIcon />}<span>{this.props.room.title}</span></p>\r\n                        <div className=\"users\" style={{overflow: 'hidden'}}>\r\n                            {this.props.room.users.map((user, index) => \r\n                                <Avatar key={index} avatar={user.avatar ? user.avatar : false} style={{minWidth: 16, maxWidth: 16, height: 16, fontSize: 8, backgroundColor: `rgb(${user.color})`}} name={user.name.first.charAt(0)+user.name.last.charAt(0)} />\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </Button>\r\n            </Link>\r\n        )\r\n    }\r\n}\r\n\r\nexport default RoomItem","import { \r\n    ROOMS_GET,\r\n    ROOMS_ADD,\r\n    ROOMS_JOIN_ROOM,\r\n    ROOMS_LEAVE_ROOM,\r\n    ROOMS_ADD_MESSAGE,\r\n    ROOMS_SUCCESS_MESSAGE,\r\n    ROOMS_ERROR_MESSAGE,\r\n    ROOMS_EDIT_MESSAGE,\r\n    ROOMS_JOIN_ERROR,\r\n    ROOMS_DELETE_MESSAGE,\r\n    ROOMS_READ_MESSAGES,\r\n    ROOMS_LOAD_MESSAGES,\r\n    ROOMS_SET_LOADING,\r\n    ROOMS_GET_ERROR,\r\n    ROOMS_SET_GET,\r\n    ROOMS_PRELOAD,\r\n    ROOMS_SET_MUTED\r\n} from '../constants'\r\nimport SocketController from '../../Controllers/SocketController';\r\nimport store from '../store';\r\nimport WebRtcController from '../../Controllers/WebRtcController'\r\nimport { randomInteger, setForceTitle } from '../../Controllers/FunctionsController';\r\nimport {urlApi} from '../../config'\r\nimport { toast } from 'react-toastify';\r\n\r\nlet unmuteTimer = false\r\n\r\nexport const roomsGet = (apiToken, lang) => (dispatch) => {\r\n    dispatch({\r\n        type: ROOMS_SET_GET,\r\n    })\r\n\r\n    fetch(`${urlApi}/api/room/get-all`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            lang\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then((rooms) => {\r\n        dispatch({\r\n            type: ROOMS_GET,\r\n            payload: rooms\r\n        })\r\n\r\n        SocketController.joinLang(lang)\r\n    })\r\n    .catch((err) => {\r\n        dispatch({\r\n            type: ROOMS_GET_ERROR,\r\n        })\r\n    })\r\n}\r\n\r\nexport const roomsAdd = room => (dispatch) => {\r\n    dispatch({\r\n        type: ROOMS_ADD,\r\n        payload: room\r\n    })\r\n}\r\n\r\nexport const roomsLoad = (apiToken, lang) => (dispatch) => {\r\n    if(store.getState().rooms.canLoad) {\r\n        dispatch({\r\n            type: ROOMS_PRELOAD,\r\n            payload: []\r\n        })\r\n\r\n        fetch(`${urlApi}/api/room/load`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                lastRoomId: store.getState().rooms.rooms[store.getState().rooms.rooms.length-1]._id,\r\n                firstRoomId: store.getState().rooms.rooms[0]._id,\r\n                lang\r\n            })\r\n        })\r\n        .then((response) => response.json())\r\n        .then((rooms) => {\r\n            dispatch({\r\n                type: ROOMS_PRELOAD,\r\n                payload: rooms\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\nexport const joinRoom = ({id, apiToken}) => (dispatch) => {\r\n    fetch(`${urlApi}/api/room/get`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                id,\r\n                socketId: SocketController.getSocketId()\r\n            })\r\n        })\r\n        .then(response => response.json())\r\n        .then(({room, muted}) => {\r\n            if(room.error) {\r\n                setForceTitle('Error')\r\n\r\n                dispatch({\r\n                    type: ROOMS_JOIN_ERROR,\r\n                    payload: room.errors[0]\r\n                })\r\n                \r\n                return\r\n            }\r\n\r\n            room.dialog.messages = room.dialog.messages.reverse()\r\n\r\n            room.users.map(x => {\r\n                x.speaking = false\r\n                return 1\r\n            })\r\n\r\n            setForceTitle(room.title)\r\n\r\n            dispatch({\r\n                type: ROOMS_JOIN_ROOM,\r\n                payload: {room, canLoad: room.dialog.messages.length === 50, muted}\r\n            })\r\n\r\n            if(unmuteTimer) {\r\n                clearTimeout(unmuteTimer)\r\n            }\r\n\r\n            if(muted && (new Date(muted.date).getTime() - new Date().getTime()) <= 86400000) {\r\n                unmuteTimer = setTimeout(() => {\r\n                    if(store.getState().rooms.activeRoom && \r\n                    store.getState().rooms.activeRoom._id === room._id && \r\n                    !!store.getState().rooms.activeRoom.muted && \r\n                    store.getState().rooms.activeRoom.muted.date === muted.date) {\r\n                        store.dispatch({\r\n                            type: ROOMS_SET_MUTED,\r\n                            payload: false\r\n                        })\r\n                    }\r\n                    // console.log(unmuteTimer)\r\n                }, (new Date(muted.date).getTime() - new Date().getTime()) );\r\n            }\r\n            \r\n            SocketController.joinRoom({roomId: room._id, lang: room.lang})\r\n\r\n            try {\r\n                WebRtcController.connectRoom(room._id)\r\n            } catch (err) {\r\n                SocketController.leaveRoom({roomId: room._id, lang: room.lang})\r\n                dispatch({\r\n                    type: ROOMS_JOIN_ERROR,\r\n                    payload: {param: 'all', msg: 'something_goes_wrong'}\r\n                })\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            dispatch({\r\n                type: ROOMS_JOIN_ERROR,\r\n                payload: {param: 'all', msg: 'something_goes_wrong'}\r\n            })\r\n        })\r\n}\r\n\r\nexport const leaveRoom = (roomId, lang) => (dispatch) => {\r\n    WebRtcController.leaveRoom({roomId, lang})\r\n    dispatch({\r\n        type: ROOMS_LEAVE_ROOM\r\n    })\r\n}\r\n\r\nexport const sendMessage = (message, apiToken) => (dispatch) => {\r\n    let formData = new FormData()\r\n    let _id = randomInteger(0, 1000000)\r\n    let images = []\r\n    let files = []\r\n    let sounds = []\r\n\r\n    for (let i = 0; i < message.images.length; i++) {\r\n        formData.append('images'+i, message.images[i].file)\r\n        message.images[i].file = false\r\n        images.push(message.images[i])\r\n    }\r\n\r\n    for (let i = 0; i < message.files.length; i++) {\r\n        formData.append('files'+i, message.files[i].file)\r\n        message.files[i].file = false\r\n        files.push(message.files[i])\r\n    }\r\n\r\n    for (let i = 0; i < message.sounds.length; i++) {\r\n        formData.append('sounds'+i, message.sounds[i].file)\r\n        message.sounds[i].file = false\r\n        sounds.push(message.sounds[i])\r\n    }\r\n\r\n    let localMessage = {\r\n        _id,\r\n        user: store.getState().user,\r\n        text: message.text,\r\n        images,\r\n        sounds,\r\n        files,\r\n        isLoading: true,\r\n        isError: false,\r\n        isRead: false,\r\n        recentMessages: message.recentMessages,\r\n        createdAt: Date.now(),\r\n        type: 'message'\r\n    }\r\n    \r\n    dispatch({\r\n        type: ROOMS_ADD_MESSAGE,\r\n        payload: localMessage\r\n    })\r\n\r\n    let recentMessages = []\r\n\r\n    message.recentMessages.map(m => {\r\n        recentMessages.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    message.recentMessages = recentMessages\r\n    message.socketId = SocketController.getSocketId()\r\n\r\n    formData.append('text', message.text)\r\n    formData.append('recentMessages', message.recentMessages)\r\n    formData.append('roomId', message.roomId)\r\n    formData.append('dialogId', message.dialogId)\r\n    formData.append('socketId', SocketController.getSocketId())\r\n    // formData.append('apiToken', apiToken)\r\n\r\n    fetch(`${urlApi}/api/room/send-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                // 'Accept': 'application/json',\r\n                // 'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(messageRes => {\r\n            if(messageRes.error) {\r\n                if(messageRes.errors[0].msg === 'max_size') {\r\n                    toast.error(\"Max file size upload 10 Mb.\", {\r\n                        position: toast.POSITION.TOP_CENTER\r\n                    });\r\n                }\r\n                return dispatch({\r\n                    type: ROOMS_ERROR_MESSAGE,\r\n                    payload: _id\r\n                })\r\n            }\r\n            dispatch({\r\n                type: ROOMS_SUCCESS_MESSAGE,\r\n                payload: {_id, _newId: messageRes._id}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            dispatch({\r\n                type: ROOMS_ERROR_MESSAGE,\r\n                payload: _id\r\n            })\r\n        })\r\n}\r\n\r\nexport const editMessage = (message, apiToken) => (dispatch) => {\r\n    let formData = new FormData()\r\n\r\n    let images = []\r\n    let files = []\r\n    let sounds = []\r\n\r\n    let oldImages = []\r\n    let oldFiles = []\r\n    let oldSounds = []\r\n\r\n    for (let i = 0; i < message.images.length; i++) {\r\n        if(message.images[i].file) {\r\n            formData.append('images'+i, message.images[i].file)\r\n\r\n            images.push(message.images[i])\r\n        } else {\r\n            oldImages.push(message.images[i].id)\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < message.files.length; i++) {\r\n        if(message.files[i].file) {\r\n            formData.append('files'+i, message.files[i].file)\r\n\r\n            files.push(message.files[i])\r\n        } else {\r\n            oldFiles.push(message.files[i].id)\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < message.sounds.length; i++) {\r\n        if(message.sounds[i].file) {\r\n            formData.append('sounds'+i, message.sounds[i].file)\r\n\r\n            sounds.push(message.sounds[i])\r\n        } else {\r\n            oldSounds.push(message.sounds[i].id)\r\n        }        \r\n    }\r\n\r\n    let localMessage = {\r\n        _id: message._id,\r\n        user: store.getState().user,\r\n        text: message.text,\r\n        images: message.images,\r\n        sounds: message.sounds,\r\n        files: message.files,\r\n        isLoading: true,\r\n        isError: false,\r\n        recentMessages: message.recentMessages,\r\n    }\r\n    \r\n    dispatch({\r\n        type: ROOMS_EDIT_MESSAGE,\r\n        payload: localMessage\r\n    })\r\n\r\n    let recentMessages = []\r\n\r\n    message.recentMessages.map(m => {\r\n        recentMessages.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    message.recentMessages = recentMessages\r\n    message.socketId = SocketController.getSocketId()\r\n    message.roomId = store.getState().rooms.activeRoom._id\r\n    \r\n    formData.append('_id', message._id)\r\n    formData.append('text', message.text)\r\n    formData.append('recentMessages', message.recentMessages)\r\n    formData.append('roomId', message.roomId)\r\n    formData.append('dialogId', message.dialogId)\r\n    formData.append('socketId', SocketController.getSocketId())\r\n    formData.append('oldImages', oldImages)\r\n    formData.append('oldSounds', oldSounds)\r\n    formData.append('oldFiles', oldFiles)\r\n\r\n    fetch(`${urlApi}/api/room/edit-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(messageRes => {\r\n            if(messageRes.error) {\r\n                if(messageRes.errors[0].msg === 'max_size') {\r\n                    toast.error(\"Max file size upload 10 Mb.\", {\r\n                        position: toast.POSITION.TOP_CENTER\r\n                    });\r\n                }\r\n                return dispatch({\r\n                    type: ROOMS_ERROR_MESSAGE,\r\n                    payload: message._id\r\n                })\r\n            }\r\n            dispatch({\r\n                type: ROOMS_SUCCESS_MESSAGE,\r\n                payload: {_id: message._id, _newId: message._id}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            dispatch({\r\n                type: ROOMS_ERROR_MESSAGE,\r\n                payload: message._id\r\n            })\r\n        })\r\n}\r\n\r\nexport const deleteMessage = ({roomId, deleteMessages}, apiToken) => (dispatch) => {\r\n    let messageIds = []\r\n    deleteMessages.map(m => {\r\n        messageIds.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    dispatch({\r\n        type: ROOMS_DELETE_MESSAGE,\r\n        payload: messageIds\r\n    })\r\n\r\n    fetch(`${urlApi}/api/room/delete-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                roomId,\r\n                messageIds,\r\n                socketId: SocketController.getSocketId()\r\n            })\r\n        })\r\n        .then()\r\n        .catch(() => {\r\n            \r\n        })\r\n}\r\n\r\nexport const deleteLocalMessage = (_id) => (dispatch) => {\r\n    dispatch({\r\n        type: ROOMS_DELETE_MESSAGE,\r\n        payload: [_id]\r\n    })\r\n}\r\n\r\nexport const retrySendMessage = (message, apiToken) => (dispatch) => {\r\n    let formData = new FormData()\r\n    let images = []\r\n\r\n    let localMessage = {\r\n        _id: message._id,\r\n        user: store.getState().user,\r\n        text: message.text,\r\n        images: message.images,\r\n        sounds: [],\r\n        files: [],\r\n        isLoading: true,\r\n        isError: false,\r\n        recentMessages: message.recentMessages,\r\n        createdAt: Date.now(),\r\n        type: 'message'\r\n    }\r\n\r\n    dispatch({\r\n        type: ROOMS_DELETE_MESSAGE,\r\n        payload: [message._id]\r\n    })\r\n\r\n    dispatch({\r\n        type: ROOMS_ADD_MESSAGE,\r\n        payload: localMessage\r\n    })\r\n\r\n    for (let i = 0; i < message.images.length; i++) {\r\n        formData.append('images'+i, message.images[i].file)\r\n\r\n        images.push(message.images[i].path)\r\n    }\r\n\r\n    let recentMessages = []\r\n\r\n    message.recentMessages.map(m => {\r\n        recentMessages.push(m._id)\r\n        return 1\r\n    })\r\n\r\n    message.recentMessages = recentMessages\r\n    message.socketId = SocketController.getSocketId()\r\n\r\n    formData.append('text', message.text)\r\n    formData.append('recentMessages', message.recentMessages)\r\n    formData.append('roomId', message.roomId)\r\n    formData.append('dialogId', message.dialogId)\r\n    formData.append('socketId', SocketController.getSocketId())\r\n\r\n    fetch(`${urlApi}/api/room/send-message`, {\r\n            method: \"post\",\r\n            headers: {\r\n                // 'Accept': 'application/json',\r\n                // 'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(messageRes => {\r\n            dispatch({\r\n                type: ROOMS_SUCCESS_MESSAGE,\r\n                payload: {_id: message._id, _newId: messageRes._id}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            dispatch({\r\n                type: ROOMS_ERROR_MESSAGE,\r\n                payload: message._id\r\n            })\r\n        })\r\n}\r\n\r\nexport const readMessages = ({dialogId, userId, roomId}, apiToken) => (dispatch) => {\r\n    let readMessages = store.getState().rooms.activeRoom.dialog.messages.filter(x => !x.isRead && x.user._id !== userId)\r\n\r\n    setTimeout(() => {\r\n        if(!!readMessages.length) {\r\n            dispatch({\r\n                type: ROOMS_READ_MESSAGES,\r\n                payload: userId\r\n            })\r\n        }\r\n    }, 750)\r\n\r\n    if(!!readMessages.length) {\r\n        fetch(`${urlApi}/api/room/read-messages`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${apiToken}`,\r\n                },\r\n                body: JSON.stringify({\r\n                    dialogId,\r\n                    roomId\r\n                })\r\n            })\r\n            .then()\r\n            .catch(() => {\r\n                \r\n            })\r\n    }\r\n}\r\n\r\nexport const loadMessages = ({dialogId, userId, roomId}, apiToken) => (dispatch) => {\r\n    let lastMessage = store.getState().rooms.activeRoom.dialog.messages[0]\r\n\r\n    dispatch({\r\n        type: ROOMS_SET_LOADING\r\n    })\r\n\r\n    dispatch({\r\n        type: ROOMS_LOAD_MESSAGES,\r\n        payload: {messages: [], canLoad: false}\r\n    })\r\n\r\n    fetch(`${urlApi}/api/room/load-messages`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                dialogId,\r\n                lastMessageId: lastMessage._id\r\n            })\r\n        })\r\n        .then(response => response.json())\r\n        .then(messages => {\r\n            dispatch({\r\n                type: ROOMS_LOAD_MESSAGES,\r\n                payload: {messages: messages.reverse(), canLoad: messages.length  === 50}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            \r\n        })\r\n}","// App\r\nimport React from 'react'\r\nimport {PageSettings} from '../Pages/PageSettings'\r\nimport RoomItem from '../Partials/Room/RoomItem'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\n\r\n// Material\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { withStyles, Tooltip, CircularProgress } from '@material-ui/core'\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#008FF7',\r\n        position: 'absolute',\r\n        bottom: 20,\r\n        right: 20,\r\n        '&:hover': {\r\n            backgroundColor: '#008FF7',\r\n        }\r\n    }\r\n})\r\n\r\nconst CustomFab = withStyles(fabStyles)(Fab);\r\n\r\nclass Rooms extends React.Component {\r\n    static contextType = PageSettings;\r\n\r\n    state = {\r\n        isOpenCreateRoom: false,\r\n        scrollTop: 0,\r\n        showBtnAdd: true\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.context.toggleHeader(true)\r\n\r\n        if(!this.props.rooms.getted) {\r\n            this.props.roomsActions.roomsGet(this.props.user.apiToken, this.props.user.roomLang)\r\n        }\r\n    }\r\n\r\n    onScroll() {\r\n        if(this.state.scrollTop < this.roomsBlock.getScrollTop()) {\r\n            if(this.state.showBtnAdd)\r\n                this.setState({showBtnAdd: false})\r\n        } else {\r\n            if(!this.state.showBtnAdd)\r\n                this.setState({showBtnAdd: true})\r\n        }\r\n\r\n        if((this.roomsBlock.getScrollHeight() - (this.roomsBlock.getClientHeight() + this.roomsBlock.getScrollTop())) === 0) {\r\n            this.props.roomsActions.roomsLoad(this.props.user.apiToken, this.props.user.roomLang)\r\n        }\r\n\r\n        this.setState({scrollTop: this.roomsBlock.getScrollTop()})\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if(nextState.scrollTop !== this.state.scrollTop) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.context.toggleHeader(false)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"col-xl-3 col-lg-6 col-md-6 sidebar\" style={{overflow: 'hidden'}}>\r\n                    <h2 className=\"sidebar-title\">{this.props.langProps.rooms}</h2>\r\n\r\n                    <Scrollbars\r\n                        ref={(ref) => {this.roomsBlock = ref}}\r\n                        renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                        renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                        className=\"scroll\"\r\n                        onScroll={() => {this.onScroll()}}\r\n                        style={{height: 'calc(100% - 78px)'}}\r\n                        autoHide\r\n                    >\r\n                        {this.props.rooms.isFetching && <CircularProgress style={{\r\n                            color: '#008FF7',\r\n                            position: 'absolute',\r\n                            left: 0,\r\n                            right: 0,\r\n                            margin: 'auto',\r\n                            top: 'calc(50% - 20px)'\r\n                        }} />}\r\n                        {this.props.rooms.rooms.map((room, index) => {\r\n                            return (\r\n                                <RoomItem key={index} room={room} />\r\n                            )\r\n                        })}\r\n                    </Scrollbars>\r\n\r\n                    {!this.props.rooms.isFetching && !this.props.rooms.isError && !this.props.rooms.rooms.length && <div className=\"data-empty\">\r\n                        <AppsIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                        <p>{this.props.langProps.create_your_first_room}</p>\r\n                    </div>}\r\n\r\n                    {!this.props.rooms.isFetching && this.props.rooms.isError && <div className=\"data-empty\">\r\n                        <WarningIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                        <p>{this.props.langProps.something_goes_wrong}</p>\r\n\r\n                        <button onClick={() => {this.props.roomsActions.roomsGet(this.props.user.apiToken, this.props.user.roomLang)}} className=\"button-gray\" type=\"submit\" style={{width: 'max-content'}}>Retry</button>\r\n                    </div>}\r\n\r\n                    <Tooltip title={this.props.langProps.create_room} className={`scroll-to-bottom ${this.state.showBtnAdd ? 'active' : ''}`} placement=\"top\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.history.push({\r\n                                search: \"?act=newRoom\"\r\n                            })\r\n                        }}>\r\n                            <AddIcon />\r\n                        </CustomFab>\r\n                    </Tooltip>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Rooms)))","import { \r\n    NOTIFICATIONS_GET,\r\n    NOTIFICATIONS_READ,\r\n} from '../constants'\r\nimport {urlApi} from '../../config'\r\nimport SocketController from '../../Controllers/SocketController';\r\n\r\nexport const notificationsGet = (apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/notification/get-all`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        }\r\n    })\r\n    .then((response) => response.json())\r\n    .then((notifications) => {\r\n        dispatch({\r\n            type: NOTIFICATIONS_GET,\r\n            payload: notifications\r\n        })\r\n    });\r\n}\r\n\r\nexport const notificationRead = (id, apiToken) => (dispatch) => {\r\n    dispatch({\r\n        type: NOTIFICATIONS_READ,\r\n        payload: id\r\n    })\r\n\r\n    fetch(`${urlApi}/api/notification/read`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            id,\r\n            socketId: SocketController.getSocketId()\r\n        })\r\n    })\r\n}","// App\r\nimport React from 'react'\r\n\r\nimport Avatar from '../User/Avatar'\r\nimport { CSSTransitionGroup } from 'react-transition-group';\r\nimport '../../Css/Partials/RoomItem.css'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// Material\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as notificationsActions from '../../Redux/actions/notifications'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { randomInteger } from '../../Controllers/FunctionsController';\r\nimport { Button } from '@material-ui/core';\r\nimport { LastMessageDate } from '../../Controllers/TimeController';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\nclass NotificationItem extends React.Component {\r\n    state = {\r\n        randomId: randomInteger(0, 100000)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Button className={`dialog-item`} onClick={() => {\r\n                if(!this.props.notification.isRead)\r\n                    this.props.notificationsActions.notificationRead(this.props.notification._id, this.props.user.apiToken)\r\n\r\n                if(this.props.notification.type === 'invite')\r\n                    this.props.history.push(`/rooms/${this.props.notification.room._id}`)\r\n                if(this.props.notification.type === 'accept' || this.props.notification.type === 'request')\r\n                    this.props.history.push({\r\n                        search: `?user=${this.props.notification.user._id}`\r\n                    })\r\n            }}>\r\n                <Avatar \r\n                avatar={this.props.notification.user.avatar ? this.props.notification.user.avatar : false}\r\n                status={this.props.notification.type} \r\n                style={{minWidth: 40, maxWidth: 40, height: 40, fontSize: 14, fontWeight: 600, backgroundColor: `rgb(${this.props.notification.user.color})`}} \r\n                name={this.props.notification.user.name.first.charAt(0) + this.props.notification.user.name.last.charAt(0)} />\r\n\r\n                <div style={{\r\n                        flexGrow: 1,\r\n                        minWidth: 0,\r\n                        maxWidth: '100%',\r\n                        paddingRight: 10\r\n                    }}>\r\n                    <p className=\"user-name\"><span>{`${this.props.notification.user.name.first} ${this.props.notification.user.name.last}`}</span></p>\r\n                    \r\n                    {this.props.notification.type === 'invite' && <p className=\"last-message\"><span className=\"notif-content\">{this.props.langProps.invited_you_to_the_room}&nbsp;<span style={{color: '#008FF7'}}>{this.props.notification.room.title}</span></span></p>}\r\n                    {this.props.notification.type === 'accept' && <p className=\"last-message\"><span className=\"notif-content\">{this.props.langProps.accept_your_friend_request}</span></p>}\r\n                    {this.props.notification.type === 'request' && <p className=\"last-message\"><span className=\"notif-content\">{this.props.langProps.send_you_friend_request}</span></p>}\r\n                </div>\r\n                <div className=\"dialog-info\">\r\n                    <span className=\"time-at\">{LastMessageDate(this.props.notification.createdAt)}</span>\r\n                    <CSSTransitionGroup \r\n                        transitionName=\"message-status-transition\"\r\n                        transitionEnterTimeout={100}\r\n                        transitionLeaveTimeout={100}>\r\n                            {!this.props.notification.isRead && <span style={{background: '#FF3333',minWidth: 10,height: 10, marginTop: 5}} className=\"unread-messages-count\"></span>}\r\n                    </CSSTransitionGroup>\r\n                </div>\r\n            </Button>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        notificationsActions: bindActionCreators(notificationsActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(NotificationItem)))","// App\r\nimport React from 'react'\r\n\r\nimport {PageSettings} from '../Pages/PageSettings'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone';\r\nimport { connect } from 'react-redux';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport NotificationItem from '../Partials/Notifications/NotificationItem'\r\nimport * as notificationsActions from '../Redux/actions/notifications'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nclass Notifications extends React.Component {\r\n    static contextType = PageSettings;\r\n\r\n    componentDidMount() {\r\n        this.context.toggleHeader(true)\r\n\r\n        if(!this.props.notifications.getted) {\r\n            this.props.notificationsActions.notificationsGet(this.props.user.apiToken)\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.context.toggleHeader(false)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <> \r\n                <div className=\"col-xl-3 col-lg-6 col-md-6 sidebar\">\r\n                    <h2 className=\"sidebar-title\">{this.props.langProps.notifications}</h2>\r\n\r\n                    <Scrollbars\r\n                        ref={(ref) => {this.roomsBlock = ref}}\r\n                        renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                        renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                        className=\"scroll\"\r\n                        style={{height: 'calc(100% - 78px)'}}\r\n                        autoHide\r\n                    >\r\n                        {this.props.notifications.isFetching && <CircularProgress style={{\r\n                            color: '#008FF7',\r\n                            position: 'absolute',\r\n                            left: 0,\r\n                            right: 0,\r\n                            margin: 'auto',\r\n                            top: 'calc(50% - 20px)'\r\n                        }} />}\r\n                        {this.props.notifications.notifications.map((notification, index) => {\r\n                            return (\r\n                                <NotificationItem key={index} notification={notification} />\r\n                            )\r\n                        })}\r\n                    </Scrollbars>\r\n\r\n                    {!this.props.notifications.isFetching &&!this.props.notifications.notifications.length && <div className=\"data-empty\">\r\n                        <NotificationsNoneIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                        <p>{this.props.langProps.here_wiil_placed_your_notifications}</p>\r\n                    </div>}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        notifications: state.notifications\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        notificationsActions: bindActionCreators(notificationsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Notifications)))\r\n","import { \r\n    USER_LOGIN,\r\n    USER_LOGOUT,\r\n    USER_UPDATE_ROOM_LANG,\r\n    DIALOGS_GET,\r\n    NOTIFICATIONS_SET_NO_READ,\r\n    USER_SET_AVATAR\r\n} from '../constants'\r\nimport store from '../store'\r\nimport { toast } from 'react-toastify'\r\nimport { urlApi } from '../../config'\r\n\r\n\r\nexport const loginUser = (user, dialogs, noReadCount, noReadNotifications, apiToken) => (dispatch) => {\r\n    user.apiToken = apiToken\r\n    \r\n    dispatch({\r\n        type: USER_LOGIN,\r\n        payload: user\r\n    })\r\n\r\n    for (let i = 0; i < dialogs.length; i++) {\r\n        dialogs[i].user = dialogs[i].users.find(user => user._id !== store.getState().user._id)\r\n\r\n        if(!dialogs[i].user)\r\n            dialogs[i].user = dialogs[i].users[0]\r\n\r\n        dialogs[i].typing = false\r\n        dialogs[i].getted = false\r\n        dialogs[i].isLoading = false\r\n\r\n        if(dialogs[i].lastMessage) {\r\n            dialogs[i].lastMessage.isLoading = false\r\n            dialogs[i].lastMessage.isError = false\r\n        }\r\n\r\n        if(dialogs[i].lastMessage && dialogs[i].lastMessage.user._id === store.getState().user._id)\r\n            dialogs[i].noRead = 0\r\n    }\r\n\r\n    dispatch({\r\n        type: DIALOGS_GET,\r\n        payload: {dialogs, noReadCount}\r\n    })\r\n\r\n    dispatch({\r\n        type: NOTIFICATIONS_SET_NO_READ,\r\n        payload: noReadNotifications\r\n    })\r\n}\r\n\r\nexport const logoutUser = () => (dispatch) => {\r\n    dispatch({\r\n        type: USER_LOGOUT\r\n    })\r\n}\r\n\r\nexport const updateRoomLang = (lang) => (dispatch) => {\r\n    dispatch({\r\n        type: USER_UPDATE_ROOM_LANG,\r\n        payload: lang\r\n    })\r\n}\r\n\r\nexport const uploadAvatar = (e, apiToken) => (dispatch) => {\r\n    if(e.target.files[0]) {\r\n        let file = {\r\n            path: (window.URL || window.webkitURL).createObjectURL(new Blob([e.target.files[0]], {type: e.target.files[0].type})), \r\n            file: e.target.files[0], \r\n            name: e.target.files[0].name, \r\n            type: e.target.files[0].name.split('.').pop(),\r\n            size: e.target.files[0].size / 1000\r\n        }\r\n\r\n        let formData = new FormData()\r\n        formData.append('avatar', file.file)\r\n\r\n        fetch(`${urlApi}/api/user/upload-avatar`, {\r\n            method: \"post\",\r\n            headers: {\r\n                // 'Accept': 'application/json',\r\n                // 'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${apiToken}`,\r\n            },\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(res => {\r\n            if(res.error) {\r\n                if(res.errors[0].msg === 'max_size') {\r\n                    toast.error(\"Max file size upload 10 Mb.\", {\r\n                        position: toast.POSITION.TOP_CENTER\r\n                    });\r\n                }\r\n            }\r\n            dispatch({\r\n                type: USER_SET_AVATAR,\r\n                payload: {original: file.path, min: file.path}\r\n            })\r\n        })\r\n        .catch(() => {\r\n            toast.error(\"Something goes worng\", {\r\n                position: toast.POSITION.TOP_CENTER\r\n            });\r\n        })\r\n    }\r\n}","// App\r\nimport React from 'react'\r\n\r\nimport Avatar from '../User/Avatar'\r\n\r\n// Material\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass RoomItem extends React.Component {\r\n    render() {\r\n        return (\r\n            <span style={{textDecoration: 'none'}} onClick={() => {this.props.onClick()}}>\r\n                <Button className=\"room-item\">\r\n                    <Avatar style={{minWidth: 40, maxWidth: 40, height: 40, fontSize: 14, fontWeight: 600}} name={this.props.title.charAt(0)} />\r\n                    <div style={{\r\n                        flexGrow: 1,\r\n                        minWidth: 0,\r\n                        maxWidth: '100%',\r\n                        paddingRight: 10\r\n                    }}>\r\n                        <p><span>{this.props.title}</span></p>\r\n                    </div>\r\n                </Button>\r\n            </span>\r\n        )\r\n    }\r\n}\r\n\r\nexport default RoomItem","// App\r\nimport React from 'react'\r\nimport {PageSettings} from '../Pages/PageSettings'\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as userActions from '../Redux/actions/user'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {urlApi} from '../config'\r\nimport SocketController from '../Controllers/SocketController'\r\nimport LanguageItem from '../Partials/Language/LanguageItem'\r\nimport { withLang } from 'react-multi-language'\r\nimport languages from '../languages'\r\n\r\nclass Languages extends React.Component {\r\n    static contextType = PageSettings;\r\n\r\n    componentDidMount() {\r\n        this.context.toggleHeader(true)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.context.toggleHeader(false)\r\n    }\r\n\r\n    updateRoomLang(lang) {\r\n        this.props.userActions.updateRoomLang(lang)\r\n\r\n        this.props.roomsActions.roomsGet(this.props.user.apiToken, lang)\r\n\r\n        SocketController.joinLang(lang)\r\n\r\n        this.props.onClick()\r\n\r\n        fetch(`${urlApi}/api/user/update-room-lang`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                lang\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <> \r\n                <div className=\"col-xl-3 col-lg-6 col-md-6 sidebar\">\r\n                    <h2 className=\"sidebar-title\">{this.props.langProps.language}</h2>\r\n\r\n                    <LanguageItem onClick={() => {\r\n                        this.updateRoomLang('eng')\r\n                    }} title={this.props.langProps.english} />\r\n                    <LanguageItem onClick={() => {\r\n                        this.updateRoomLang('rus')\r\n                    }} title={this.props.langProps.russian} />\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Languages)))","import React from 'react'\r\nimport Avatar from './User/Avatar'\r\n\r\nimport '../Css/Partials/UserSidebar.css'\r\n\r\n// Icons\r\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\r\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone';\r\nimport LanguageIcon from '@material-ui/icons/Language';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport Messages from '../Sidebar/Messages';\r\nimport Rooms from '../Sidebar/Rooms';\r\nimport Notifications from '../Sidebar/Notifications';\r\nimport Languages from '../Sidebar/Languages';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass UserSidebar extends React.Component {\r\n    state = {\r\n        activeTab: this.props.history.location.pathname.substring(1,5) === 'chat' ? 'messages' : this.props.user.roomLang ? 'rooms' : 'languages'\r\n    }\r\n\r\n    render() {\r\n        return this.props.show && (\r\n            <>\r\n                <div className=\"col-xl-3 col-lg-6 col-md-6 user-header\">\r\n                    <ul>\r\n                        <li onClick={() => {\r\n                            this.props.history.push({\r\n                                search: `?user=${this.props.user._id}`\r\n                            })\r\n                        }}><Avatar avatar={this.props.user.avatar ? this.props.user.avatar : false} style={{width: 32, height: 32, fontSize: 14, fontWeight: 600, backgroundColor: `rgb(${this.props.user.color})`}} name={this.props.user.name.first.charAt(0) + this.props.user.name.last.charAt(0)} /></li>\r\n                        <li style={{position: 'relative'}} className={`${this.state.activeTab === 'messages' ? 'active' : ''}`} onClick={() => {this.setState({activeTab: 'messages'})}}>\r\n                            <ChatBubbleOutlineIcon style={{color: '#CCD1D6'}} />\r\n                            {!!this.props.dialogs.noReadCount && <span \r\n                                className=\"unread-messages-count\"\r\n                                style={{\r\n                                    top: 11,\r\n                                    right: '40%',\r\n                                    transform: 'translateX(50%)',\r\n                                    backgroundColor: '#FF3333'\r\n                                }}\r\n                            >{this.props.dialogs.noReadCount}</span>}\r\n                        </li>\r\n                        <li className={`${this.state.activeTab === 'rooms' ? 'active' : ''}`} onClick={() => {this.setState({activeTab: 'rooms'})}}><AppsIcon style={{color: '#CCD1D6'}} /></li>\r\n                        <li style={{position: 'relative'}} className={`${this.state.activeTab === 'notifications' ? 'active' : ''}`} onClick={() => {this.setState({activeTab: 'notifications'})}}>\r\n                            <NotificationsNoneIcon style={{color: '#CCD1D6'}} />\r\n                            {!!this.props.notifications.noRead && <span \r\n                                className=\"unread-messages-count\"\r\n                                style={{\r\n                                    top: 11,\r\n                                    right: '44%',\r\n                                    transform: 'translateX(50%)',\r\n                                    backgroundColor: '#FF3333'\r\n                                }}\r\n                            >{this.props.notifications.noRead}</span>}\r\n                        </li>\r\n                        <li className={`${this.state.activeTab === 'languages' ? 'active' : ''}`} onClick={() => {this.setState({activeTab: 'languages'})}}><LanguageIcon style={{color: '#CCD1D6'}} /></li>\r\n                    </ul>\r\n                </div>\r\n\r\n                {this.state.activeTab === 'messages' && <Messages />}\r\n                {this.state.activeTab === 'rooms' && <Rooms />}\r\n                {this.state.activeTab === 'notifications' && <Notifications />}\r\n                {this.state.activeTab === 'languages' && <Languages onClick={() => {this.setState({activeTab: 'rooms'})}} />}\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        dialogs: state.dialogs,\r\n        notifications: state.notifications\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(UserSidebar))","// App\r\nimport React from 'react'\r\nimport { withCookies } from 'react-cookie'\r\nimport '../../Css/Auth/Login.css'\r\n\r\n// Router\r\nimport {\r\n    Link\r\n} from \"react-router-dom\"\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as userActions from '../../Redux/actions/user'\r\nimport { bindActionCreators } from 'redux'\r\nimport SocketController from '../../Controllers/SocketController'\r\nimport {urlApi} from '../../config'\r\n\r\nclass Login extends React.Component {\r\n    state = {\r\n        email: '',\r\n        password: '',\r\n        error: false,\r\n        errors: [],\r\n        isFetching: false\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if(this.state.email && this.state.password) {\r\n            this.setState({isFetching: true})\r\n\r\n            fetch(`${urlApi}/auth/login`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    email: this.state.email,\r\n                    password: this.state.password\r\n                })\r\n            })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if(data.error) {\r\n                    this.setState({error: true, errors: data.errors})\r\n                } else {\r\n                    const { cookies } = this.props\r\n                    cookies.set('apiToken', data.token, { path: '/' })\r\n\r\n                    this.props.userActions.loginUser(data.user, data.dialogs, data.noReadCount, data.noReadNotifications, data.token)\r\n\r\n                    SocketController.init(data.token)\r\n                }\r\n\r\n                this.setState({isFetching: false})\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login-page\">\r\n                <h1 className=\"logo\">\r\n                    <span style={{color: '#556677'}}>heva</span>\r\n                    <span style={{color: '#008FF7'}}>chat</span>\r\n                </h1>\r\n\r\n                <form onSubmit={(e) => {this.onSubmit(e)}} className=\"form\">\r\n                    <input value={this.state.email} onChange={(e) => {this.setState({email: e.target.value})}} className=\"input-field\" type=\"text\" name=\"email\" placeholder=\"E-mail\" />\r\n                    {this.state.errors.find(value => value.param === 'email') && <span className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'email').msg} \r\n                    </span>}\r\n\r\n                    <input value={this.state.password} onChange={(e) => {this.setState({password: e.target.value})}} className=\"input-field\" type=\"password\" name=\"password\" placeholder=\"\" />\r\n                    {this.state.errors.find(value => value.param === 'password') && <span className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'password').msg} \r\n                    </span>}\r\n\r\n                    {this.state.errors.find(value => value.param === 'all') && <span style={{marginTop: 30}} className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'all').msg} \r\n                    </span>}\r\n\r\n                    <button type=\"submit\" className=\"button-gray\"></button>\r\n\r\n                    <p className=\"nav-auth\">New to the site? <Link to=\"/register\">Sign up</Link></p>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withCookies(Login))","// App\r\nimport React from 'react'\r\nimport { withCookies } from 'react-cookie'\r\nimport '../../Css/Auth/Login.css'\r\n\r\n// Router\r\nimport {\r\n    Link,\r\n} from \"react-router-dom\"\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as userActions from '../../Redux/actions/user'\r\nimport { bindActionCreators } from 'redux'\r\nimport {urlApi} from '../../config'\r\nimport SocketController from '../../Controllers/SocketController'\r\n\r\nclass Register extends React.Component {\r\n    state = {\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        password: '',\r\n        error: false,\r\n        errors: [],\r\n        isFetching: false\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if(this.state.email && this.state.password) {\r\n            this.setState({isFetching: true})\r\n\r\n            fetch(`${urlApi}/auth/register`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    firstName: this.state.firstName,\r\n                    lastName: this.state.lastName,\r\n                    email: this.state.email,\r\n                    password: this.state.password\r\n                })\r\n            })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if(data.error) {\r\n                    this.setState({error: true, errors: data.errors})\r\n                } else {\r\n                    const { cookies } = this.props\r\n                    cookies.set('apiToken', data.token, { path: '/' })\r\n\r\n                    this.props.userActions.loginUser(data.user, data.dialogs, data.noReadCount, data.noReadNotifications, data.token)\r\n\r\n                    SocketController.init(data.token)\r\n                }\r\n\r\n                this.setState({isFetching: false})\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login-page\">\r\n                <h1 className=\"logo\">\r\n                    <span style={{color: '#556677'}}>heva</span>\r\n                    <span style={{color: '#008FF7'}}>chat</span>\r\n                </h1>\r\n\r\n                <form onSubmit={(e) => {this.onSubmit(e)}} className=\"form\">\r\n                    <input value={this.state.firstName} onChange={(e) => {this.setState({firstName: e.target.value})}} className=\"input-field\" type=\"text\" name=\"firstName\" placeholder=\"First name\" />\r\n                    {this.state.errors.find(value => value.param === 'firstName') && <span className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'firstName').msg} \r\n                    </span>}\r\n\r\n                    <input value={this.state.lastName} onChange={(e) => {this.setState({lastName: e.target.value})}} className=\"input-field\" type=\"text\" name=\"lastName\" placeholder=\"Last name\" />\r\n                    {this.state.errors.find(value => value.param === 'lastName') && <span className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'lastName').msg} \r\n                    </span>}\r\n\r\n                    <input value={this.state.email} onChange={(e) => {this.setState({email: e.target.value})}} className=\"input-field\" type=\"text\" name=\"email\" placeholder=\"E-mail\" />\r\n                    {this.state.errors.find(value => value.param === 'email') && <span className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'email').msg} \r\n                    </span>}\r\n\r\n                    <input value={this.state.password} onChange={(e) => {this.setState({password: e.target.value})}} className=\"input-field\" type=\"password\" name=\"password\" placeholder=\"\" />\r\n                    {this.state.errors.find(value => value.param === 'password') && <span className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'password').msg} \r\n                    </span>}\r\n\r\n                    {this.state.errors.find(value => value.param === 'all') && <span style={{marginTop: 30}} className=\"input-error-label\">\r\n                        {this.state.errors.find(value => value.param === 'all').msg} \r\n                    </span>}\r\n\r\n                    <button type=\"submit\" className=\"button-gray\"></button>\r\n\r\n                    <p className=\"nav-auth\">Already have account? <Link to=\"/login\">Log in</Link></p>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withCookies(Register))","// App\r\nimport React from 'react'\r\n\r\n// Material\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport { randomInteger } from '../../Controllers/FunctionsController';\r\n\r\nlet audioDurationInterval = false\r\n\r\nclass Audio extends React.Component {\r\n    state = {\r\n        duration: '00:00',\r\n        audio: false,\r\n        randomId: randomInteger(0, 10000000)\r\n    }\r\n\r\n    componentDidMount() {\r\n        let thisAudio = document.getElementsByName(this.props.src)\r\n\r\n        for(let audio of thisAudio) {\r\n            audio.volume = 0.5\r\n            this.setState({audio})\r\n            break\r\n        }\r\n\r\n        let audio = document.getElementById(this.state.randomId)\r\n\r\n        audio.onpause = () => {\r\n            audio.parentElement.className = 'message-sound'\r\n        }\r\n\r\n        audio.onplay = () => {\r\n            audio.parentElement.className = 'message-sound active'\r\n        }\r\n\r\n        audio.onloadedmetadata = () => {\r\n            this.getDuration()\r\n        }\r\n    }\r\n\r\n    getDuration() {\r\n        function padZero(v) {\r\n            return (v < 10) ? \"0\" + v : v;\r\n        }\r\n\r\n        let thisAudio = document.getElementsByName(this.props.src)\r\n\r\n        let t = 0\r\n\r\n        for(let audio of thisAudio) {\r\n            t = audio.duration\r\n            break\r\n        }\r\n\r\n        this.setState({duration: padZero(parseInt((t / (60)))) + \":\" + padZero(parseInt((t) % 60))})\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if(audioDurationInterval)\r\n            this.stopTimer()\r\n\r\n        if(document.getElementsByName(this.props.src)) {\r\n            document.getElementsByName(this.props.src).className = 'message-sound'\r\n            this.state.audio.pause()\r\n        }\r\n    }\r\n\r\n    playAudio(e) {\r\n        e.stopPropagation()\r\n\r\n        let otherAudio = document.getElementsByClassName('message-sounds-element')\r\n        \r\n        this.stopTimer()\r\n\r\n        for (let audio of otherAudio) {\r\n            audio.pause()\r\n        }\r\n\r\n        let thisAudio = document.getElementsByName(this.props.src)\r\n\r\n        for(let audio of thisAudio) {\r\n            audio.play()\r\n        }\r\n\r\n        this.startTimer()\r\n    }\r\n\r\n    changeDurationAudio(e) {\r\n        e.stopPropagation()\r\n\r\n        let position = e.nativeEvent.layerX * 100 / this.rangeBlock.clientWidth\r\n        let time = this.state.audio.duration / 100 * position\r\n\r\n        let thisAudio = document.getElementsByName(this.props.src)\r\n\r\n        for(let audio of thisAudio) {\r\n            audio.currentTime = time\r\n        }\r\n\r\n        let thisRange = document.getElementsByName(this.props.src+'-range')\r\n\r\n        for(let range of thisRange) {\r\n            range.style.width = (100*this.state.audio.currentTime/this.state.audio.duration)+'%'\r\n        }\r\n    }\r\n\r\n    startTimer() {\r\n        audioDurationInterval = setInterval(() => {\r\n            let thisRange = document.getElementsByName(this.props.src+'-range')\r\n\r\n            for(let range of thisRange) {\r\n                range.style.width = (100*this.state.audio.currentTime/this.state.audio.duration)+'%'\r\n            }\r\n        }, 100)\r\n    }\r\n\r\n    stopTimer() {\r\n        clearInterval(audioDurationInterval)\r\n    }\r\n\r\n    viewDurationAudio(e) {\r\n        let position = e.nativeEvent.layerX * 100 / this.rangeBlock.clientWidth\r\n        let time = this.state.audio.duration / 100 * position\r\n\r\n        let thisRange = document.getElementsByName(this.props.src+'-range')\r\n\r\n        for(let range of thisRange) {\r\n            range.style.width = (100*time/this.state.audio.duration)+'%'\r\n        }\r\n    }\r\n\r\n    stopAudio(e) {\r\n        if(audioDurationInterval)\r\n            this.stopTimer()\r\n\r\n        e.stopPropagation()\r\n\r\n        let thisAudio = document.getElementsByName(this.props.src)\r\n\r\n        for(let audio of thisAudio) {\r\n            audio.pause()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"message-sound\">\r\n            <audio className={`message-sounds-element`} id={this.state.randomId} name={this.props.src} src={this.props.src} />\r\n            <span className=\"play\" onClick={(e) => {this.playAudio(e)}}><PlayArrowIcon style={{color: '#008FF7'}} /></span>\r\n            <span className=\"pause\" onClick={(e) => {this.stopAudio(e)}}><PauseIcon style={{color: '#008FF7'}} /></span>\r\n            <div className=\"message-sound-info\">\r\n                <p className=\"message-sounds-name\">{this.props.fileName}</p>\r\n                <p className=\"message-sounds-duration\">{this.state.duration}</p>\r\n            </div>\r\n\r\n            <div className=\"message-sound-range\" \r\n                ref={(ref) => {this.rangeBlock = ref}} \r\n                onMouseMove={(e) => {this.viewDurationAudio(e)}} \r\n                onMouseEnter={() => {this.stopTimer()}}\r\n                onMouseLeave={() => {this.startTimer()}}\r\n                onClick={(e) => {this.changeDurationAudio(e)}}\r\n            >\r\n                <span className=\"range-position\" ref={(ref) => {this.range = ref}} name={this.props.src + '-range'}></span>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default Audio","import { \r\n    USERS_ADD,\r\n    USERS_SET_ACTIVE_USER_ID,\r\n    USERS_SET_FRIEND_STATUS,\r\n    USERS_SET,\r\n    USERS_FRIENDS_GET,\r\n    USERS_REQUESTED_GET,\r\n    USERS_PENDING_GET,\r\n    USERS_FRIENDS_REMOVE,\r\n    USERS_REQUESTED_REMOVE,\r\n    USERS_PENDING_REMOVE,\r\n    USERS_FRIENDS_ADD,\r\n    USERS_REQUESTED_ADD,\r\n    USERS_PENDING_ADD\r\n} from '../constants'\r\nimport store from '../store'\r\nimport {urlApi} from '../../config'\r\n\r\nexport const userGet = (userId, apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/get`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId: userId\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then(({user, friendStatus}) => {\r\n        user.friendStatus = friendStatus\r\n        dispatch({\r\n            type: USERS_ADD,\r\n            payload: user\r\n        })\r\n    });\r\n}\r\n\r\nexport const friendsGet = (apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/get-friends`, {\r\n        method: \"get\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        }\r\n    })\r\n    .then((response) => response.json())\r\n    .then((friends) => {\r\n        let users = []\r\n        \r\n        friends.map(user => {\r\n            users.push(user.recipient)\r\n            return 1\r\n        })\r\n\r\n        dispatch({\r\n            type: USERS_FRIENDS_GET,\r\n            payload: {users, canLoad: users.length === 15}\r\n        })\r\n    });\r\n}\r\n\r\nexport const requestedGet = (apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/get-requested`, {\r\n        method: \"get\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        }\r\n    })\r\n    .then((response) => response.json())\r\n    .then((friends) => {\r\n        let users = []\r\n        \r\n        friends.map(user => {\r\n            users.push(user.recipient)\r\n            return 1\r\n        })\r\n\r\n        dispatch({\r\n            type: USERS_REQUESTED_GET,\r\n            payload: {users, canLoad: users.length === 15}\r\n        })\r\n    });\r\n}\r\n\r\nexport const pendingGet = (apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/get-pending`, {\r\n        method: \"get\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        }\r\n    })\r\n    .then((response) => response.json())\r\n    .then((friends) => {\r\n        let users = []\r\n        \r\n        friends.map(user => {\r\n            users.push(user.recipient)\r\n            return 1\r\n        })\r\n\r\n        dispatch({\r\n            type: USERS_PENDING_GET,\r\n            payload: {users, canLoad: users.length === 15}\r\n        })\r\n    });\r\n}\r\n\r\nexport const setUsers = (friends) => (dispatch) => {\r\n    let setFriends = []\r\n    for (let i = 0; i < friends.length; i++) {\r\n        let user = friends[i].recipient\r\n\r\n        user.friendStatus = friends[i].status\r\n\r\n        setFriends.push(user)\r\n    }\r\n\r\n    dispatch({\r\n        type: USERS_SET,\r\n        payload: {friends: setFriends, canLoad: setFriends.length === 10}\r\n    })\r\n}\r\n\r\nexport const setActiveUserId = (userId) => (dispatch) => {\r\n    dispatch({\r\n        type: USERS_SET_ACTIVE_USER_ID,\r\n        payload: userId\r\n    })\r\n}\r\n\r\nexport const sendRequest = (userId, apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/request`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then((friendStatus) => {\r\n        dispatch({\r\n            type: USERS_SET_FRIEND_STATUS,\r\n            payload: {userId, friendStatus}\r\n        })\r\n\r\n        if(store.getState().users.pending.getted) {\r\n            if(store.getState().users.users.find(x => x._id === userId)) {\r\n                dispatch({\r\n                    type: USERS_PENDING_ADD,\r\n                    payload: {user: store.getState().users.users.find(x => x._id === userId)}\r\n                })\r\n            } else {\r\n                fetch(`${urlApi}/api/user/get`, {\r\n                    method: \"post\",\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: `Bearer ${apiToken}`,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        userId: userId\r\n                    })\r\n                })\r\n                .then((response) => response.json())\r\n                .then(({user, friendStatus}) => {\r\n                    user.friendStatus = friendStatus\r\n                    dispatch({\r\n                        type: USERS_ADD,\r\n                        payload: user\r\n                    })\r\n                    dispatch({\r\n                        type: USERS_PENDING_ADD,\r\n                        payload: {user}\r\n                    })\r\n                });\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nexport const acceptRequest = (userId, apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/accept-request`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then((friendStatus) => {\r\n        dispatch({\r\n            type: USERS_SET_FRIEND_STATUS,\r\n            payload: {userId, friendStatus}\r\n        })\r\n\r\n        if(store.getState().users.requested.getted) {\r\n            dispatch({\r\n                type: USERS_REQUESTED_REMOVE,\r\n                payload: {userId}\r\n            })\r\n        }\r\n\r\n        if(store.getState().users.friends.getted) {\r\n            if(store.getState().users.users.find(x => x._id === userId)) {\r\n                dispatch({\r\n                    type: USERS_FRIENDS_ADD,\r\n                    payload: {user: store.getState().users.users.find(x => x._id === userId)}\r\n                })\r\n            } else {\r\n                fetch(`${urlApi}/api/user/get`, {\r\n                    method: \"post\",\r\n                    headers: {\r\n                        Accept: \"application/json\",\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: `Bearer ${apiToken}`,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        userId: userId\r\n                    })\r\n                })\r\n                .then((response) => response.json())\r\n                .then(({user, friendStatus}) => {\r\n                    user.friendStatus = friendStatus\r\n                    dispatch({\r\n                        type: USERS_ADD,\r\n                        payload: user\r\n                    })\r\n                    dispatch({\r\n                        type: USERS_FRIENDS_ADD,\r\n                        payload: {user}\r\n                    })\r\n                });\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nexport const removeRequest = (userId, apiToken) => (dispatch) => {\r\n    fetch(`${urlApi}/api/user/remove-request`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then((friendStatus) => {\r\n        dispatch({\r\n            type: USERS_SET_FRIEND_STATUS,\r\n            payload: {userId, friendStatus}\r\n        })\r\n\r\n        if(store.getState().users.friends.getted) {\r\n            if(friendStatus === 2) {\r\n                dispatch({\r\n                    type: USERS_FRIENDS_REMOVE,\r\n                    payload: {userId}\r\n                })\r\n\r\n                if(store.getState().users.requested.getted) {\r\n                    if(store.getState().users.users.find(x => x._id === userId)) {\r\n                        dispatch({\r\n                            type: USERS_REQUESTED_ADD,\r\n                            payload: {user: store.getState().users.users.find(x => x._id === userId)}\r\n                        })\r\n                    } else {\r\n                        fetch(`${urlApi}/api/user/get`, {\r\n                            method: \"post\",\r\n                            headers: {\r\n                                Accept: \"application/json\",\r\n                                \"Content-Type\": \"application/json\",\r\n                                Authorization: `Bearer ${apiToken}`,\r\n                            },\r\n                            body: JSON.stringify({\r\n                                userId: userId\r\n                            })\r\n                        })\r\n                        .then((response) => response.json())\r\n                        .then(({user, friendStatus}) => {\r\n                            user.friendStatus = friendStatus\r\n                            dispatch({\r\n                                type: USERS_ADD,\r\n                                payload: user\r\n                            })\r\n                            dispatch({\r\n                                type: USERS_REQUESTED_ADD,\r\n                                payload: {user}\r\n                            })\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if(store.getState().users.pending.getted && friendStatus === 0) {\r\n            dispatch({\r\n                type: USERS_PENDING_REMOVE,\r\n                payload: {userId}\r\n            })\r\n        }\r\n\r\n        if(store.getState().users.requested.getted && friendStatus === 0) {\r\n            dispatch({\r\n                type: USERS_REQUESTED_REMOVE,\r\n                payload: {userId}\r\n            })\r\n        }\r\n    })\r\n}","// App\r\nimport React from 'react'\r\nimport Avatar from '../User/Avatar'\r\nimport { getHM, timeAt } from '../../Controllers/TimeController'\r\nimport { CSSTransitionGroup } from 'react-transition-group';\r\nimport MessageComponent from './Message'\r\n// import ogs from 'ts-open-graph-scraper'\r\n\r\n// Material\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport QueryBuilderIcon from '@material-ui/icons/QueryBuilder';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport CallMadeIcon from '@material-ui/icons/CallMade';\r\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\r\n\r\nimport Audio from './Audio';\r\n\r\nimport Linkify from 'react-linkify'\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport ActionMenu from '../ActionMenu'\r\nimport { randomInteger } from '../../Controllers/FunctionsController'\r\nimport * as usersActions from '../../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withRouter } from 'react-router-dom';\r\nimport store from '../../Redux/store';\r\nimport { SLIDER_SET } from '../../Redux/constants';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n// import urlMetadata from 'url-metadata'\r\n\r\n// let ogsLink = false\r\n\r\nconst componentDecorator = (href, text, key) => {\r\n    // ogsLink = ogs({url: href}, (error, results, response) => {\r\n    //     console.log('error:', error); // This is returns true or false. True if there was a error. The error it self is inside the results object.\r\n    //     console.log('results:', results); // This contains all of the Open Graph results\r\n    //     console.log('response:', response); // This contains the HTML of page\r\n    // })\r\n    // urlMetadata(href).then((metadata) => {\r\n    //     console.log(metadata)\r\n    // })\r\n    return (\r\n        <a href={href} onClick={(e) => {e.stopPropagation()}} key={key} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            {text}\r\n        </a>\r\n    )\r\n};\r\n\r\nclass Message extends React.PureComponent {\r\n    state = {\r\n        randomId: randomInteger(0, 100000)\r\n    }\r\n\r\n    render() {\r\n        let isHistoryDate = true\r\n        let moreHour = false\r\n\r\n        if(this.props.messages[this.props.index-1]) {\r\n            let date1 = new Date(this.props.message.createdAt);\r\n            let date2 = new Date(this.props.messages[this.props.index-1].createdAt);\r\n            \r\n            if(\r\n                date1.getFullYear() === date2.getFullYear() && \r\n                date1.getMonth() === date2.getMonth() && \r\n                date1.getDate() === date2.getDate()\r\n            ) {\r\n                isHistoryDate = false\r\n            }\r\n\r\n            let diffHours = Math.abs(date1 - date2) / 36e5;\r\n            \r\n            if(diffHours > 1) {\r\n                moreHour = true\r\n            }\r\n        }\r\n\r\n        let isFirst = (\r\n            ((this.props.messages[this.props.index-1] && \r\n            this.props.messages[this.props.index-1].user._id !== this.props.message.user._id) || \r\n            !this.props.messages[this.props.index-1]) || moreHour\r\n        )\r\n\r\n        return (<>\r\n            {isHistoryDate && <div className=\"history-date\">{timeAt(new Date(this.props.message.createdAt))}</div>}\r\n\r\n            <div\r\n                className={`message ${this.props.selected ? 'selected' : ''}`} \r\n                onClick={(e) => {\r\n                    if(this.props.message.isLoading || this.props.message.isError)\r\n                        return\r\n\r\n                    if(this.props.selected) {\r\n                        this.props.unSelect(this.props.message._id)\r\n                    } else {\r\n                        this.props.onSelect(this.props.message)\r\n                    }\r\n                }}\r\n                style={{\r\n                    background: this.props.isRecent ? 'none' : (this.props.message.isLoading || this.props.message.isError) ? '#fff' : (this.props.message.user._id !== this.props.user._id && !this.props.message.isRead) ? '#EFF4F8' : '', \r\n                    cursor: (this.props.message.isLoading || this.props.message.isError) ? 'default' : '',\r\n                    padding: this.props.isRecent ? '8px 14px 8px 6px' : ''\r\n                }}\r\n            >\r\n                {\r\n                    (isFirst || isHistoryDate) && !this.props.isRecent && \r\n                    <span style={{height: 'max-content'}} onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        this.props.history.push({\r\n                            search: `?user=${this.props.message.user._id}`\r\n                        })\r\n                    }}>\r\n                        <Avatar \r\n                            style={{width: 32, height: 32, fontSize: 14, lineHeight: '14px', fontWeight: 600, backgroundColor: `rgb(${this.props.message.user.color})`}} \r\n                            name={this.props.message.user.name.first.charAt(0)+this.props.message.user.name.last.charAt(0)} \r\n                            avatar={this.props.user._id === this.props.message.user._id ? this.props.user.avatar ? this.props.user.avatar : false : this.props.message.user.avatar ? this.props.message.user.avatar : false}\r\n                        />\r\n                    </span>\r\n                }\r\n\r\n                {\r\n                    (!isFirst && !isHistoryDate && !this.props.isRecent) &&\r\n                    <div style={{width: 46}} />\r\n                }\r\n                \r\n                {(!this.props.message.isLoading && !this.props.message.isError) && this.props.canSelect && <span className={`select-indicator ${this.props.selected ? 'active' : ''}`}>\r\n                <CSSTransitionGroup \r\n                    transitionName=\"message-status-transition\"\r\n                    transitionEnterTimeout={100}\r\n                    transitionLeaveTimeout={100}>\r\n                    {this.props.selected && <CheckIcon style={{\r\n                        color: '#fff', \r\n                        fontSize: 16,\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        margin: 'auto'\r\n                    }} />}\r\n                    </CSSTransitionGroup>\r\n                </span>}\r\n                \r\n                \r\n                <div className=\"content col\">\r\n                    {\r\n                        (isFirst || isHistoryDate) &&\r\n                        <h3 onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            this.props.history.push({\r\n                                search: `?user=${this.props.message.user._id}`\r\n                            })\r\n                        }} className=\"user-name\" style={{color: this.props.message.user._id === this.props.user._id ? '#FF3333' : ''}}>\r\n                            {this.props.message.user._id !== this.props.user._id && <>{`${this.props.message.user.name.first} ${this.props.message.user.name.last}`} <span className=\"time-at\">{getHM(this.props.message.createdAt)}</span></>}\r\n                            {this.props.message.user._id === this.props.user._id && <>{`${this.props.user.name.first} ${this.props.user.name.last}`} <span className=\"time-at\">{getHM(this.props.message.createdAt)}</span></>}                            \r\n                        </h3>\r\n                    }\r\n\r\n                    {this.props.message.text && <p className=\"message-text\">\r\n                        <Linkify componentDecorator={componentDecorator}>\r\n                            {this.props.message.type === 'message' && <>\r\n                                {this.props.message.text.replace(/&nbsp;/g, '')\r\n                                    .replace(/&amp;/g, '&')\r\n                                    .replace(/&gt;/g, '>')\r\n                                    .replace(/&lt;/g, '<')\r\n                                    // .replace(/(\\r\\n|\\n|\\r)/gm, \"\")\r\n                                    .replace(/(^\\s*(?!.+)\\n+)|(\\n+\\s+(?!.+)$)/g, \"\")\r\n                                    .replace(/(\\r\\n|\\r|\\n){2,}/g, '$1\\n')\r\n                                }\r\n                            </>}\r\n\r\n                            {this.props.message.type === 'call' && <>\r\n                                {this.props.message.user._id === this.props.user._id && <CallMadeIcon style={{color: '#008FF7', fontSize: 20, marginRight: 8}} />}\r\n                                {this.props.message.user._id !== this.props.user._id && <CallReceivedIcon style={{color: '#008FF7', fontSize: 20, marginRight: 8}} />}\r\n                                {this.props.langProps[this.props.message.text]}\r\n                            </>}\r\n                        </Linkify>\r\n                    </p>}\r\n\r\n                    {!!this.props.message.recentMessages.length && this.props.countRecent > 1 && <p className=\"message-text\">\r\n                        {`Attachmend messages [${this.props.message.recentMessages.length}]`}    \r\n                    </p>}\r\n\r\n                    {!!this.props.message.images.length && <div className=\"message-images\">\r\n                        {this.props.message.images.map((image, index, images) => {\r\n                            let width\r\n                            let isBlur = false\r\n\r\n                            if(images.length <= 3 && images.length !== 2) {\r\n                                width = index === 0 ? '100%' : '50%' \r\n                            } else {\r\n                                width = '50%'\r\n                            }\r\n\r\n                            if(images.length > 4 && index === 3)\r\n                                isBlur = true\r\n                            \r\n                            if(index > 3)\r\n                                return null\r\n\r\n                            if(isBlur)\r\n                                return <div key={index} className=\"image\" style={{width}}>\r\n                                    <div className=\"image-blur\" onClick={(e) => {\r\n                                        e.stopPropagation()\r\n                                        this.props.history.push({\r\n                                            search: `?modal=slider`\r\n                                        })\r\n                                        store.dispatch({\r\n                                            type: SLIDER_SET,\r\n                                            payload: {\r\n                                                images,\r\n                                                index: 0\r\n                                            }\r\n                                        })\r\n                                    }}>\r\n                                        <span>{`+${images.length-3}`}</span>\r\n                                        <img draggable=\"false\" key={index} src={image.path} alt={image.name} />\r\n                                    </div>\r\n                                </div>\r\n\r\n                            return  <div key={index} className=\"image\" style={{width}}>\r\n                                <img draggable=\"false\" onClick={(e) => {\r\n                                    e.stopPropagation()\r\n                                    this.props.history.push({\r\n                                        search: `?modal=slider`\r\n                                    })\r\n                                    store.dispatch({\r\n                                        type: SLIDER_SET,\r\n                                        payload: {\r\n                                            images,\r\n                                            index\r\n                                        }\r\n                                    })\r\n                                }} src={image.path} alt={image.name} />\r\n                            </div>\r\n                        })}\r\n                    </div>}\r\n\r\n                    {!!this.props.message.sounds.length && <div className=\"message-sounds\">\r\n                        {this.props.message.sounds.map((sound, index, images) => {\r\n                            return <Audio\r\n                                key={index}\r\n                                fileName={sound.name}\r\n                                src={sound.path}\r\n                            />\r\n                        })}\r\n                    </div>}\r\n                    \r\n                    \r\n                    {!!this.props.message.files.length && <div className=\"message-files\">\r\n                        {this.props.message.files.map((file, index, images) => {\r\n                            return <div className=\"message-file\" key={index} onClick={(e) => {\r\n                                e.stopPropagation()\r\n                                window.open(file.path, '_self');\r\n                            }}>\r\n                                <InsertDriveFileOutlinedIcon className=\"file-icon\" style={{color: '#008FF7'}} />\r\n                                <div className=\"message-file-info\">\r\n                                    <p className=\"message-file-name\">{file.name}</p>\r\n                                    <p className=\"message-file-size\">{file.size > 999 ? (file.size / 1000).toFixed(1) + ' mb' : Math.ceil(file.size) + ' kb'}</p>\r\n                                </div>\r\n                                <GetAppIcon className=\"download-icon\" style={{color: '#008FF7'}} />\r\n                            </div>\r\n                        })}\r\n                    </div>}\r\n                    \r\n\r\n                    {!!this.props.message.recentMessages.length && this.props.countRecent < 2 && <div className=\"message-recent\">\r\n                        {this.props.message.recentMessages.map((message, index, messages) => {\r\n                            return <MessageComponent countRecent={this.props.countRecent+1} isRecent={true} onSelect={() => {}} openSlider={(sliderImages) => {this.props.openSlider(sliderImages)}} key={index} message={message} messages={messages} index={index} />\r\n                        })}\r\n                    </div>}\r\n                </div>\r\n                \r\n                {!this.props.isRecent && <div className=\"message-status\">\r\n                    <CSSTransitionGroup \r\n                        transitionName=\"message-status-transition\"\r\n                        transitionEnterTimeout={100}\r\n                        transitionLeaveTimeout={100}>\r\n                        {!this.props.canSelect && !this.props.message.isLoading && !this.props.message.isError && this.props.message.isEdit && <EditOutlinedIcon style={{color: '#B8C3CF'}} />}\r\n                    </CSSTransitionGroup>\r\n                </div>}\r\n                {!this.props.isRecent && <div className=\"message-status\">\r\n                    <CSSTransitionGroup \r\n                        transitionName=\"message-status-transition\"\r\n                        transitionEnterTimeout={100}\r\n                        transitionLeaveTimeout={100}>\r\n                            {!this.props.canSelect && this.props.message.user._id === this.props.user._id && this.props.message.isLoading && <QueryBuilderIcon style={{color: '#B8C3CF'}} />}\r\n                            \r\n                            {!this.props.canSelect && this.props.message.user._id === this.props.user._id && !this.props.message.isLoading && !this.props.message.isError && !this.props.message.isRead && <DoneIcon style={{color: '#B8C3CF'}} />}\r\n                            {!this.props.canSelect && this.props.message.user._id === this.props.user._id &&!this.props.message.isLoading && !this.props.message.isError && this.props.message.isRead && <DoneAllIcon style={{color: '#008FF7'}} />}\r\n                            {!this.props.canSelect && this.props.message.user._id === this.props.user._id &&!this.props.message.isLoading && this.props.message.isError &&<>\r\n                            <ActionMenu event=\"hover\" actions={[\r\n                                {text: 'Retry', action: () => {\r\n                                    this.props.retrySendMessage(this.props.message)\r\n                                }},\r\n                                {text: 'Delete', action: () => {\r\n                                    this.props.deleteLocalMessage(this.props.message._id)\r\n                                }},\r\n                            ]} from={'message-error-actions-'+this.state.randomId} />\r\n                            <ErrorOutlineIcon className='error' id={'message-error-actions-'+this.state.randomId} style={{color: '#FF3333'}} />\r\n                        </>}\r\n                    </CSSTransitionGroup>\r\n                </div>}\r\n            </div>\r\n        </>)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Message)))","// App\r\nimport React from 'react'\r\nimport Message from './Message'\r\n\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Material\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { withStyles, CircularProgress } from '@material-ui/core'\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\n// Internet Explorer 6-11\r\nconst isIE = /*@cc_on!@*/false || !!document.documentMode;\r\n\r\n// Edge 20+\r\nconst isEdge = !isIE && !!window.StyleMedia;\r\n\r\nlet waitActiveUser = false\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#fff',\r\n        position: 'absolute',\r\n        color: '#008FF7',\r\n        bottom: 20,\r\n        right: 20,\r\n        zIndex: 2,\r\n        '&:hover': {\r\n            backgroundColor: '#fff',\r\n        }\r\n    }\r\n})\r\n\r\nconst CustomFab = withStyles(fabStyles)(Fab);\r\n\r\nclass Dialog extends React.Component {\r\n    state = {\r\n        showFabToBottom: false,\r\n        activePage: false,\r\n        scrollTop: 0\r\n    }\r\n\r\n    scrollToBottom() {\r\n        if(this.messagesBlock) {\r\n            if(isEdge || isIE)\r\n                this.messagesBlock.view.scrollTop = 100000\r\n            else {\r\n                this.messagesBlock.view.scroll({\r\n                    top: 100000,\r\n                    left: 0,\r\n                    behavior: 'smooth'\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('blur', this.blurPage.bind(this));\r\n        window.removeEventListener('mousemove', this.focusPage.bind(this));\r\n    }\r\n\r\n    focusPage() {\r\n        let active\r\n        if(this.messagesBlock && this.messagesBlock.getScrollTop() + this.messagesBlock.getClientHeight() < this.messagesBlock.getScrollHeight()) {\r\n            active = false\r\n        } else {\r\n            active = true\r\n        }\r\n\r\n        if(!this.state.activePage && active && !!this.props.unRead.length) {\r\n            if(waitActiveUser)\r\n                clearTimeout(waitActiveUser)\r\n\r\n            this.props.readMessages()\r\n            this.setState({activePage: true})\r\n\r\n            waitActiveUser = setTimeout(() => {\r\n                this.setState({activePage: false})\r\n            }, 3000)\r\n        } \r\n    }\r\n\r\n    blurPage() {\r\n        this.setState({activePage: false})\r\n    }\r\n    \r\n    componentDidMount() {\r\n        window.addEventListener('blur', this.blurPage.bind(this));\r\n        window.addEventListener('mousemove', this.focusPage.bind(this));\r\n\r\n        if(this.messagesBlock) {\r\n            this.messagesBlock.view.scrollTop = 100000\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if(\r\n            prevProps.messages.length < this.props.messages.length && \r\n            JSON.stringify(prevProps.messages[0]) === JSON.stringify(this.props.messages[0]) &&\r\n            ((this.messagesBlock.getScrollHeight() - this.messagesBlock.getScrollTop()) < this.messagesBlock.getClientHeight() + 100 ||\r\n            prevProps.messages[prevProps.messages.length-1].user._id === this.props.user._id)\r\n        ) {\r\n            if(this.state.activePage) {\r\n                this.props.readMessages()\r\n            }\r\n            \r\n            this.scrollToBottom()\r\n\r\n            if(this.state.showFabToBottom)\r\n                this.setState({showFabToBottom: false})\r\n        }\r\n\r\n        if(JSON.stringify(prevProps.messages[0]) !== JSON.stringify(this.props.messages[0])) {\r\n            this.messagesBlock.scrollTop(this.messagesBlock.getScrollHeight() - this.state.scrollTop)\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if(nextState.scrollTop !== this.state.scrollTop) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    onScroll() {\r\n        this.setState({scrollTop: this.messagesBlock.getScrollHeight() - this.messagesBlock.getScrollTop()})\r\n        if(this.messagesBlock.getScrollTop() + this.messagesBlock.getClientHeight() < this.messagesBlock.getScrollHeight() - 100) {\r\n            if(!this.state.showFabToBottom)\r\n                this.setState({showFabToBottom: true})\r\n        } else {\r\n            if(this.state.showFabToBottom) {\r\n                this.setState({showFabToBottom: false})\r\n                if(!!this.props.unRead.length) {\r\n                    this.props.readMessages()\r\n                }\r\n            }\r\n        }\r\n\r\n        if(this.props.type === 'room' && this.props.rooms.activeRoom.canLoad && this.messagesBlock.getScrollTop() < 100) {\r\n            this.props.loadMessages()\r\n        }\r\n        \r\n        if(this.props.type === 'dialog' && this.props.dialog.canLoad && this.messagesBlock.getScrollTop() < 100) {\r\n            this.props.loadMessages()\r\n        }\r\n            \r\n\r\n    }\r\n\r\n    viewTypers() {\r\n        if(this.props.rooms.activeRoom.typers.length === 1) {\r\n            return this.props.rooms.activeRoom.typers[0].name.first\r\n        }\r\n\r\n        if(this.props.rooms.activeRoom.typers.length === 2) {\r\n            return `${this.props.rooms.activeRoom.typers[0].name.first}  ${this.props.rooms.activeRoom.typers[1].name.first}`\r\n        }\r\n\r\n        return `${this.props.rooms.activeRoom.typers[0].name.first}  ${this.props.rooms.activeRoom.typers.length-1}`\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div className=\"dialog-wrap\">\r\n                <Scrollbars\r\n                    onScroll={() => {this.onScroll()}}\r\n                    ref={(ref) => {this.messagesBlock = ref}}\r\n                    renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                    renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                    className=\"dialog scroll\"\r\n                    autoHide\r\n                >\r\n                    {((this.props.type === 'room' && this.props.rooms.activeRoom.isLoading) || (this.props.type === 'dialog' && this.props.dialog.isLoading)) && <div className=\"dialog-loading\">\r\n                        <CircularProgress style={{\r\n                            color: '#008FF7',\r\n                        }} />\r\n                    </div>}\r\n                    {this.props.messages.map((message, index, messages) => {\r\n                        return <Message \r\n                            countRecent={0}\r\n                            isRecent={false}\r\n                            selected={this.props.recentMessages.find(x => x._id === message._id)}\r\n                            canSelect={!!this.props.recentMessages.length}\r\n                            key={index} \r\n                            deleteLocalMessage={(_id) => {this.props.deleteLocalMessage(_id)}}\r\n                            retrySendMessage={(message) => {this.props.retrySendMessage(message)}}\r\n                            index={index}\r\n                            message={message} \r\n                            messages={messages} \r\n                            onSelect={(message) => {this.props.onSelect(message)}} \r\n                            unSelect={(id) => {this.props.unSelect(id)}}\r\n                        />\r\n                    })}\r\n\r\n                    {this.props.type === 'room' && <div className=\"dialog-typers\">\r\n                        {!!this.props.rooms.activeRoom.typers.length && <p className=\"typing\">{this.viewTypers()} {this.props.langProps.typing}</p>}\r\n                        {!this.props.rooms.activeRoom.typers.length && <p style={{height: 18}}></p>}\r\n                    </div>}\r\n\r\n                    {this.props.type === 'dialog' && <div className=\"dialog-typers\">\r\n                        {this.props.typing && <p className=\"typing\">{this.props.userName} {this.props.langProps.typing}</p>}\r\n                        {!this.props.typing && <p style={{height: 18}}></p>}\r\n                    </div>}\r\n                </Scrollbars>\r\n\r\n                <CustomFab className={`scroll-to-bottom ${this.state.showFabToBottom ? 'active' : ''}`} color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {this.scrollToBottom()}}>\r\n                    {!!this.props.unRead.length && <span className=\"unread-messages-count\">{this.props.unRead.length}</span>}\r\n                    <ExpandMoreIcon style={{color: '#99AABB'}} />\r\n                </CustomFab>\r\n\r\n                {this.props.type === 'dialog' && this.props.loading && <CircularProgress style={{\r\n                    color: '#008FF7',\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    right: 0,\r\n                    margin: 'auto',\r\n                    top: 'calc(50% - 20px)'\r\n                }} />}\r\n\r\n                {(!this.props.messages.length && !this.props.loading) && <div className=\"data-empty\">\r\n                    <SendIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                    <p>{this.props.langProps.write_your_first_message} {this.props.to}</p>\r\n                </div>}\r\n            </div>  \r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps)(Dialog))","// App\r\nimport React from 'react'\r\n\r\n// Material\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { getHM } from '../../Controllers/TimeController';\r\nimport Linkify from 'react-linkify';\r\nimport Button from '@material-ui/core/Button';\r\nimport MusicNoteIcon from '@material-ui/icons/MusicNote';\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\n\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\nconst componentDecorator = (href, text, key) => (\r\n    <a href={href} onClick={(e) => {e.stopPropagation()}} key={key} target=\"_blank\" rel=\"noopener noreferrer\">\r\n      {text}\r\n    </a>\r\n);\r\n\r\nclass Attachment extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"dialog-attachment\">\r\n                {!!this.props.recentMessages.length && <div className=\"message-attachment\">\r\n                    <Button className=\"btn-cancel-select\" style={{width: 60}} onClick={() => {this.props.unSelectRecentMessages()}}>\r\n                        <CloseIcon style={{color: '#99AABB'}} />\r\n                    </Button>\r\n\r\n                    {this.props.recentMessages.length === 1 &&<div className=\"col message-recent\">\r\n                        <h3 className=\"user-name\">{`${this.props.recentMessages[0].user.name.first} ${this.props.recentMessages[0].user.name.last}`} <span className=\"time-at\">{getHM(this.props.recentMessages[0].createdAt)}</span></h3>\r\n                        <p className=\"message-text\"><Linkify componentDecorator={componentDecorator}>{\r\n                            this.props.recentMessages[0].text ? \r\n                            this.props.recentMessages[0].text : `${this.props.langProps.investments} [${\r\n                                this.props.recentMessages[0].images.length+\r\n                                this.props.recentMessages[0].files.length+\r\n                                this.props.recentMessages[0].sounds.length+\r\n                                this.props.recentMessages[0].recentMessages.length\r\n                            }]`\r\n                        }</Linkify></p>\r\n                    </div>}\r\n\r\n                    {this.props.recentMessages.length > 1 &&<div className=\"col message-recent\">\r\n                        <h3 className=\"user-name\">{this.props.langProps.attachment_messages}</h3>\r\n                        <p className=\"message-text\">{`${this.props.langProps.messages} [${this.props.recentMessages.length}]`}</p>\r\n                    </div>}\r\n                </div>}\r\n\r\n                {!!this.props.images.length && <div className=\"image-attachment\">\r\n                    {this.props.images.map((image, index, images) => {\r\n                        return <div key={index} className=\"image-container\" style={{marginRight: images[index+1] ? 5 : 0}}>\r\n                            <span className=\"btn-delete-image\" onClick={() => {this.props.removeImage(image.id)}}>\r\n                                <CloseIcon style={{color: '#fff'}} />\r\n                            </span>\r\n                            <img src={image.path} alt=\"Attach\" />\r\n                        </div>\r\n                    })}\r\n                </div>}\r\n\r\n                {!!this.props.sounds.length && <div className=\"sound-attachment\">\r\n                    {this.props.sounds.map((sound, index, sounds) => {\r\n                        return <div key={index} className=\"sound-container\">\r\n                            <Button className=\"btn-cancel-select\" style={{minWidth: 60}} onClick={() => {this.props.removeSound(sound.id)}}>\r\n                                <CloseIcon style={{color: '#99AABB'}} />\r\n                            </Button>\r\n\r\n                            <MusicNoteIcon style={{color: '#008FF7'}} />\r\n\r\n                            <p className=\"sound-attachment-name\">{sound.name}</p>\r\n                        </div>\r\n                    })}\r\n                </div>}\r\n\r\n                {!!this.props.files.length && <div className=\"sound-attachment\">\r\n                    {this.props.files.map((file, index, files) => {\r\n                        return <div key={index} className=\"sound-container\">\r\n                            <Button className=\"btn-cancel-select\" style={{minWidth: 60}} onClick={() => {this.props.removeFile(file.id)}}>\r\n                                <CloseIcon style={{color: '#99AABB'}} />\r\n                            </Button>\r\n\r\n                            <InsertDriveFileOutlinedIcon style={{color: '#008FF7'}} />\r\n\r\n                            <p className=\"sound-attachment-name\">{file.name}</p>\r\n                        </div>\r\n                    })}\r\n                </div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(Attachment)","// App\r\nimport React from 'react'\r\nimport ReactResizeDetector from 'react-resize-detector'\r\nimport {CSSTransitionGroup} from 'react-transition-group'\r\n\r\n// Material\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\nconst PlaceHolder = withLang(languages)((props) => {\r\n    return <div className=\"placeholder\">{props.langProps.write_message}</div>\r\n})\r\n\r\nclass InputMessage extends React.Component {\r\n    state = {\r\n        inputMessageHeight: 0,\r\n        text: ''\r\n    }\r\n\r\n    setText(text) {\r\n        this.setState({text})\r\n    }\r\n\r\n    onPaste(event) {\r\n        let items = (event.clipboardData || event.originalEvent.clipboardData).items\r\n        \r\n        for (let index = 0; index < items.length; index++) {\r\n            if (items[index].kind === 'file') {\r\n                let file = items[index].getAsFile()\r\n\r\n                this.props.addFile(file, true)\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if(this.props.isEdit) {\r\n            if(!/\\S/.test(this.state.text) && !this.props.attachedRecentMessages.length && !this.props.images.length && !this.props.files.length && !this.props.sounds.length) {\r\n                this.props.cancelEditMessage()\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={`dialog-input ${this.props.isShow ? '': 'd-none'}`}>\r\n                <IconButton component={'label'} className=\"btn-add-files\">\r\n                    <AttachFileIcon style={{transform: 'rotate(45deg)', color: '#008FF7'}} />\r\n\r\n                    <input \r\n                        type=\"file\" \r\n                        multiple \r\n                        onChange={(e) => {this.props.addFile(e)}}\r\n                        id=\"uploadFile\" \r\n                        style={{display: 'none'}} \r\n                        accept=\"image/jpeg,image/gif,image/jpeg,image/png,application/pdf,text/plain,application/x-zip-compressed,application/zip,application/msword,audio/mpeg\" \r\n                    />\r\n                </IconButton>\r\n\r\n                <textarea className=\"col input-message\" id=\"input-message\" onPaste={(e) => {this.onPaste(e)}}\r\n                    onKeyDown={(e) => {\r\n                        if(e.keyCode === 38 && !this.props.isEdit && !this.state.text.length) {\r\n                            this.props.setLastEditMessage()\r\n                        }\r\n\r\n                        if (e.keyCode === 13 && !e.shiftKey) {\r\n                            e.preventDefault()\r\n                            if(/\\S/.test(this.state.text) || !!this.props.attachedRecentMessages.length  || !!this.props.images.length || !!this.props.files.length || !!this.props.sounds.length) {\r\n                                if(!this.props.isEdit) {\r\n                                    this.props.sendMessage(this.state.text)\r\n                                    this.setState({text: ''})\r\n                                }\r\n                                else {\r\n                                    this.props.sendEditMessage(this.state.text)\r\n                                    this.setState({text: ''})\r\n                                }\r\n                                let inputMessage = document.getElementById('input-message')\r\n                                inputMessage.style.maxHeight = \"60px\";\r\n                            }\r\n                        }\r\n                    }}\r\n                    onInput={() => {\r\n                        let inputMessage = document.getElementById('input-message')\r\n                        inputMessage.style.height = \"5px\";\r\n                        inputMessage.style.height = (inputMessage.scrollHeight)+\"px\";\r\n\r\n                        if(inputMessage.scrollHeight > 179) {\r\n                            inputMessage.style.maxHeight = '179px'\r\n                        } else {\r\n                            inputMessage.style.maxHeight = (inputMessage.scrollHeight)+\"px\";\r\n                        }\r\n                    }}\r\n                    onChange={(e) => {\r\n                        this.props.typing(e.target.value, this.state.text)\r\n                        this.setState({text: e.target.value})\r\n                    }}\r\n                    value={this.state.text}\r\n                ></textarea>\r\n\r\n                {!this.state.text && <PlaceHolder />}\r\n\r\n                {!this.props.isEdit && <CSSTransitionGroup \r\n                    transitionName=\"btn-send-message\"\r\n                    transitionEnterTimeout={100}\r\n                    transitionLeaveTimeout={100}>\r\n                     {(/\\S/.test(this.state.text) || !!this.props.files.length || !!this.props.images.length|| !!this.props.sounds.length || !!this.props.attachedRecentMessages.length) && <IconButton onClick={() => {\r\n                            this.props.sendMessage(this.state.text)\r\n                            this.setState({text: ''})\r\n                            let inputMessage = document.getElementById('input-message')\r\n                            inputMessage.style.maxHeight = \"60px\";\r\n                        }} className=\"btn-send-message\">\r\n                        <SendIcon style={{color: '#008FF7'}} />\r\n                    </IconButton>}\r\n                </CSSTransitionGroup>}\r\n\r\n                {this.props.isEdit && <CSSTransitionGroup \r\n                    transitionName=\"btn-send-message\"\r\n                    transitionEnterTimeout={100}\r\n                    transitionLeaveTimeout={100}>\r\n                     {(\r\n                        JSON.stringify({\r\n                            text: this.props.editMessage.text,\r\n                            images: this.props.editMessage.images,\r\n                            sounds: this.props.editMessage.sounds,\r\n                            files: this.props.editMessage.files,\r\n                            attachedRecentMessages: this.props.editMessage.recentMessages,\r\n                        }) !== \r\n                        JSON.stringify({\r\n                            text: this.state.text,\r\n                            images: this.props.images,\r\n                            sounds: this.props.sounds,\r\n                            files: this.props.files,\r\n                            attachedRecentMessages: this.props.attachedRecentMessages\r\n                        })) && <IconButton ref={(node) => {\r\n                        if (node) {\r\n                            node.style.setProperty(\"margin-right\", \"0\", \"important\");\r\n                        }\r\n                        }} \r\n                        onClick={() => {\r\n                            this.props.sendEditMessage(this.state.text)\r\n                            this.setState({text: ''})\r\n                            let inputMessage = document.getElementById('input-message')\r\n                            inputMessage.style.maxHeight = \"60px\";\r\n                        }} className=\"btn-send-message\">\r\n                        <EditOutlinedIcon style={{color: '#008FF7'}} />\r\n                    </IconButton>}\r\n\r\n                    <IconButton ref={(node) => {\r\n                        if (node) {\r\n                            node.style.setProperty(\"margin-left\", \"0\", \"important\");\r\n                        }\r\n                        }} \r\n                        onClick={() => {\r\n                            this.props.cancelEditMessage()\r\n                            let inputMessage = document.getElementById('input-message')\r\n                            inputMessage.style.maxHeight = \"60px\";\r\n                        }} className=\"btn-send-message\">\r\n                        <CloseIcon style={{color: '#008FF7'}} />\r\n                    </IconButton>\r\n                </CSSTransitionGroup>}\r\n\r\n                <ReactResizeDetector handleHeight onResize={(width, inputMessageHeight) => {\r\n                    this.setState({inputMessageHeight})\r\n                }} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default InputMessage","// App\r\nimport React from 'react'\r\n\r\n// Material\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport Button from '@material-ui/core/Button';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\n\r\nclass ToolbarMessage extends React.Component {\r\n    state = {\r\n        inputMessageHeight: 0\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"dialog-input\">\r\n                <Button className=\"btn-reply\" onClick={() => {this.props.addAttachmentRecentMessage()}}>\r\n                    <ReplyIcon style={{color: '#99AABB'}} />\r\n                </Button>\r\n\r\n                <Button className=\"btn-forward\" onClick={() => {this.props.addAttachmentForwardMessage()}}>\r\n                    <ReplyIcon style={{color: '#99AABB', transform: 'scaleX(-1)'}} />\r\n                </Button>\r\n\r\n                <div className=\"col\"></div>\r\n\r\n                {(this.props.recentMessages[0].user._id === this.props.user._id && this.props.recentMessages[0].type !== 'call' && this.props.recentMessages.length === 1) && <Button className=\"btn-edit-message\" onClick={() => {\r\n                    this.props.setEditMessage()\r\n                }}>\r\n                    <EditOutlinedIcon style={{color: '#99AABB'}} />\r\n                </Button>}\r\n\r\n                {!this.props.recentMessages.find(message => message.user._id !== this.props.user._id) && <Button className=\"btn-delete-message\" onClick={() => {\r\n                    this.props.deleteMessage()\r\n                }}>\r\n                    <DeleteOutlineIcon style={{color: '#99AABB'}} />\r\n                </Button>}\r\n\r\n                <Button className=\"btn-cancel-select\" onClick={() => {\r\n                    this.props.cancelAttachmentRecentMessage()\r\n                }}>\r\n                    <CloseIcon style={{color: '#99AABB'}} />\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ToolbarMessage)","// App\r\nimport React from 'react'\r\nimport Dialog from './Dialog'\r\nimport {CSSTransitionGroup} from 'react-transition-group'\r\nimport { toast } from 'react-toastify';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../../Redux/actions/rooms'\r\nimport * as dialogsActions from '../../Redux/actions/dialogs'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport Attachment from './Attachment';\r\nimport InputMessage from './InputMessage'\r\nimport ToolbarMessage from './ToolbarMessage'\r\nimport SocketController from '../../Controllers/SocketController'\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\n\r\nlet waitFastRead = false\r\n\r\nclass Chat extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.inputMessage = React.createRef()\r\n    }\r\n\r\n    state = {\r\n        recentMessages: [],\r\n        attachedRecentMessages: this.props.dialogs.forwardMessages,\r\n        sounds: [],\r\n        files: [],\r\n        images: [],\r\n        inputMessageHeight: 0,\r\n        isEdit: false,\r\n        editMessage: {},\r\n        canTyping: true,\r\n        drag: false\r\n    }\r\n\r\n    dropRef = React.createRef()\r\n    dragCounter = 0\r\n\r\n    componentDidMount() {\r\n        if(!!this.props.dialogs.forwardMessages.length) {\r\n            this.props.dialogsActions.setForward([])\r\n        }\r\n\r\n        let div = this.dropRef.current\r\n        div.addEventListener('dragenter', this.handleDragIn)\r\n        div.addEventListener('dragleave', this.handleDragOut)\r\n        div.addEventListener('dragover', this.handleDrag)\r\n        div.addEventListener('drop', this.handleDrop)\r\n\r\n        let drafts = {...JSON.parse(localStorage.getItem('drafts'))}\r\n        \r\n        if(drafts['draft-'+this.props.dialogId])\r\n            this.inputMessage.current.setText(drafts['draft-'+this.props.dialogId])\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        let div = this.dropRef.current\r\n        div.removeEventListener('dragenter', this.handleDragIn)\r\n        div.removeEventListener('dragleave', this.handleDragOut)\r\n        div.removeEventListener('dragover', this.handleDrag)\r\n        div.removeEventListener('drop', this.handleDrop)\r\n    }\r\n\r\n    handleDrag = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n\r\n    handleDragIn = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter++\r\n        if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\r\n            this.setState({drag: true})\r\n        }\r\n    }\r\n\r\n    handleDragOut = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.dragCounter--\r\n        if (this.dragCounter === 0) {\r\n            this.setState({drag: false})\r\n        }\r\n    }\r\n\r\n    handleDrop = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        this.setState({drag: false})\r\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n          this.handleDropFiles(e.dataTransfer.files)\r\n          e.dataTransfer.clearData()\r\n          this.dragCounter = 0    \r\n        }\r\n      }\r\n\r\n    handleDropFiles = (files) => {\r\n        for (var i = 0; i < files.length; i++) {\r\n            this.addFile(files, false, true)\r\n        }\r\n    }\r\n\r\n    sendMessage(text) {\r\n        if(/\\S/.test(text) || !!this.state.attachedRecentMessages.length || !!this.state.images.length || !!this.state.files.length|| !!this.state.sounds.length) {\r\n            let drafts = {...JSON.parse(localStorage.getItem('drafts'))}\r\n            delete drafts['draft-'+this.props.dialogId]\r\n            localStorage.setItem('drafts', JSON.stringify(drafts));\r\n            switch (this.props.type) {\r\n                case 'room': \r\n                    this.props.roomsActions.sendMessage({\r\n                        text: text,\r\n                        roomId: this.props.roomId,\r\n                        images: this.state.images,\r\n                        files: this.state.files,\r\n                        sounds: this.state.sounds,\r\n                        dialogId: this.props.dialogId,\r\n                        recentMessages: this.state.attachedRecentMessages\r\n                    }, this.props.user.apiToken)\r\n                    break;\r\n                case 'dialog': \r\n                    this.props.dialogsActions.sendMessage({\r\n                        text: text,\r\n                        userId: this.props.userId,\r\n                        images: this.state.images,\r\n                        files: this.state.files,\r\n                        sounds: this.state.sounds,\r\n                        dialogId: this.props.dialogId,\r\n                        recentMessages: this.state.attachedRecentMessages\r\n                    }, this.props.user.apiToken)\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            \r\n            this.setState({attachedRecentMessages: [], images: [], sounds: [], files: []})\r\n            this.inputMessage.current.setText('')\r\n        }\r\n    }\r\n\r\n    sendEditMessage(text) {\r\n        if(/\\S/.test(text) || !!this.state.attachedRecentMessages.length || !!this.state.images.length || !!this.state.sounds.length || !!this.state.files.length) {\r\n            switch (this.props.type) {\r\n                case 'room': \r\n                    this.props.roomsActions.editMessage({\r\n                        _id: this.state.editMessage._id,\r\n                        text: text,\r\n                        roomId: this.props.roomId,\r\n                        images: this.state.images,\r\n                        files: this.state.files,\r\n                        sounds: this.state.sounds,\r\n                        dialogId: this.props.dialogId,\r\n                        recentMessages: this.state.attachedRecentMessages\r\n                    }, this.props.user.apiToken)\r\n                    break;\r\n                case 'dialog': \r\n                    this.props.dialogsActions.editMessage({\r\n                        _id: this.state.editMessage._id,\r\n                        text: text,\r\n                        userId: this.props.userId,\r\n                        images: this.state.images,\r\n                        files: this.state.files,\r\n                        sounds: this.state.sounds,\r\n                        dialogId: this.props.dialogId,\r\n                        recentMessages: this.state.attachedRecentMessages\r\n                    }, this.props.user.apiToken)\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            \r\n           this.cancelEditMessage()\r\n        }\r\n    }\r\n\r\n    deleteMessage() {\r\n        switch (this.props.type) {\r\n            case 'room': \r\n                this.props.roomsActions.deleteMessage({\r\n                    roomId: this.props.roomId,\r\n                    deleteMessages: this.state.recentMessages\r\n                }, this.props.user.apiToken)\r\n                break;\r\n            case 'dialog': \r\n                this.props.dialogsActions.deleteMessage({\r\n                    otherId: this.props.userId,\r\n                    dialogId: this.props.dialogId,\r\n                    deleteMessages: this.state.recentMessages\r\n                }, this.props.user.apiToken)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.setState({recentMessages: []})\r\n    }\r\n\r\n    retrySendMessage(message) {\r\n        switch (this.props.type) {\r\n            case 'room': \r\n                message.roomId = this.props.rooms.activeRoom._id\r\n                message.dialogId = this.props.dialogId\r\n                this.props.roomsActions.retrySendMessage(message, this.props.user.apiToken)\r\n                break;\r\n            case 'dialog': \r\n                message.userId = this.props.userId\r\n                message.dialogId = this.props.dialogId\r\n                this.props.dialogsActions.retrySendMessage(message, this.props.user.apiToken)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    deleteLocalMessage(_id) {\r\n        switch (this.props.type) {\r\n            case 'room': \r\n                this.props.roomsActions.deleteLocalMessage(_id)\r\n                break;\r\n            case 'dialog': \r\n                this.props.dialogsActions.deleteLocalMessage(_id, this.props.dialogId)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    addAttachmentRecentMessage() {\r\n        this.setState({\r\n            attachedRecentMessages: this.state.recentMessages,\r\n            recentMessages: []\r\n        })\r\n    }\r\n\r\n    addAttachmentForwardMessage() {\r\n        this.props.dialogsActions.setForward(this.state.recentMessages)\r\n        this.setState({\r\n            recentMessages: []\r\n        })\r\n    }\r\n\r\n    cancelAttachmentRecentMessage() {\r\n        this.setState({\r\n            recentMessages: []\r\n        })\r\n    }\r\n\r\n    setEditMessage() {\r\n        this.inputMessage.current.setText(this.state.recentMessages[0].text)\r\n\r\n        this.state.recentMessages[0].images.map((x, i) => {\r\n            x.id = i\r\n            return 1\r\n        })\r\n        this.state.recentMessages[0].sounds.map((x, i) => {\r\n            x.id = i\r\n            return 1\r\n        })\r\n        this.state.recentMessages[0].files.map((x, i) => {\r\n            x.id = i\r\n            return 1\r\n        })\r\n\r\n        this.setState({\r\n            images: this.state.recentMessages[0].images,\r\n            sounds: this.state.recentMessages[0].sounds,\r\n            files: this.state.recentMessages[0].files,\r\n            recentMessages: [],\r\n            attachedRecentMessages: this.state.recentMessages[0].recentMessages,\r\n            isEdit: true,\r\n            editMessage: this.state.recentMessages[0]\r\n        })\r\n    }\r\n\r\n    setLastEditMessage() {\r\n        let lastMyMessage = this.props.messages.slice().reverse().find(x => x.user._id === this.props.user._id)\r\n\r\n        lastMyMessage.images.map((x, i) => {\r\n            x.id = i\r\n            return 1\r\n        })\r\n        lastMyMessage.sounds.map((x, i) => {\r\n            x.id = i\r\n            return 1\r\n        })\r\n        lastMyMessage.files.map((x, i) => {\r\n            x.id = i\r\n            return 1\r\n        })\r\n\r\n        if(lastMyMessage) {\r\n            this.inputMessage.current.setText(lastMyMessage.text)\r\n            this.setState({\r\n                images: lastMyMessage.images,\r\n                sounds: lastMyMessage.sounds,\r\n                files: lastMyMessage.files,\r\n                recentMessages: [],\r\n                attachedRecentMessages: lastMyMessage.recentMessages,\r\n                isEdit: true,\r\n                editMessage: lastMyMessage\r\n            })\r\n        }\r\n    }\r\n\r\n    cancelEditMessage() {\r\n        this.inputMessage.current.setText('')\r\n        this.setState({\r\n            images: [],\r\n            sounds: [],\r\n            files: [],\r\n            recentMessages: [],\r\n            attachedRecentMessages: [],\r\n            isEdit: false,\r\n            editMessage: {}\r\n        })\r\n    }\r\n\r\n    readMessages() {\r\n        if(waitFastRead)\r\n            clearTimeout(waitFastRead)\r\n\r\n        switch (this.props.type) {\r\n            case 'room': \r\n                waitFastRead = setTimeout(() => {\r\n                    this.props.roomsActions.readMessages({\r\n                        dialogId: this.props.dialogId, \r\n                        roomId: this.props.roomId, \r\n                        userId: this.props.user._id\r\n                    }, this.props.user.apiToken)\r\n                }, 100)\r\n                break;\r\n            case 'dialog': \r\n                waitFastRead = setTimeout(() => {\r\n                    this.props.dialogsActions.readMessages({\r\n                        dialogId: this.props.dialogId, \r\n                        otherId: this.props.userId, \r\n                        userId: this.props.user._id\r\n                    }, this.props.user.apiToken)\r\n                }, 100)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    loadMessages() {\r\n        switch (this.props.type) {\r\n            case 'room': \r\n                this.props.roomsActions.loadMessages({dialogId: this.props.dialogId}, this.props.user.apiToken)\r\n                break;\r\n            case 'dialog': \r\n                this.props.dialogsActions.loadMessages({dialogId: this.props.dialogId}, this.props.user.apiToken)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    addFile(e, paste = false, drag = false) {\r\n        let sounds = [...this.state.sounds]\r\n        let files = [...this.state.files]\r\n        let images = [...this.state.images]\r\n\r\n        let counter = sounds.length + files.length + images.length\r\n        \r\n        if(!paste && !drag) {\r\n            for (let i = 0; i < e.target.files.length; i++) {\r\n                if(counter > 9) {\r\n                    toast.error(\"Max upload 10 attachments!\", {\r\n                        position: toast.POSITION.TOP_CENTER\r\n                    });\r\n                    break\r\n                }\r\n\r\n                let file = {\r\n                    path: (window.URL || window.webkitURL).createObjectURL(new Blob([e.target.files[i]], {type: e.target.files[i].type})), \r\n                    file: e.target.files[i], \r\n                    name: e.target.files[i].name, \r\n                    type: e.target.files[i].name.split('.').pop(),\r\n                    size: e.target.files[i].size / 1000\r\n                }\r\n                \r\n                if(file.type === 'png' || file.type === 'jpg' || file.type === 'jpeg' || file.type === 'gif') {\r\n                    file.id = images.length\r\n                    images.push(file)\r\n                }\r\n\r\n                if(file.type === 'txt' || file.type === 'pdf' || file.type === 'docx' || file.type === 'zip' || file.type === 'doc') {\r\n                    file.id = files.length\r\n                    files.push(file)\r\n                }\r\n\r\n                if(file.type === 'mp3') {\r\n                    file.id = sounds.length\r\n                    sounds.push(file)\r\n                }\r\n\r\n                counter++\r\n            }\r\n\r\n            e.target.value = null;\r\n        }\r\n\r\n        if(paste) {\r\n            if(counter > 9) {\r\n                toast.error(\"Max upload 10 attachment!\", {\r\n                    position: toast.POSITION.TOP_CENTER\r\n                });\r\n            } else {\r\n                let file = {\r\n                    id: images.length,\r\n                    path: (window.URL || window.webkitURL).createObjectURL(new Blob([e], {type: e.type})), \r\n                    file: e, \r\n                    name: e.name, \r\n                    type: e.name.split('.').pop()\r\n                }\r\n\r\n                images.push(file)\r\n            }\r\n        }\r\n\r\n        if(drag) {\r\n            for (let i = 0; i < e.length; i++) {\r\n                if(counter > 9) {\r\n                    toast.error(\"Max upload 10 attachment!\", {\r\n                        position: toast.POSITION.TOP_CENTER\r\n                    });\r\n                    break\r\n                }\r\n\r\n                let file = {\r\n                    path: (window.URL || window.webkitURL).createObjectURL(new Blob([e[i]], {type: e[i].type})), \r\n                    file: e[i], \r\n                    name: e[i].name, \r\n                    type: e[i].name.split('.').pop(),\r\n                    size: e[i].size / 1000\r\n                }\r\n                \r\n                if(file.type === 'png' || file.type === 'jpg' || file.type === 'jpeg' || file.type === 'gif') {\r\n                    file.id = images.length\r\n                    images.push(file)\r\n                }\r\n\r\n                if(file.type === 'txt' || file.type === 'pdf' || file.type === 'docx' || file.type === 'zip' || file.type === 'doc') {\r\n                    file.id = files.length\r\n                    files.push(file)\r\n                }\r\n\r\n                if(file.type === 'mp3') {\r\n                    file.id = sounds.length\r\n                    sounds.push(file)\r\n                }\r\n\r\n                counter++\r\n            }\r\n        }\r\n\r\n        this.setState({sounds, files, images})\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if(this.state.canTyping !== nextState.canTyping) {\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    typing(newText, prevText) {\r\n        if(newText > prevText && !this.state.isEdit) {\r\n            if(this.state.canTyping) {\r\n                this.setState({canTyping: false})\r\n\r\n                switch (this.props.type) {\r\n                    case 'room': \r\n                        SocketController.typingRoom(this.props.rooms.activeRoom._id)\r\n                        break;\r\n                    case 'dialog': \r\n                        SocketController.typingDialog(this.props.userId, this.props.user._id)\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                \r\n                setTimeout(() => {\r\n                    this.setState({canTyping: true})\r\n                }, 2500)\r\n            }\r\n        }\r\n\r\n        if(!this.state.isEdit) {\r\n            let drafts = {...JSON.parse(localStorage.getItem('drafts'))}\r\n            drafts['draft-'+this.props.dialogId] = newText\r\n            if(!drafts['draft-'+this.props.dialogId] || !/\\S/.test(drafts['draft-'+this.props.dialogId]))\r\n                delete drafts['draft-'+this.props.dialogId]\r\n            localStorage.setItem('drafts', JSON.stringify(drafts));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n        <>\r\n            <div className=\"dialog-container\" ref={this.dropRef}>\r\n                {this.state.drag &&\r\n                    <div className=\"drag-and-drop-container\">\r\n                        <div className=\"data-empty\">\r\n                            <InsertDriveFileOutlinedIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                            <p>Drag & drop files here to attach</p>\r\n                        </div>\r\n                    </div>\r\n                }\r\n\r\n                <Dialog \r\n                    loadMessages={() => {this.loadMessages()}}\r\n                    retrySendMessage={(message) => {this.retrySendMessage(message)}}\r\n                    deleteLocalMessage={(_id) => {this.deleteLocalMessage(_id)}}\r\n                    messages={this.props.messages}\r\n                    to={this.props.to}\r\n                    dialog={this.props.dialog}\r\n                    userName={this.props.userName}\r\n                    typing={this.props.typing}\r\n                    loading={this.props.loading}\r\n                    type={this.props.type}\r\n                    unRead={this.props.messages.filter(x => !x.isRead && x.user._id !== this.props.user._id)}\r\n                    recentMessages={this.state.recentMessages}\r\n                    onSelect={(message) => {\r\n                        this.setState({recentMessages: [...this.state.recentMessages, message]})\r\n                    }} \r\n                    unSelect={(id) => {\r\n                        this.setState({recentMessages: [\r\n                            ...this.state.recentMessages.filter(message => {                        \r\n                                return message._id !== id\r\n                            })\r\n                        ]})\r\n                    }}\r\n                    readMessages={() => {\r\n                        this.readMessages()\r\n                    }}\r\n                />\r\n\r\n                <CSSTransitionGroup \r\n                    transitionName=\"scroll-to-bottom\"\r\n                    transitionEnterTimeout={100}\r\n                    transitionLeaveTimeout={100}>\r\n                    {(!!this.state.attachedRecentMessages.length || !!this.state.images.length || !!this.state.sounds.length || !!this.state.files.length) && \r\n                        <Attachment \r\n                            images={this.state.images} \r\n                            recentMessages={this.state.attachedRecentMessages} \r\n                            files={this.state.files} \r\n                            sounds={this.state.sounds}\r\n                            unSelectRecentMessages={() => {\r\n                                this.setState({attachedRecentMessages: []})\r\n                            }}\r\n                            removeImage={(id) => {\r\n                                this.setState({images: [\r\n                                    ...this.state.images.filter(image => {                        \r\n                                        return image.id !== id\r\n                                    })\r\n                                ]})\r\n                            }}\r\n                            removeSound={(id) => {\r\n                                this.setState({sounds: [\r\n                                    ...this.state.sounds.filter(sound => {                        \r\n                                        return sound.id !== id\r\n                                    })\r\n                                ]})\r\n                            }}\r\n                            removeFile={(id) => {\r\n                                this.setState({files: [\r\n                                    ...this.state.files.filter(file => {                        \r\n                                        return file.id !== id\r\n                                    })\r\n                                ]})\r\n                            }}\r\n                        />\r\n                    }\r\n                </CSSTransitionGroup>\r\n\r\n                <InputMessage \r\n                    isShow={!this.state.recentMessages.length}\r\n                    ref={this.inputMessage}\r\n                    cancelEditMessage={() => {this.cancelEditMessage()}}\r\n                    isEdit={this.state.isEdit}\r\n                    editMessage={this.state.editMessage}\r\n                    sendEditMessage={(text) => {this.sendEditMessage(text)}}\r\n                    images={this.state.images} \r\n                    sounds={this.state.sounds} \r\n                    files={this.state.files} \r\n                    attachedRecentMessages={this.state.attachedRecentMessages} \r\n                    sendMessage={(text) => {this.sendMessage(text)}}\r\n                    typing={(newText, prevText) => {this.typing(newText, prevText)}}\r\n                    addFile={(e, paste) => {this.addFile(e, paste)}} \r\n                    setLastEditMessage={() => {this.setLastEditMessage()}}\r\n                />\r\n\r\n                {!!this.state.recentMessages.length && \r\n                    <ToolbarMessage \r\n                        addAttachmentRecentMessage={() => {this.addAttachmentRecentMessage()}}\r\n                        cancelAttachmentRecentMessage={() => {this.cancelAttachmentRecentMessage()}}\r\n                        addAttachmentForwardMessage={() => {this.addAttachmentForwardMessage()}} \r\n                        deleteMessage={() => {this.deleteMessage()}}\r\n                        recentMessages={this.state.recentMessages}\r\n                        setEditMessage={() => {this.setEditMessage()}}\r\n                    />\r\n                }\r\n            </div>\r\n        </>)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms,\r\n        dialogs: state.dialogs\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n        dialogsActions: bindActionCreators(dialogsActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat)","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)'\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        textAlign             : 'center'\r\n    }\r\n};\r\n\r\nclass RoomJoinError extends React.Component {\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            style={customStylesModal}\r\n            contentLabel=\"Error join room\"\r\n        >\r\n            <ErrorOutlineIcon style={{color: '#FF3333', fontSize: 60}} />\r\n            <h2 className=\"modal-title\">Error</h2>\r\n            <p className=\"modal-text\">{this.props.rooms.activeRoom.error.msg}</p>\r\n            <button className=\"button-blue\" type=\"submit\" style={{width: 'max-content'}} onClick={() => {\r\n                this.props.history.push('/')\r\n            }}>Back</button>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(RoomJoinError))","// App\r\nimport React from 'react'\r\nimport {PageSettings} from '../PageSettings'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\n\r\n// Material\r\nimport { withRouter } from 'react-router-dom'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport Chat from '../../Partials/Chat/Chat'\r\nimport RoomJoinError from '../../Modals/RoomJoinError'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\n\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport { withStyles, Tooltip } from '@material-ui/core'\r\nimport WebRtcController from '../../Controllers/WebRtcController'\r\nimport SocketController from '../../Controllers/SocketController'\r\nimport MusicOffIcon from '@material-ui/icons/MusicOff';\r\nimport CallEndIcon from '@material-ui/icons/CallEnd';\r\nimport Avatar from '../../Partials/User/Avatar';\r\nimport ActionMenu from '../../Partials/ActionMenu';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#fff',\r\n        color: '#008FF7',\r\n        zIndex: 2,\r\n        '&:hover': {\r\n            backgroundColor: '#fff',\r\n        }\r\n    }\r\n})\r\n\r\nconst CustomFab = withStyles(fabStyles)(Fab);\r\n\r\nconst fabStylesCustom = theme => ({\r\n    root: {\r\n        backgroundColor: '#fff',\r\n        color: '#008FF7',\r\n        zIndex: 2,\r\n        width: 36,\r\n        height: 36,\r\n        boxShadow: 'none!important',\r\n        marginLeft: 'auto',\r\n        marginRight: '14px',\r\n        '&:hover': {\r\n            backgroundColor: '#fff',\r\n            boxShadow: 'none',\r\n        }\r\n    }\r\n})\r\n\r\nconst CustomFab2 = withStyles(fabStylesCustom)(Fab);\r\n\r\nconst Members = withRouter((props) => {\r\n    return <Scrollbars\r\n        renderTrackVertical={() => <div className=\"track-vertical\"/>}\r\n        renderThumbVertical={() => <div className=\"thumb-vertical\"/>}\r\n        className=\"theme-members scroll\"\r\n        autoHide\r\n    >\r\n        {props.users.map((user, index) => \r\n            <div key={index} style={{cursor: 'pointer'}} className=\"member\" onClick={() => {\r\n                props.history.push({\r\n                    search: `?user=${user._id}`\r\n                })\r\n            }}>\r\n                <Avatar avatarStyle={{borderRadius: 0}} avatar={user.avatar ? user.avatar : false} name={user.name.first.charAt(0)+user.name.last.charAt(0)} style={{fontSize: 30, borderRadius: 0, width: '100%', height: '100%', backgroundColor: `rgb(${user.color})`}}  />\r\n                {user.speaking && <span className=\"speaking\"></span>}\r\n                <span className=\"user-name\">{user.name.first} {user.name.last}</span>\r\n            </div>\r\n        )}\r\n    </Scrollbars>\r\n})\r\n\r\nclass MediaStream extends React.PureComponent {\r\n    componentDidMount() {\r\n        this.audio.srcObject = this.props.stream\r\n    }\r\n\r\n    render() {\r\n        return <audio ref={ref => {this.audio = ref}} style={{display: 'none'}} autoPlay controls></audio>\r\n    }\r\n}\r\n\r\nclass Room extends React.Component {\r\n    static contextType = PageSettings;\r\n\r\n    componentDidMount() {\r\n        this.context.toggleHeader(false)\r\n\r\n        let waitSocket = setInterval(() => {\r\n            if(SocketController.getSocketId()) {\r\n                this.props.roomsActions.joinRoom({id: this.props.match.params.id, apiToken: this.props.user.apiToken})\r\n                clearInterval(waitSocket)\r\n            }\r\n        }, 100);\r\n        \r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.roomsActions.leaveRoom(this.props.rooms.activeRoom._id, this.props.rooms.activeRoom.lang)\r\n    }\r\n\r\n    render() {\r\n        if(this.props.rooms.activeRoom && this.props.rooms.activeRoom.error) {\r\n            return <RoomJoinError isOpen={true} />\r\n        }\r\n\r\n        return this.props.rooms.activeRoom && (\r\n            <>  \r\n                {this.props.rooms.activeRoom.remoteStream && <MediaStream stream={this.props.rooms.activeRoom.remoteStream} />}\r\n                <div className=\"col-xl-3 col-lg-6 col-md-6\">\r\n                    <div className=\"theme-header\">\r\n                        <IconButton className=\"back-btn\" onClick={() => {\r\n                            this.props.history.push('/')\r\n                        }}>\r\n                            <ArrowBackIcon fontSize=\"small\" style={{color: '#008FF7'}} />\r\n                        </IconButton>\r\n                        \r\n                        <div className=\"theme-info\">\r\n                            <h2 className=\"theme-title\">{this.props.rooms.activeRoom.title}</h2>\r\n                            <h3 className=\"theme-online-counter\">{this.props.rooms.activeRoom.users.length + 1} {this.props.langProps.online}</h3>\r\n                        </div>\r\n\r\n                        <CustomFab2 id={'dialog-more-actions-'+this.props.rooms.activeRoom._id} color=\"primary\" size=\"small\" aria-label=\"more\">\r\n                            <MoreVertIcon style={{color: '#008FF7'}} />\r\n                        </CustomFab2>\r\n                        <ActionMenu event=\"click\" bottom={true} right={true} actions={\r\n                        this.props.rooms.activeRoom.ownerId === this.props.user._id ? [\r\n                            {text: this.props.langProps.invite_friends, action: () => {\r\n                                this.props.history.push({\r\n                                    search: '?act=invite'\r\n                                })\r\n                            }},\r\n                            {text: this.props.langProps.show_investments, action: () => {\r\n                                this.props.history.push({\r\n                                    search: `?modal=investments`\r\n                                })\r\n                            }},\r\n                            {\r\n                                text: this.props.langProps.edit_room,\r\n                                action: () => {\r\n                                    this.props.history.push({\r\n                                        search: '?act=editRoom'\r\n                                    })\r\n                                }\r\n                            },\r\n                            {\r\n                                text: this.props.langProps.delete_room,\r\n                                action: () => {\r\n                                    this.props.history.push({\r\n                                        search: '?act=deleteRoom'\r\n                                    })\r\n                                }\r\n                            }\r\n                        ] : [\r\n                            {\r\n                                text: this.props.langProps.invite_friends, action: () => {\r\n                                    this.props.history.push({\r\n                                        search: '?act=invite'\r\n                                    })\r\n                                }\r\n                            },\r\n                            {text: this.props.langProps.show_investments, action: () => {\r\n                                this.props.history.push({\r\n                                    search: `?modal=investments`\r\n                                })\r\n                            }}\r\n                        ]} from={'dialog-more-actions-'+this.props.rooms.activeRoom._id} />\r\n                    </div>\r\n\r\n\r\n                    <div className=\"theme-sidebar\">\r\n                        <Chat \r\n                        messages={this.props.rooms.activeRoom.dialog.messages} \r\n                        type=\"room\" \r\n                        to={this.props.rooms.activeRoom.title} \r\n                        dialogId={this.props.rooms.activeRoom.dialog._id} \r\n                        roomId={this.props.rooms.activeRoom._id} />\r\n                    </div>\r\n                </div>\r\n                \r\n\r\n                <div className=\"col-xl-9 col-lg-6 col-md-6 theme-screen\">\r\n                    {this.props.rooms.activeRoom && <Members users={this.props.rooms.activeRoom.users} />}\r\n\r\n                    <div className=\"media-options\">\r\n                        {!!this.props.rooms.activeRoom.muted && <Tooltip title={`Blocked to ${new Date(this.props.rooms.activeRoom.muted.date).toLocaleString()}`} placement=\"top\"><CustomFab className={`media-option reject`}>\r\n                            <MicOffIcon style={{color: '#fff'}} />\r\n                        </CustomFab></Tooltip>}\r\n                        {!this.props.rooms.activeRoom.muted && <CustomFab className={`media-option ${this.props.media.micOn ? 'active' : ''}`} onClick={() => {WebRtcController.toggleMicrophone()}}>\r\n                            <MicIcon style={{color: this.props.media.micOn ? '#fff' : '#008FF7'}} />\r\n                        </CustomFab>}\r\n                        <CustomFab className={`media-option ${this.props.media.musicOn ? '' : 'active'}`} onClick={() => {WebRtcController.toggleMusic()}}>\r\n                            <MusicOffIcon style={{color: this.props.media.musicOn ? '#008FF7' : '#fff'}} />\r\n                        </CustomFab>\r\n                        <CustomFab className={`media-option reject`} onClick={() => {this.props.history.push('/')}}>\r\n                            <CallEndIcon style={{color: '#fff'}} />\r\n                        </CustomFab>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms,\r\n        media: state.media\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Room)))","// App\r\nimport React from 'react'\r\n\r\nimport {PageSettings} from '../PageSettings'\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\n\r\nclass Main extends React.Component {\r\n    static contextType = PageSettings;\r\n\r\n    componentDidMount() {\r\n        this.context.toggleHeader(true)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.context.toggleHeader(false)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <> \r\n                <div className=\"col-md-9\" style={{order: 2}}></div>\r\n                <div className=\"col-md-9\" style={{order: 4}}></div>            \r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms,\r\n        dialogs: state.dialogs\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Main)\r\n","import { CALL_SET_USER, CALL_SET_STATUS } from \"../constants\"\r\nimport { urlApi } from \"../../config\"\r\nimport SocketController from \"../../Controllers/SocketController\"\r\nimport WebRtcController from \"../../Controllers/WebRtcController\"\r\nimport store from \"../store\"\r\n\r\nexport const call = (user, apiToken) => (dispatch) => {\r\n    dispatch({\r\n        type: CALL_SET_USER,\r\n        payload: {user, status: 'outcoming'}\r\n    })\r\n\r\n    fetch(`${urlApi}/api/call/call`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            id: user._id,\r\n            socketId: SocketController.getSocketId()\r\n        })\r\n    })\r\n    .then((response) => response.json())\r\n    .then((call) => {\r\n        if(call.error) {\r\n            dispatch({\r\n                type: CALL_SET_STATUS,\r\n                payload: call.error\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\nexport const accept = (apiToken) => (dispatch) => {\r\n    dispatch({\r\n        type: CALL_SET_STATUS,\r\n        payload: 'active'\r\n    })\r\n    WebRtcController.call(store.getState().call.user._id)\r\n\r\n    fetch(`${urlApi}/api/call/accept`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            userId: store.getState().call.user._id,\r\n            socketId: SocketController.getSocketId()\r\n        })\r\n    })\r\n    // .then((response) => response.json())\r\n    .then((call) => {\r\n        // console.log(call)\r\n    })\r\n}\r\n\r\nexport const stop = (user, apiToken) => (dispatch) => {\r\n    WebRtcController.stopCall()\r\n\r\n    dispatch({\r\n        type: CALL_SET_USER,\r\n        payload: {user: false, status: 'none'}\r\n    })\r\n\r\n    fetch(`${urlApi}/api/call/stop`, {\r\n        method: \"post\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${apiToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n            socketId: SocketController.getSocketId()\r\n        })\r\n    })\r\n    // .then((response) => response.json())\r\n    .then((call) => {\r\n        // console.log(call)\r\n    })\r\n}\r\n\r\nexport const clear = () => (dispatch) => {\r\n    dispatch({\r\n        type: CALL_SET_USER,\r\n        payload: {user: false, status: 'none'}\r\n    })\r\n}","// App\r\nimport React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {PageSettings} from '../PageSettings'\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as dialogsActions from '../../Redux/actions/dialogs'\r\nimport * as callActions from '../../Redux/actions/call'\r\nimport * as usersActions from '../../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\n// Material\r\nimport Avatar from '../../Partials/User/Avatar';\r\nimport Chat from '../../Partials/Chat/Chat';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { OnlineDate } from '../../Controllers/TimeController';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport CallIcon from '@material-ui/icons/Call';\r\nimport { withStyles } from '@material-ui/core'\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ActionMenu from '../../Partials/ActionMenu'\r\nimport { withLang } from 'react-multi-language'\r\nimport languages from '../../languages'\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#25D441',\r\n        color: '#fff',\r\n        zIndex: 2,\r\n        width: 36,\r\n        height: 36,\r\n        boxShadow: 'none!important',\r\n        marginRight: '14px',\r\n        '&:hover': {\r\n            backgroundColor: '#25D441',\r\n            boxShadow: 'none',\r\n        }\r\n    }\r\n})\r\n\r\nconst fabStylesCustom = theme => ({\r\n    root: {\r\n        backgroundColor: '#fff',\r\n        color: '#008FF7',\r\n        zIndex: 2,\r\n        width: 36,\r\n        height: 36,\r\n        boxShadow: 'none!important',\r\n        marginRight: '14px',\r\n        '&:hover': {\r\n            backgroundColor: '#fff',\r\n            boxShadow: 'none',\r\n        }\r\n    }\r\n})\r\n\r\nconst CallFab = withStyles(fabStyles)(Fab);\r\nconst CustomFab = withStyles(fabStylesCustom)(Fab);\r\n\r\nclass Dialog extends React.PureComponent {\r\n    static contextType = PageSettings;\r\n\r\n    state = {\r\n        showBtnAdd: true,\r\n        scrollTop: 0,\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.context.toggleHeader(true)\r\n        \r\n        if(window.innerWidth < 769)\r\n            this.context.toggleHeader(false)\r\n\r\n        if(!this.props.dialogs.dialogs.find(dialog => dialog.user._id === this.props.match.params.id)) {\r\n            this.props.dialogsActions.dialogGet(this.props.match.params.id, this.props.user.apiToken)\r\n        } else {\r\n            this.props.dialogsActions.updateOnline(this.props.match.params.id, this.props.user.apiToken)\r\n            if(!this.props.dialogs.dialogs.find(dialog => dialog.user._id === this.props.match.params.id).getted)\r\n                this.props.dialogsActions.dialogLoad(this.props.match.params.id, this.props.user.apiToken)\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.context.toggleHeader(false)\r\n    }\r\n\r\n    render() {    \r\n        let dialog = this.props.dialogs.dialogs.find(dialog => dialog.user._id === this.props.match.params.id)\r\n\r\n        return (\r\n            <> \r\n                {dialog && !dialog.isNotFound && <><div className=\"col-xl-9 col-lg-6 col-md-6 dialog-header\" style={{order: 2}}>\r\n                        <IconButton className=\"back-btn\" onClick={() => {\r\n                            this.props.history.push('/')\r\n                        }}>\r\n                            <ArrowBackIcon fontSize=\"small\" style={{color: '#008FF7'}} />\r\n                        </IconButton>\r\n                     <><div style={{display: 'contents'}} onClick={() => {\r\n                         this.props.history.push({\r\n                            search: `?user=${dialog.user._id}`\r\n                         })\r\n                     }}><Avatar style={{\r\n                        width: 36, \r\n                        height: 36, \r\n                        fontSize: 14, \r\n                        fontWeight: 600, \r\n                        backgroundColor: `rgb(${dialog.user.color})`\r\n                    }} \r\n                    name={dialog.user.name.first.charAt(0) + dialog.user.name.last.charAt(0)} \r\n                    avatar={dialog.user.avatar ? dialog.user.avatar : false}\r\n                    /></div>\r\n                    <div className=\"user-info\" onClick={() => {\r\n                        this.props.history.push({\r\n                            search: `?user=${dialog.user._id}`\r\n                        })\r\n                    }}>\r\n                        <p className=\"user-name\">{`${dialog.user.name.first} ${dialog.user.name.last}`}</p>\r\n                        {!dialog.user.online && <p className=\"last-message\">{OnlineDate(dialog.user.onlineAt)}</p>}\r\n                        {dialog.user.online && <p className=\"last-message\" style={{color: '#35E551'}}>{this.props.langProps.online}</p>}\r\n                    </div></>\r\n\r\n                    <div style={{marginLeft: 'auto'}}>\r\n                        {dialog.user._id !== this.props.user._id && this.props.call.status === 'none' && <CallFab color=\"primary\" size=\"small\" aria-label=\"call\" onClick={() => {\r\n                            this.props.callActions.call(dialog.user, this.props.user.apiToken)\r\n                        }}>\r\n                            <CallIcon style={{color: '#fff'}} />\r\n                        </CallFab>}\r\n                        \r\n                        <CustomFab id={'dialog-more-actions-'+dialog._id} color=\"primary\" size=\"small\" aria-label=\"more\">\r\n                            <MoreVertIcon style={{color: '#008FF7'}} />\r\n                        </CustomFab>\r\n                        <ActionMenu event=\"click\" bottom={true} right={true} actions={[\r\n                            {text: this.props.langProps.show_investments, action: () => {\r\n                                this.props.history.push({\r\n                                    search: `?modal=investments`\r\n                                })\r\n                            }},\r\n                        ]} from={'dialog-more-actions-'+dialog._id} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-xl-9 col-lg-6 col-md-6\" style={{order: 4}}>\r\n                    <Chat \r\n                        messages={dialog.messages}\r\n                        loading={dialog && !dialog.getted} \r\n                        type=\"dialog\" \r\n                        userName={dialog.user.name.first}\r\n                        typing={dialog.typing}\r\n                        userId={dialog.user._id}\r\n                        to={dialog.user.name.first} \r\n                        dialogId={dialog._id}\r\n                        dialog={dialog}\r\n                    />\r\n                </div></>}\r\n\r\n                {dialog && dialog.isNotFound && <>\r\n                    <div className=\"col-xl-9 col-lg-6 col-md-6\" style={{order: 2}}></div>\r\n                    <div className=\"col-xl-9 col-lg-6 col-md-6\" style={{order: 4}}>\r\n                        <div className=\"data-empty\">\r\n                            <SearchIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                            <p>{this.props.langProps.user_not_found}</p>\r\n                        </div>\r\n                    </div>\r\n                </>}     \r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        dialogs: state.dialogs,\r\n        call: state.call\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        dialogsActions: bindActionCreators(dialogsActions, dispatch),\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n        callActions: bindActionCreators(callActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Dialog)))\r\n","import React from 'react'\r\n\r\nimport Login from '../Pages/Auth/Login'\r\nimport Register from '../Pages/Auth/Register'\r\n\r\nimport Languages from '../Sidebar/Languages'\r\nimport Room from '../Pages/User/Room';\r\nimport Main from '../Pages/User/Main';\r\nimport Dialog from '../Pages/User/Dialog';\r\n\r\nconst routes = [\r\n    {\r\n        path: '/login',\r\n        exact: true,\r\n        type: 'auth',\r\n        title: '',\r\n        component: () => <Login />\r\n    },\r\n    {\r\n        path: '/register',\r\n        exact: true,\r\n        type: 'auth',\r\n        title: '',\r\n        component: () => <Register />\r\n    },\r\n    {\r\n        path: '/',\r\n        exact: true,\r\n        type: 'user',\r\n        title: 'Home',\r\n        component: () => <Main />\r\n    },\r\n    {\r\n        path: '/languages',\r\n        exact: true,\r\n        type: 'user',\r\n        title: 'Languages',\r\n        component: () => <Languages />\r\n    },\r\n    {\r\n        path: '/chats/:id',\r\n        exact: true,\r\n        type: 'user',\r\n        title: '',\r\n        component: () => <Dialog key={window.location.pathname} />\r\n    },\r\n    {\r\n        path: '/rooms/:id',\r\n        exact: true,\r\n        type: 'user',\r\n        title: '',\r\n        component: () => <Room />\r\n    },\r\n]\r\n\r\nexport default routes","// App\r\nimport React from 'react'\r\n\r\n// Router\r\n// import {\r\n//     BrowserRouter as Router,\r\n// } from \"react-router-dom\"\r\n\r\nclass NoMatch extends React.Component {\r\n    render() {\r\n        return (\r\n            404\r\n        )\r\n    }\r\n}\r\n\r\nexport default NoMatch\r\n","// App\r\nimport React from 'react'\r\n\r\nimport Avatar from '../User/Avatar'\r\nimport '../../Css/Partials/RoomItem.css'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// Material\r\nimport Button from '@material-ui/core/Button';\r\nimport { OnlineDate } from '../../Controllers/TimeController';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, Checkbox } from '@material-ui/core';\r\n\r\nconst checkBoxStyles = theme => ({\r\n    root: {\r\n        color: '#CCD1D6',\r\n        display: 'flex',\r\n        '&$checked': {\r\n            color: '#008FF7',\r\n            border: 'none'\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        }\r\n    },\r\n    checked: {},\r\n})\r\n\r\nconst CustomCheckbox = withStyles(checkBoxStyles)(Checkbox);\r\n\r\nclass UserItem extends React.Component {\r\n    render() {\r\n        return (\r\n            <Button className={`user-item`} onClick={() => {this.props.onClick(this.props.user._id)}}>\r\n                <Avatar \r\n                avatar={this.props.user.avatar ? this.props.user.avatar : false}\r\n                style={{minWidth: 40, height: 40, fontSize: 14, fontWeight: 600, backgroundColor: `rgb(${this.props.user.color})`}} \r\n                name={this.props.user.name.first.charAt(0) + this.props.user.name.last.charAt(0)} />\r\n\r\n                <div style={{display: 'flex', flexWrap: 'wrap', width: 'calc(100% - 82px)'}}>\r\n                    <p className=\"user-name\">{`${this.props.user.name.first} ${this.props.user.name.last}`}</p>\r\n                    {!this.props.user.online && <p className=\"last-message\">{OnlineDate(this.props.user.onlineAt)}</p>}\r\n                    {this.props.user.online && <p className=\"last-message\" style={{color: '#35E551'}}>online</p>}\r\n                </div>\r\n\r\n                {this.props.type === 'select' && <CustomCheckbox checked={this.props.selected} />}\r\n            </Button>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        myUser: state.user,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(UserItem))","// App\r\nimport React from 'react'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Material\r\nimport GroupIcon from '@material-ui/icons/Group';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport UserItem from '../../Partials/User/UserItem';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { urlApi } from '../../config';\r\nimport languages from '../../languages';\r\nimport { withLang } from 'react-multi-language';\r\n\r\nlet waitSearch = false\r\n\r\nclass Contacts extends React.Component {\r\n    state = {\r\n        q: '',\r\n        searchResult: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(!this.props.users.friends.getted) {\r\n            this.props.usersActions.friendsGet(this.props.user.apiToken)\r\n        }\r\n    }\r\n\r\n    onScroll() {\r\n\r\n    }\r\n\r\n    onSearch(e) {\r\n        let q = e.target.value\r\n        this.setState({q})\r\n\r\n        if(waitSearch)\r\n            clearTimeout(waitSearch)\r\n\r\n        if(!!q.length && /\\S/.test(q)) {\r\n            waitSearch = setTimeout(() => {\r\n                fetch(`${urlApi}/api/user/search`, {\r\n                    method: \"post\",\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Content-Type': 'application/json',\r\n                        Authorization: `Bearer ${this.props.user.apiToken}`,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        q: this.state.q\r\n                    })\r\n                })\r\n                .then(response => response.json())\r\n                .then(searchResult => {\r\n                    this.setState({searchResult})\r\n                })\r\n            }, 500);\r\n        }\r\n\r\n        if(!q.length)\r\n            this.setState({searchResult: []})\r\n    }\r\n    \r\n    render() {\r\n        return <>\r\n            <input type=\"text\" value={this.state.q} onChange={(e) => {this.onSearch(e)}} className=\"friends-search-input\" placeholder={this.props.langProps.search} />\r\n\r\n            {!this.state.searchResult.length && !this.state.q.length && <Scrollbars\r\n                ref={(ref) => {this.roomsBlock = ref}}\r\n                renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                className=\"scroll\"\r\n                onScroll={() => {this.onScroll()}}\r\n                style={{height: 340}}\r\n                autoHide\r\n            >\r\n                {this.props.users.friends.isFetching && <CircularProgress style={{\r\n                        color: '#008FF7',\r\n                        position: 'absolute',\r\n                        left: 0,\r\n                        right: 0,\r\n                        margin: 'auto',\r\n                        top: 'calc(50% - 20px)'\r\n                    }} />}\r\n                {this.props.users.friends.users.map((user, index) => {\r\n                    return (\r\n                        <UserItem key={index} type={this.props.type} selected={this.props.type === 'select' ? !!this.props.selectUsers.find(x => x === user._id) : false} onClick={(id) => {this.props.onClick(id)}} user={user} />\r\n                    )\r\n                })}\r\n                {(!this.props.users.friends.users.length && !this.props.users.friends.isFetching) && <div className=\"data-empty\">\r\n                    <GroupIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                    <p>{this.props.langProps.you_dont_have_friends}</p>\r\n                </div>}\r\n            </Scrollbars>}\r\n\r\n            {(!!this.state.searchResult.length || !!this.state.q.length) && <Scrollbars\r\n                ref={(ref) => {this.roomsBlock = ref}}\r\n                renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                className=\"scroll\"\r\n                onScroll={() => {this.onScroll()}}\r\n                style={{height: 340}}\r\n                autoHide\r\n            >\r\n                {/* {this.props.users.friends.isFetching && <CircularProgress style={{\r\n                        color: '#008FF7',\r\n                        position: 'absolute',\r\n                        left: 0,\r\n                        right: 0,\r\n                        margin: 'auto',\r\n                        top: 'calc(50% - 20px)'\r\n                    }} />} */}\r\n                {this.state.searchResult.map((user, index) => {\r\n                    return (\r\n                        <UserItem key={index} type={this.props.type} selected={this.props.type === 'select' ? !!this.props.selectUsers.find(x => x === user._id) : false} onClick={(id) => {this.props.onClick(id)}} user={user} />\r\n                    )\r\n                })}\r\n                {(!this.state.searchResult.length) && <div className=\"data-empty\">\r\n                    <GroupIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                    <p>{this.props.langProps.users_not_found}</p>\r\n                </div>}\r\n            </Scrollbars>}\r\n        </>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Contacts)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\nimport {urlApi} from '../config'\r\n\r\nimport SocketController from '../Controllers/SocketController';\r\nimport Friends from './contactsPartials/Friends';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModalCreate = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)'\r\n    }\r\n};\r\n\r\nconst customStylesModalInvite = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nconst checkBoxStyles = theme => ({\r\n    root: {\r\n        color: '#CCD1D6',\r\n        '&$checked': {\r\n            color: '#008FF7',\r\n            border: 'none'\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        }\r\n    },\r\n    checked: {},\r\n})\r\n\r\nconst CustomCheckbox = withStyles(checkBoxStyles)(Checkbox);\r\n\r\nclass CreateRoom extends React.Component {\r\n    state = {\r\n        title: '',\r\n        isPrivate: false,\r\n        step: 'create',\r\n        selectUsers: [],\r\n        error: false,\r\n        errors: []\r\n    }\r\n\r\n    onSubmit(e) {\r\n        this.setState({error: false, errors: []})\r\n        e.preventDefault()\r\n\r\n        fetch(`${urlApi}/api/room/create`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                title: this.state.title,\r\n                isPrivate: this.state.isPrivate,\r\n                lang: this.props.user.roomLang,\r\n                selectUsers: this.state.selectUsers\r\n            })\r\n        })\r\n        .then((response) => response.json())\r\n        .then((room) => {\r\n            if(room.error) {\r\n                this.setState({error: true, errors: room.errors, step: 'create'})\r\n            } else {\r\n                this.props.roomsActions.roomsAdd(room)\r\n                SocketController.createRoom({room, lang: this.props.user.roomLang})\r\n                this.props.history.push(`/rooms/${room._id}`)\r\n            }\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={this.state.step === 'create' ? customStylesModalCreate : customStylesModalInvite}\r\n            contentLabel=\"Create room\"\r\n        >\r\n            {this.state.step === 'create' && <h2 className=\"modal-title\">{this.props.langProps.new_room}</h2>}\r\n            {this.state.step === 'invite' && <h2 className=\"modal-title\">{this.props.langProps.select_users}</h2>}\r\n\r\n            <form style={{display: 'contents'}} onSubmit={(e) => {this.onSubmit(e)}}>\r\n                {this.state.step === 'create' && <>\r\n                    <input \r\n                        value={this.state.title} \r\n                        onChange={(e) => {this.setState({title: e.target.value})}} \r\n                        className=\"input-field\" \r\n                        type=\"text\"\r\n                        style={{marginBottom: 10}} \r\n                        placeholder={this.props.langProps.title}\r\n                        maxLength={50}\r\n                    />\r\n                    {this.state.errors.find(value => value.param === 'title') && <span className=\"input-error-label\">\r\n                        {this.props.langProps[this.state.errors.find(value => value.param === 'title').msg]} \r\n                    </span>}\r\n\r\n                    <FormControlLabel \r\n                        control={\r\n                            <CustomCheckbox\r\n                                checked={this.state.isPrivate}\r\n                                onChange={() => {this.setState({isPrivate: !this.state.isPrivate})}} \r\n                            />\r\n                        }\r\n                        style={{color: '#667788'}}\r\n                        label={this.props.langProps.private_room}\r\n                    />\r\n\r\n                    <button className=\"button-blue\" onClick={() => {this.setState({step: 'invite'})}} style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.next}</button>\r\n                </>}\r\n\r\n                {this.state.step === 'invite' && <>\r\n                    <Friends onClick={(id) => {\r\n                        if(!this.state.selectUsers.find(x => x === id))\r\n                            this.setState({selectUsers: [id, ...this.state.selectUsers]})\r\n                        else \r\n                            this.setState({selectUsers: [...this.state.selectUsers.filter(x => x !== id)]})\r\n                    }} type={'select'} selectUsers={this.state.selectUsers} />\r\n\r\n                    <button className=\"button-gray\" onClick={() => {this.setState({step: 'create'})}} style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.back}</button>\r\n                    <button className=\"button-blue\" type=\"submit\" style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.start}</button>\r\n                </>}\r\n            </form>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(CreateRoom)))","// App\r\nimport React from 'react'\r\n\r\n// Material\r\nimport Fab from '@material-ui/core/Fab';\r\nimport { withStyles } from '@material-ui/core'\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\nimport ChatBubbleOutlineOutlinedIcon from '@material-ui/icons/ChatBubbleOutlineOutlined';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\nimport CallIcon from '@material-ui/icons/Call';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../../Redux/actions/users'\r\nimport * as callActions from '../../Redux/actions/call'\r\nimport { bindActionCreators } from 'redux'\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\nimport CheckOutlinedIcon from '@material-ui/icons/CheckOutlined';\r\nimport PersonAddOutlinedIcon from '@material-ui/icons/PersonAddOutlined';\r\nimport Avatar from '../../Partials/User/Avatar';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport store from '../../Redux/store';\r\nimport { SLIDER_SET } from '../../Redux/constants';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#EDF0F3',\r\n        boxShadow: 'none!important',\r\n        '&:hover': {\r\n            backgroundColor: '#008FF7',\r\n        },\r\n        '&:hover svg': {\r\n            color: '#fff!important'\r\n        },\r\n        '& svg': {\r\n            transition: 'all 0.25s'\r\n        },\r\n    }\r\n})\r\n\r\nconst CustomFab = withStyles(fabStyles)(Fab);\r\n\r\nclass OtherUser extends React.Component {\r\n    render() {\r\n        return <>\r\n                <span style={{cursor: 'pointer'}} onClick={() => {\r\n                    this.props.history.push({\r\n                        search: `?modal=slider`\r\n                    })\r\n                    store.dispatch({\r\n                        type: SLIDER_SET,\r\n                        payload: {\r\n                            images: [{path: this.props.user.avatar.original}],\r\n                            index: 0\r\n                        }\r\n                    })\r\n                }}><Avatar \r\n                    style={{width: 80, height: 80, fontSize: 28, lineHeight: '28px', fontWeight: 600, backgroundColor: `rgb(${this.props.user.color})`}} \r\n                    name={this.props.user.name.first.charAt(0)+this.props.user.name.last.charAt(0)} \r\n                    avatar={this.props.user.avatar ? this.props.user.avatar : false}\r\n                /></span>\r\n\r\n                <p className=\"user-profile-name\">{this.props.user.name.first} {this.props.user.name.last}</p>\r\n                <p className=\"user-profile-city\">{this.props.user.city ? this.props.user.city : this.props.langProps.not_indicated}</p>\r\n                \r\n                <>\r\n                    <div className=\"user-btn\">\r\n                        <NavLink style={{textDecoration: 'none'}} onClick={(e) => {\r\n                            if(`/chats/${this.props.user._id}` === this.props.history.location.pathname)\r\n                                e.preventDefault()\r\n                        }} className=\"dialog-link\" to={`/chats/${this.props.user._id}`}>\r\n                            <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {}}>\r\n                                <ChatBubbleOutlineOutlinedIcon style={{color: '#99AABB'}} />\r\n                            </CustomFab>\r\n                        </NavLink>\r\n                        <p>{this.props.langProps.message}</p>\r\n                    </div>    \r\n\r\n                    {this.props.call.status === 'none' && <div className=\"user-btn\">\r\n                        <NavLink style={{textDecoration: 'none'}} onClick={(e) => {\r\n                            this.props.callActions.call(this.props.user, this.props.myUser.apiToken)\r\n                        }} className=\"dialog-link\" to={`/chats/${this.props.user._id}`}>\r\n                            <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {}}>\r\n                                <CallIcon style={{color: '#99AABB'}} />\r\n                            </CustomFab>\r\n                        </NavLink>\r\n                        <p>{this.props.langProps.call}</p>\r\n                    </div>}\r\n\r\n                    {this.props.user.friendStatus === 0 && <div className=\"user-btn\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.usersActions.sendRequest(this.props.userId, this.props.myUser.apiToken)\r\n                        }}>\r\n                            <PersonAddOutlinedIcon style={{color: '#99AABB'}} />\r\n                        </CustomFab>\r\n                        <p>{this.props.langProps.plus_friend}</p>\r\n                    </div>}\r\n\r\n                    {this.props.user.friendStatus === 2 && <div className=\"user-btn\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.usersActions.acceptRequest(this.props.userId, this.props.myUser.apiToken)\r\n                        }}>\r\n                            <CheckOutlinedIcon style={{color: '#99AABB'}} />\r\n                        </CustomFab>\r\n                        <p>{this.props.langProps.accept}</p>\r\n                    </div>}\r\n\r\n                    {(this.props.user.friendStatus === 2 || this.props.user.friendStatus === 1) && <div className=\"user-btn\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.usersActions.removeRequest(this.props.userId, this.props.myUser.apiToken)\r\n                        }}>\r\n                            <CloseOutlinedIcon style={{color: '#99AABB'}} />\r\n                        </CustomFab>\r\n                        <p>{this.props.langProps.decline}</p>\r\n                    </div>}\r\n\r\n                    {this.props.user.friendStatus === 3 && <div className=\"user-btn\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.usersActions.removeRequest(this.props.userId, this.props.myUser.apiToken)\r\n                        }}>\r\n                            <DeleteOutlineOutlinedIcon style={{color: '#99AABB'}} />\r\n                        </CustomFab>\r\n                        <p>{this.props.langProps.remove}</p>\r\n                    </div>}\r\n\r\n                    {(this.props.myUser.role === 'moder' || this.props.myUser.role === 'admin') && <div className=\"user-btn\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.history.push({\r\n                                search: `?mute=${this.props.user._id}`\r\n                            })\r\n                        }}>\r\n                            <MicOffIcon style={{color: '#99AABB'}} />\r\n                        </CustomFab>\r\n                        <p>Mute</p>\r\n                    </div>}\r\n\r\n                    {(this.props.myUser.role === 'moder' || this.props.myUser.role === 'admin') && <div className=\"user-btn\">\r\n                        <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                            this.props.history.push({\r\n                                search: `?unmute=${this.props.user._id}`\r\n                            })\r\n                        }}>\r\n                            <MicIcon style={{color: '#99AABB'}} />\r\n                        </CustomFab>\r\n                        <p>Unmute</p>\r\n                    </div>}\r\n                </>\r\n            </>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        myUser: state.user,\r\n        call: state.call,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n        callActions: bindActionCreators(callActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(OtherUser)))","// App\r\nimport React from 'react'\r\n\r\n// Material\r\nimport Fab from '@material-ui/core/Fab';\r\nimport BookOutlinedIcon from '@material-ui/icons/BookOutlined';\r\nimport { withStyles } from '@material-ui/core'\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../../Redux/actions/users'\r\nimport * as userActions from '../../Redux/actions/user'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport Avatar from '../../Partials/User/Avatar';\r\nimport { withRouter } from 'react-router-dom';\r\nimport SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../../languages';\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#EDF0F3',\r\n        boxShadow: 'none!important',\r\n        '&:hover': {\r\n            backgroundColor: '#008FF7',\r\n        },\r\n        '&:hover svg': {\r\n            color: '#fff!important'\r\n        },\r\n        '& svg': {\r\n            transition: 'all 0.25s'\r\n        },\r\n    }\r\n})\r\n\r\nconst CustomFab = withStyles(fabStyles)(Fab);\r\n\r\nclass MyUser extends React.Component {\r\n    state = {\r\n        activeTab: 'main'\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            <label style={{cursor: 'pointer'}} className=\"upload-avatar\">\r\n                <Avatar \r\n                    style={{width: 80, height: 80, fontSize: 28, lineHeight: '28px', fontWeight: 600, backgroundColor: `rgb(${this.props.user.color})`}} \r\n                    name={this.props.user.name.first.charAt(0)+this.props.user.name.last.charAt(0)}\r\n                    avatar={this.props.user.avatar ? this.props.user.avatar : false}\r\n                />\r\n                <AddAPhotoIcon className=\"upload-avatar-icon\" style={{color: '#fff'}} />\r\n                <div className=\"upload-avatar-background\"></div>\r\n                <input \r\n                    type=\"file\"\r\n                    onChange={(e) => {this.props.userActions.uploadAvatar(e, this.props.user.apiToken)}}\r\n                    id=\"uploadAvatar\" \r\n                    style={{display: 'none'}} \r\n                    accept=\"image/jpeg,image/png\" \r\n                />\r\n            </label>\r\n\r\n            <p className=\"user-profile-name\">{this.props.user.name.first} {this.props.user.name.last}</p>\r\n            <p className=\"user-profile-city\">{this.props.user.city ? this.props.user.city : this.props.langProps.not_indicated}</p>\r\n            \r\n            <div className=\"user-btn\">\r\n                <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                    this.props.history.push({\r\n                        search: `?modal=settings`\r\n                    })\r\n                }}>\r\n                    <SettingsOutlinedIcon style={{color: '#99AABB'}} />\r\n                </CustomFab>\r\n                <p>{this.props.langProps.settings}</p>\r\n            </div>\r\n\r\n            <div className=\"user-btn\">\r\n                <CustomFab color=\"primary\" size=\"small\" aria-label=\"add\" onClick={() => {\r\n                    this.props.history.push({\r\n                        search: `?modal=contacts`\r\n                    })\r\n                }}>\r\n                    <BookOutlinedIcon style={{color: '#99AABB'}} />\r\n                </CustomFab>\r\n                <p>{this.props.langProps.contacts}</p>\r\n            </div>\r\n        </>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(MyUser)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withRouter } from 'react-router-dom';\r\nimport OtherUser from './userPartials/otherUser';\r\nimport MyUser from './userPartials/myUser';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : '300px',\r\n        minHeight: 100\r\n    }\r\n};\r\n\r\nclass User extends React.Component {\r\n    componentDidMount() {\r\n        if(!this.props.users.users.find(user => user._id === this.props.userId) && this.props.user._id !== this.props.userId) {\r\n            this.props.usersActions.userGet(this.props.userId, this.props.user.apiToken)\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        let user = this.props.users.users.find(user => user._id === this.props.userId)\r\n        return <Modal\r\n            isOpen={true}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"User\"\r\n        >\r\n            {user && \r\n                <OtherUser userId={this.props.userId} user={user} />\r\n            }\r\n\r\n            {!user && this.props.user._id !== this.props.userId && <CircularProgress style={{\r\n                color: '#008FF7',\r\n                position: 'absolute',\r\n                left: 0,\r\n                right: 0,\r\n                margin: 'auto',\r\n                top: 'calc(50% - 20px)'\r\n            }} />}\r\n\r\n            {this.props.user._id === this.props.userId && \r\n                <MyUser />\r\n            }\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(User))","// App\r\nimport React from 'react'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Material\r\nimport GroupIcon from '@material-ui/icons/Group';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport UserItem from '../../Partials/User/UserItem';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nclass Contacts extends React.Component {\r\n    componentDidMount() {\r\n        if(!this.props.users.requested.getted) {\r\n            this.props.usersActions.requestedGet(this.props.user.apiToken)\r\n        }\r\n    }\r\n\r\n    onScroll() {\r\n\r\n    }\r\n    \r\n    render() {\r\n        return <Scrollbars\r\n            ref={(ref) => {this.roomsBlock = ref}}\r\n            renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n            renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n            className=\"scroll\"\r\n            onScroll={() => {this.onScroll()}}\r\n            style={{height: 340}}\r\n            autoHide\r\n        >\r\n            {this.props.users.requested.isFetching && <CircularProgress style={{\r\n                    color: '#008FF7',\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    right: 0,\r\n                    margin: 'auto',\r\n                    top: 'calc(50% - 20px)'\r\n                }} />}\r\n            {this.props.users.requested.users.map((user, index) => {\r\n                return (\r\n                    <UserItem key={index} user={user} onClick={(id) => {this.props.onClick(id)}} />\r\n                )\r\n            })}\r\n            {(!this.props.users.requested.users.length && !this.props.users.requested.isFetching) && <div className=\"data-empty\">\r\n                <GroupIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                <p>Incoming requests will be displayed here</p>\r\n            </div>}\r\n        </Scrollbars>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Contacts))","// App\r\nimport React from 'react'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Material\r\nimport GroupIcon from '@material-ui/icons/Group';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport UserItem from '../../Partials/User/UserItem';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nclass Contacts extends React.Component {\r\n    componentDidMount() {\r\n        if(!this.props.users.pending.getted) {\r\n            this.props.usersActions.pendingGet(this.props.user.apiToken)\r\n        }\r\n    }\r\n\r\n    onScroll() {\r\n\r\n    }\r\n    \r\n    render() {\r\n        return <Scrollbars\r\n            ref={(ref) => {this.roomsBlock = ref}}\r\n            renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n            renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n            className=\"scroll\"\r\n            onScroll={() => {this.onScroll()}}\r\n            style={{height: 340}}\r\n            autoHide\r\n        >\r\n            {this.props.users.pending.isFetching && <CircularProgress style={{\r\n                    color: '#008FF7',\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    right: 0,\r\n                    margin: 'auto',\r\n                    top: 'calc(50% - 20px)'\r\n                }} />}\r\n            {this.props.users.pending.users.map((user, index) => {\r\n                return (\r\n                    <UserItem key={index} user={user} onClick={(id) => {this.props.onClick(id)}} />\r\n                )\r\n            })}\r\n            {(!this.props.users.pending.users.length && !this.props.users.pending.isFetching) && <div className=\"data-empty\">\r\n                <GroupIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                <p>Outgoing requests will be displayed here</p>\r\n            </div>}\r\n        </Scrollbars>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Contacts))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport Friends from './contactsPartials/Friends';\r\nimport Inbox from './contactsPartials/Inbox';\r\nimport Outbox from './contactsPartials/Outbox';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass Contacts extends React.Component {\r\n    state = {\r\n        activeTab: 'friends'\r\n    }\r\n\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Contacts\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.contacts}</h2>\r\n\r\n            <div className=\"contacts-tabs\">\r\n                <span className={this.state.activeTab === 'friends' ? 'active' : ''} onClick={() => {this.setState({activeTab: 'friends'})}}>{this.props.langProps.friends}</span>\r\n                <span className={this.state.activeTab === 'inbox' ? 'active' : ''} onClick={() => {this.setState({activeTab: 'inbox'})}}>{this.props.langProps.inbox}</span>\r\n                <span className={this.state.activeTab === 'outbox' ? 'active' : ''} onClick={() => {this.setState({activeTab: 'outbox'})}}>{this.props.langProps.outbox}</span>\r\n            </div>\r\n\r\n            {this.state.activeTab === 'friends' && <Friends onClick={(id) => {\r\n                this.props.history.push({\r\n                    search: `?user=${id}`\r\n                 })\r\n            }} type={'normal'} />}\r\n            {this.state.activeTab === 'inbox' && <Inbox onClick={(id) => {\r\n                this.props.history.push({\r\n                    search: `?user=${id}`\r\n                 })\r\n            }} />}\r\n            {this.state.activeTab === 'outbox' && <Outbox onClick={(id) => {\r\n                this.props.history.push({\r\n                    search: `?user=${id}`\r\n                 })\r\n            }} />}\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Contacts)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\nimport Friends from './contactsPartials/Friends';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass CreateDialog extends React.Component {\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Create room\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.new_chat}</h2>\r\n\r\n            <Friends onClick={(id) => {\r\n                this.props.history.push(`/chats/${id}`)\r\n            }} />\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(CreateDialog)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\nimport {urlApi} from '../config'\r\n\r\nimport Friends from './contactsPartials/Friends';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModalInvite = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass CreateRoom extends React.Component {\r\n    state = {\r\n        selectUsers: [],\r\n        error: false,\r\n        errors: []\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        fetch(`${urlApi}/api/room/invite`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                id: this.props.rooms.activeRoom._id,\r\n                selectUsers: this.state.selectUsers\r\n            })\r\n        })\r\n        .then(() => {\r\n            this.setState({selectUsers: []})\r\n            toast(\"Invited sents!\", {\r\n                position: toast.POSITION.TOP_CENTER,\r\n            });\r\n            this.props.close()\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModalInvite}\r\n            contentLabel=\"Create room\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.select_users}</h2>\r\n\r\n            <form style={{display: 'contents'}} onSubmit={(e) => {this.onSubmit(e)}}>\r\n                <Friends onClick={(id) => {\r\n                    if(!this.state.selectUsers.find(x => x === id))\r\n                        this.setState({selectUsers: [id, ...this.state.selectUsers]})\r\n                    else \r\n                        this.setState({selectUsers: [...this.state.selectUsers.filter(x => x !== id)]})\r\n                }} type={'select'} selectUsers={this.state.selectUsers} />\r\n\r\n                {!this.state.selectUsers.length && <button className=\"button-gray\" onClick={() => {this.props.close()}} style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.back}</button>}\r\n                {!!this.state.selectUsers.length && <button className=\"button-blue\" type=\"submit\" style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.invite}</button>}\r\n            </form>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(CreateRoom)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\nimport {urlApi} from '../config'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModalCreate = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)'\r\n    }\r\n};\r\n\r\nconst checkBoxStyles = theme => ({\r\n    root: {\r\n        color: '#CCD1D6',\r\n        '&$checked': {\r\n            color: '#008FF7',\r\n            border: 'none'\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        }\r\n    },\r\n    checked: {},\r\n})\r\n\r\nconst CustomCheckbox = withStyles(checkBoxStyles)(Checkbox);\r\n\r\nclass CreateRoom extends React.Component {\r\n    state = {\r\n        title: this.props.rooms.activeRoom.title,\r\n        isPrivate: this.props.rooms.activeRoom.isPrivate,\r\n        error: false,\r\n        errors: []\r\n    }\r\n\r\n    onSubmit(e) {\r\n        this.setState({error: false, errors: []})\r\n        e.preventDefault()\r\n\r\n        fetch(`${urlApi}/api/room/edit`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                id: this.props.rooms.activeRoom._id,\r\n                title: this.state.title,\r\n                isPrivate: this.state.isPrivate,\r\n            })\r\n        })\r\n        .then((response) => response.json())\r\n        .then((room) => {\r\n            if(room.error) {\r\n                this.setState({error: true, errors: room.errors})\r\n            } else {\r\n                this.props.close()\r\n            }\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModalCreate}\r\n            contentLabel=\"Edit room\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.edit_room}</h2>\r\n\r\n            <form style={{display: 'contents'}} onSubmit={(e) => {this.onSubmit(e)}}>\r\n                <input \r\n                    value={this.state.title} \r\n                    onChange={(e) => {this.setState({title: e.target.value})}} \r\n                    className=\"input-field\" \r\n                    type=\"text\"\r\n                    style={{marginBottom: 10}} \r\n                    placeholder={this.props.langProps.title}\r\n                    maxLength={50}\r\n                />\r\n                {this.state.errors.find(value => value.param === 'title') && <span className=\"input-error-label\">\r\n                    {this.props.langProps[this.state.errors.find(value => value.param === 'title').msg]} \r\n                </span>}\r\n\r\n                <FormControlLabel \r\n                    control={\r\n                        <CustomCheckbox\r\n                            checked={this.state.isPrivate}\r\n                            onChange={() => {this.setState({isPrivate: !this.state.isPrivate})}} \r\n                        />\r\n                    }\r\n                    style={{color: '#667788'}}\r\n                    label={this.props.langProps.private_room}\r\n                />\r\n\r\n                {this.state.title === this.props.rooms.activeRoom.title && this.state.isPrivate === this.props.rooms.activeRoom.isPrivate && <button className=\"button-gray\" onClick={() => {\r\n                    this.props.close()\r\n                }} style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.back}</button>}\r\n\r\n                {(this.state.title !== this.props.rooms.activeRoom.title || this.state.isPrivate !== this.props.rooms.activeRoom.isPrivate) && <button className=\"button-blue\" type=\"submit\" style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.save}</button>}\r\n            </form>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(CreateRoom)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport {urlApi} from '../config'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModalCreate = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        flexWrap              : 'wrap'\r\n    }\r\n};\r\n\r\nclass DeleteRoom extends React.Component {\r\n    onSubmit() {\r\n        fetch(`${urlApi}/api/room/delete`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                id: this.props.rooms.activeRoom._id\r\n            })\r\n        })\r\n        .then(() => {\r\n            this.props.close()\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModalCreate}\r\n            contentLabel=\"Delete room\"\r\n        >\r\n            <h2 className=\"modal-title\" style={{width: '100%'}}>{this.props.langProps.you_sure}</h2>\r\n            \r\n            <button className=\"button-blue\" onClick={() => {this.props.close()}} style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.back}</button>\r\n            <button className=\"button-gray\" onClick={() => {this.onSubmit()}} style={{width: 'max-content', marginTop: 5}}>{this.props.langProps.delete}</button>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps)(withRouter(DeleteRoom)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport Friends from './contactsPartials/Friends';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModalInvite = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass CreateRoom extends React.Component {\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModalInvite}\r\n            contentLabel=\"Forward messages\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.forward}</h2>\r\n\r\n            <Friends onClick={(id) => {\r\n                this.props.history.push(`/chats/${id}`)\r\n            }} />\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(CreateRoom)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as callActions from '../Redux/actions/call'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport Avatar from '../Partials/User/Avatar';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport CallIcon from '@material-ui/icons/Call';\r\nimport CallEndIcon from '@material-ui/icons/CallEnd';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\nimport WebRtcController from '../Controllers/WebRtcController'\r\nimport MusicOffIcon from '@material-ui/icons/MusicOff';\r\nimport VideocamOutlinedIcon from '@material-ui/icons/VideocamOutlined';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst fabCallStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#25D441',\r\n        color: '#fff',\r\n        zIndex: 2,\r\n        width: 40,\r\n        height: 40,\r\n        boxShadow: 'none!important',\r\n        margin: '0 9px',\r\n        '&:hover': {\r\n            backgroundColor: '#25D441',\r\n            boxShadow: 'none',\r\n        }\r\n    }\r\n})\r\nconst fabRejectStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#FF4444',\r\n        color: '#fff',\r\n        zIndex: 2,\r\n        width: 40,\r\n        height: 40,\r\n        boxShadow: 'none!important',\r\n        margin: '0 9px',\r\n        '&:hover': {\r\n            backgroundColor: '#FF4444',\r\n            boxShadow: 'none',\r\n        }\r\n    }\r\n})\r\n\r\nconst CallFab = withStyles(fabCallStyles)(Fab);\r\nconst RejectFab = withStyles(fabRejectStyles)(Fab);\r\n\r\nconst fabStyles = theme => ({\r\n    root: {\r\n        backgroundColor: '#EDF0F3',\r\n        color: '#008FF7',\r\n        zIndex: 2,\r\n        margin: '0 9px!important',\r\n        '&:hover': {\r\n            backgroundColor: '#EDF0F3',\r\n        }\r\n    }\r\n})\r\n\r\nconst CustomFab = withStyles(fabStyles)(Fab);\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '260px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '260px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nconst customStylesModalActive = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        width: 'max-content',\r\n        height: 'max-content',\r\n        top: 70,\r\n        left: 'unset',\r\n        right: 40,\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        border: 'none',\r\n        minWidth              : '320px',\r\n        height: 'max-content',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '260px',\r\n        padding               : '20px 0',\r\n        position: 'unset'\r\n    }\r\n};\r\n\r\nconst customStylesModalActiveFullScreen = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        width: '100%',\r\n        height: '100vh',\r\n        top: 0,\r\n        left: 0,\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        border: 'none',\r\n        minWidth              : '100%',\r\n        height: '100vh',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '260px',\r\n        padding               : '20px 0',\r\n        position: 'unset',\r\n        alignItems: 'center',\r\n        justifyItems: 'center',\r\n        alignContent: 'center',\r\n    }\r\n};\r\n\r\nclass MediaStream extends React.PureComponent {\r\n    componentDidMount() {\r\n        this.audio.srcObject = this.props.stream\r\n        if(this.props.media === 'video')\r\n            this.video.srcObject = this.props.stream\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            <audio ref={ref => {this.audio = ref}} style={{display: 'none'}} autoPlay controls></audio>\r\n            {this.props.media === 'video' && <video className=\"other-video\" ref={ref => {this.video = ref}} autoPlay muted></video>}\r\n        </>\r\n    }\r\n}\r\n\r\nclass CreateDialog extends React.Component {\r\n    state = {\r\n        fullScreen: false\r\n    }\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {\r\n                if(this.props.call.status !== 'outcoming' && this.props.call.status !== 'incoming') {\r\n                    this.props.callActions.clear()\r\n                }\r\n            }}\r\n            style={this.props.call.status === 'active' ? this.state.fullScreen ? customStylesModalActiveFullScreen : customStylesModalActive : customStylesModal}\r\n            contentLabel=\"Call\"\r\n            overlayClassName=\"call-modal\"\r\n        >\r\n            {this.props.call.remoteStream && <MediaStream media={this.props.call.media} key={this.props.call.remoteStream.id+this.props.call.media} stream={this.props.call.remoteStream} />}\r\n            {this.props.call.status !== 'exist' && <>\r\n                {(this.props.call.status === 'outcoming' || this.props.call.status === 'busy' || this.props.call.status === 'canceled') && <h2 style={{width: '100%'}} className=\"modal-title\">{this.props.langProps.outcoming_call}</h2>}\r\n                {this.props.call.status === 'incoming' && <h2 style={{width: '100%'}} className=\"modal-title\">{this.props.langProps.incoming_call}</h2>}\r\n\r\n                {this.props.call.media === 'audio' && <>\r\n                    <Avatar \r\n                        style={{width: 80, height: 80, fontSize: 28, lineHeight: '28px', fontWeight: 600, backgroundColor: `rgb(${this.props.call.user.color})`}} \r\n                        name={this.props.call.user.name.first.charAt(0)+this.props.call.user.name.last.charAt(0)}\r\n                        avatar={this.props.call.user.avatar ? this.props.call.user.avatar : false}\r\n                    />\r\n\r\n                    <p className=\"user-profile-name\">{this.props.call.user.name.first} {this.props.call.user.name.last}</p>\r\n                    <p className=\"user-profile-city\">{this.props.call.user.city ? this.props.call.user.city : this.props.langProps.not_indicated}</p>\r\n                </>}\r\n\r\n                {this.props.call.media === 'video' && <>\r\n                    <div style={{height: this.state.fullScreen ? 'calc(100% - 80px)' : 200, width: '100%'}}></div>\r\n                </>}\r\n\r\n                {this.props.call.status !== 'busy' && this.props.call.status !== 'canceled' && <div style={{width: '100%', textAlign: 'center', marginTop: 20, marginBottom: 20}}>\r\n                    {this.props.call.status === 'active' && <>\r\n                        <CustomFab className={`media-option ${this.props.media.micOn ? '' : 'active'}`} onClick={() => {WebRtcController.toggleMicrophone()}}>\r\n                            <MicOffIcon style={{color: this.props.media.micOn ? '#008FF7' : '#fff'}} />\r\n                        </CustomFab>\r\n                        <CustomFab className={`media-option ${this.props.media.musicOn ? '' : 'active'}`} onClick={() => {WebRtcController.toggleMusic()}}>\r\n                            <MusicOffIcon style={{color: this.props.media.musicOn ? '#008FF7' : '#fff'}} />\r\n                        </CustomFab>\r\n                        <CustomFab className={`media-option ${this.props.media.cameraOn ? 'active' : ''}`} onClick={() => {WebRtcController.callToggleCamera()}}>\r\n                            <VideocamOutlinedIcon style={{color: this.props.media.cameraOn ? '#fff' : '#008FF7'}} />\r\n                        </CustomFab>\r\n                        <CustomFab className={`media-option ${this.state.fullScreen ? 'active' : ''}`} onClick={() => {this.setState({fullScreen: !this.state.fullScreen})}}>\r\n                            {!this.state.fullScreen && <FullscreenIcon style={{color: '#008FF7'}} />}\r\n                            {this.state.fullScreen && <FullscreenExitIcon style={{color: '#fff'}} />}\r\n                        </CustomFab>\r\n                    </>}\r\n\r\n                    {this.props.call.status === 'incoming' && <CallFab color=\"primary\" size=\"small\" aria-label=\"call\" onClick={() => {\r\n                        this.props.callActions.accept(this.props.user.apiToken)\r\n                    }}>\r\n                        <CallIcon style={{color: '#fff'}} />\r\n                    </CallFab>}\r\n\r\n                    <RejectFab color=\"primary\" size=\"small\" aria-label=\"call\" onClick={() => {\r\n                        this.props.callActions.stop(this.props.call.user, this.props.user.apiToken)\r\n                    }}>\r\n                        <CallEndIcon style={{color: '#fff'}} />\r\n                    </RejectFab>\r\n                </div>}\r\n\r\n                {this.props.call.status === 'busy' && <div style={{width: '100%', textAlign: 'center', marginTop: 20, marginBottom: 20, color: '#999999', fontSize: 14}}>\r\n                    The line is busy... <br></br><a style={{color: '#008FF7', cursor: 'pointer'}} onClick={() => {this.props.callActions.clear()}}>Close</a>\r\n                </div>}\r\n\r\n                {this.props.call.status === 'canceled' && <div style={{width: '100%', textAlign: 'center', marginTop: 20, marginBottom: 20, color: '#999999', fontSize: 14}}>\r\n                    {this.props.call.user.name.first} canceled your call <br></br><a style={{color: '#008FF7', cursor: 'pointer'}} onClick={() => {this.props.callActions.clear()}}>Close</a>\r\n                </div>}\r\n            </>}\r\n            {this.props.call.status === 'exist' && <>\r\n                <ErrorOutlineIcon style={{color: '#FF3333', fontSize: 60}} />\r\n                <h2 className=\"modal-title\" style={{width: '100%'}}>Error</h2>\r\n                <p className=\"modal-text\" style={{width: '100%', textAlign: 'center'}}>have_active_call</p>\r\n            </>}\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.user,\r\n        call: state.call,\r\n        media: state.media\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        callActions: bindActionCreators(callActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(CreateDialog)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport '../../Css/Partials/Slider.css'\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        padding               : '0',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        background            : 'rgba(0, 0, 0, 0.5);',\r\n        border                : 'none',\r\n        width: '100%',\r\n        height: '100vh'\r\n    }\r\n};\r\n\r\n\r\nclass Slider extends React.Component {\r\n    state = {\r\n        index: this.props.index\r\n    }\r\n\r\n    render() {\r\n        return <Modal\r\n            isOpen={true}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Slider\"\r\n        >\r\n            <div className=\"slider-close\" onClick={() => {\r\n                this.props.close()\r\n            }}>\r\n                <CloseIcon style={{color: '#fff', fontSize: 30, opacity: 0.5}} />\r\n            </div>\r\n\r\n            {this.props.images[this.state.index-1] && <div className=\"slider-prev\" onClick={() => {\r\n                this.setState({index: this.state.index-1})\r\n            }}>\r\n                <NavigateBeforeIcon style={{color: '#fff', fontSize: 45, opacity: 0.5}} />\r\n            </div>}\r\n\r\n            <div className=\"slider-image-container\" onClick={() => {this.props.close()}}>\r\n                <img className=\"slider-image\" src={this.props.images[this.state.index].path} alt=\"Media from user\" />\r\n            </div>\r\n\r\n            {this.props.images[this.state.index+1] && <div className=\"slider-next\" onClick={() => {\r\n                this.setState({index: this.state.index+1})\r\n            }}>\r\n                <NavigateNextIcon style={{color: '#fff', fontSize: 45, opacity: 0.5}} />\r\n            </div>}\r\n        </Modal>\r\n    }\r\n}\r\n\r\nexport default Slider","// App\r\nimport React from 'react'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Material\r\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { urlApi } from '../../config';\r\nimport { SLIDER_SET } from '../../Redux/constants';\r\n\r\nclass Images extends React.Component {\r\n    state = {\r\n        isFetching: true,\r\n        images: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.props.match.params.id) {\r\n            let type = this.props.history.location.pathname.substring(1,5)\r\n            this.setState({isFetching: true})\r\n            let body\r\n            if(type === 'chat') {\r\n                body = {\r\n                    userId: this.props.match.params.id,\r\n                    type: 'image'\r\n                }\r\n            } else {\r\n                body = {\r\n                    roomId: this.props.match.params.id,\r\n                    type: 'image'\r\n                }\r\n            }\r\n            fetch(`${urlApi}/api/${type === 'chat' ? 'dialog' : 'room'}/get-investments`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${this.props.user.apiToken}`,\r\n                },\r\n                body: JSON.stringify(body)\r\n            })\r\n            .then(response => response.json())\r\n            .then(images => {\r\n                if(!images.error) {\r\n                    images = images.map(x => x.data)\r\n                    \r\n                    this.setState({images, isFetching: false})\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onScroll() {\r\n\r\n    }\r\n    \r\n    render() {\r\n        return <Scrollbars\r\n            ref={(ref) => {this.roomsBlock = ref}}\r\n            renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n            renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n            className=\"scroll investment-images\"\r\n            onScroll={() => {this.onScroll()}}\r\n            style={{height: 340}}\r\n            autoHide\r\n        >\r\n            {this.state.isFetching && <CircularProgress style={{\r\n                    color: '#008FF7',\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    right: 0,\r\n                    margin: 'auto',\r\n                    top: 'calc(50% - 20px)'\r\n                }} />}\r\n            {this.state.images.map((image, index) => {\r\n                return (\r\n                    <div className=\"investment-image\">\r\n                        <img key={index} alt={image.name} style={{cursor: 'pointer'}} onClick={() => {\r\n                            this.props.history.push({\r\n                                search: `?modal=slider`\r\n                            })\r\n                            this.props.dispatch({\r\n                                type: SLIDER_SET,\r\n                                payload: {\r\n                                    images: this.state.images,\r\n                                    index\r\n                                }\r\n                            })\r\n                        }} src={image.path} />\r\n                    </div>\r\n                )\r\n            })}\r\n            {(!this.state.images.length && !this.state.isFetching) && <div className=\"data-empty\">\r\n                <PhotoLibraryIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                <p>Here will placed images from this dialog</p>\r\n            </div>}\r\n        </Scrollbars>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(Images))","// App\r\nimport React from 'react'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Material\r\nimport AudiotrackIcon from '@material-ui/icons/Audiotrack';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { urlApi } from '../../config';\r\nimport Audio from '../../Partials/Chat/Audio';\r\n\r\nclass Images extends React.Component {\r\n    state = {\r\n        isFetching: true,\r\n        sounds: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.props.match.params.id) {\r\n            let type = this.props.history.location.pathname.substring(1,5)\r\n            this.setState({isFetching: true})\r\n            let body\r\n            if(type === 'chat') {\r\n                body = {\r\n                    userId: this.props.match.params.id,\r\n                    type: 'sound'\r\n                }\r\n            } else {\r\n                body = {\r\n                    roomId: this.props.match.params.id,\r\n                    type: 'sound'\r\n                }\r\n            }\r\n            fetch(`${urlApi}/api/${type === 'chat' ? 'dialog' : 'room'}/get-investments`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${this.props.user.apiToken}`,\r\n                },\r\n                body: JSON.stringify(body)\r\n            })\r\n            .then(response => response.json())\r\n            .then(sounds => {\r\n                if(!sounds.error) {\r\n                    sounds = sounds.map(x => x.data)\r\n                    \r\n                    this.setState({sounds, isFetching: false})\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onScroll() {\r\n\r\n    }\r\n    \r\n    render() {\r\n        return <Scrollbars\r\n            ref={(ref) => {this.roomsBlock = ref}}\r\n            renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n            renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n            className=\"scroll investment-images\"\r\n            onScroll={() => {this.onScroll()}}\r\n            style={{height: 340}}\r\n            autoHide\r\n        >\r\n            {this.state.isFetching && <CircularProgress style={{\r\n                    color: '#008FF7',\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    right: 0,\r\n                    margin: 'auto',\r\n                    top: 'calc(50% - 20px)'\r\n                }} />}\r\n            {this.state.sounds.map((sound, index) => {\r\n                return (\r\n                    <Audio\r\n                        key={index}\r\n                        fileName={sound.name}\r\n                        src={sound.path}\r\n                    />\r\n                )\r\n            })}\r\n            {(!this.state.sounds.length && !this.state.isFetching) && <div className=\"data-empty\">\r\n                <AudiotrackIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                <p>Here will placed sounds from this dialog</p>\r\n            </div>}\r\n        </Scrollbars>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(Images))","// App\r\nimport React from 'react'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\n// Material\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { urlApi } from '../../config';\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\n\r\nclass Images extends React.Component {\r\n    state = {\r\n        isFetching: true,\r\n        files: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.props.match.params.id) {\r\n            let type = this.props.history.location.pathname.substring(1,5)\r\n            this.setState({isFetching: true})\r\n            let body\r\n            if(type === 'chat') {\r\n                body = {\r\n                    userId: this.props.match.params.id,\r\n                    type: 'file'\r\n                }\r\n            } else {\r\n                body = {\r\n                    roomId: this.props.match.params.id,\r\n                    type: 'file'\r\n                }\r\n            }\r\n            fetch(`${urlApi}/api/${type === 'chat' ? 'dialog' : 'room'}/get-investments`, {\r\n                method: \"post\",\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${this.props.user.apiToken}`,\r\n                },\r\n                body: JSON.stringify(body)\r\n            })\r\n            .then(response => response.json())\r\n            .then(files => {\r\n                if(!files.error) {\r\n                    files = files.map(x => x.data)\r\n                    \r\n                    this.setState({files, isFetching: false})\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onScroll() {\r\n\r\n    }\r\n    \r\n    render() {\r\n        return <Scrollbars\r\n            ref={(ref) => {this.roomsBlock = ref}}\r\n            renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n            renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n            className=\"scroll investment-images\"\r\n            onScroll={() => {this.onScroll()}}\r\n            style={{height: 340, marginLeft: 15}}\r\n            autoHide\r\n        >\r\n            {this.state.isFetching && <CircularProgress style={{\r\n                    color: '#008FF7',\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    right: 0,\r\n                    margin: 'auto',\r\n                    top: 'calc(50% - 20px)',\r\n                }} />}\r\n            {this.state.files.map((file, index) => {\r\n                return (\r\n                    <div className=\"message-file\" style={{cursor: 'pointer'}} key={index} onClick={(e) => {\r\n                        window.open(file.path, '_self');\r\n                    }}>\r\n                        <InsertDriveFileOutlinedIcon className=\"file-icon\" style={{color: '#008FF7'}} />\r\n                        <div className=\"message-file-info\">\r\n                            <p className=\"message-file-name\">{file.name}</p>\r\n                            <p className=\"message-file-size\">{file.size > 999 ? (file.size / 1000).toFixed(1) + ' mb' : Math.ceil(file.size) + ' kb'}</p>\r\n                        </div>\r\n                        <GetAppIcon className=\"download-icon\" style={{color: '#008FF7'}} />\r\n                    </div>\r\n                )\r\n            })}\r\n            {(!this.state.files.length && !this.state.isFetching) && <div className=\"data-empty\">\r\n                <FileCopyIcon style={{color: '#B8C3CF', fontSize: 54, margin: '0 auto', display: 'block'}} />\r\n\r\n                <p>Here will placed files from this dialog</p>\r\n            </div>}\r\n        </Scrollbars>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(Images))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport Images from './investmentsPartials/Images';\r\nimport Sounds from './investmentsPartials/Sounds';\r\nimport Files from './investmentsPartials/Files';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass Contacts extends React.Component {\r\n    state = {\r\n        activeTab: 'images'\r\n    }\r\n\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Contacts\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.investments}</h2>\r\n\r\n            <div className=\"contacts-tabs\">\r\n                <span className={this.state.activeTab === 'images' ? 'active' : ''} onClick={() => {this.setState({activeTab: 'images'})}}>{this.props.langProps.photos}</span>\r\n                <span className={this.state.activeTab === 'sounds' ? 'active' : ''} onClick={() => {this.setState({activeTab: 'sounds'})}}>{this.props.langProps.sounds}</span>\r\n                <span className={this.state.activeTab === 'files' ? 'active' : ''} onClick={() => {this.setState({activeTab: 'files'})}}>{this.props.langProps.files}</span>\r\n            </div>\r\n\r\n            {this.state.activeTab === 'images' && <Images />}\r\n            {this.state.activeTab === 'sounds' && <Sounds />}\r\n            {this.state.activeTab === 'files' && <Files />}\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Contacts)))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withCookies } from 'react-cookie'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass Settings extends React.Component {\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Settings\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.settings}</h2>\r\n\r\n            <p className=\"settings-item\" onClick={() => {\r\n                this.props.history.push({\r\n                    search: '?modal=profile'\r\n                })\r\n            }}>{this.props.langProps.change_profile}</p>\r\n            <p className=\"settings-item\" onClick={() => {\r\n                this.props.history.push({\r\n                    search: '?modal=language'\r\n                })\r\n            }}>{this.props.langProps.language}</p>\r\n\r\n            <p className=\"settings-item\" onClick={() => {\r\n                const { cookies } = this.props;\r\n                cookies.remove(\"apiToken\", { path: \"/\" });\r\n                window.location.reload()\r\n            }}>{this.props.langProps.logout}</p>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(withCookies(Settings))))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withCookies } from 'react-cookie'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { urlApi } from '../config';\r\nimport store from '../Redux/store';\r\nimport { USER_EDIT } from '../Redux/constants';\r\nimport languages from '../languages';\r\nimport { withLang } from 'react-multi-language';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass Settings extends React.Component {\r\n    state = {\r\n        firstName: this.props.user.name.first,\r\n        lastName: this.props.user.name.last,\r\n        city: this.props.user.city,\r\n        error: false,\r\n        errors: []\r\n    }\r\n\r\n    onSubmit(e) {\r\n        this.setState({error: false, errors: []})\r\n        e.preventDefault()\r\n\r\n        fetch(`${urlApi}/api/user/edit`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                firstName: this.state.firstName,\r\n                lastName: this.state.lastName\r\n            })\r\n        })\r\n        .then((response) => response.json())\r\n        .then((user) => {\r\n            if(user.error) {\r\n                this.setState({error: true, errors: user.errors})\r\n            } else {\r\n                store.dispatch({\r\n                    type: USER_EDIT,\r\n                    payload: {\r\n                        firstName: this.state.firstName,\r\n                        lastName: this.state.lastName,\r\n                        city: this.state.city\r\n                    }\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Contacts\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.change_profile}</h2>\r\n\r\n            <form style={{display: 'contents'}} onSubmit={(e) => {this.onSubmit(e)}}>\r\n                <input \r\n                    value={this.state.firstName} \r\n                    onChange={(e) => {this.setState({firstName: e.target.value})}} \r\n                    className=\"input-field\" \r\n                    type=\"text\"\r\n                    placeholder={this.props.langProps.firstName}\r\n                    style={{marginTop: 0}} \r\n                />\r\n                {this.state.errors.find(value => value.param === 'firstName') && <span className=\"input-error-label\">\r\n                    {this.props.langProps[this.state.errors.find(value => value.param === 'firstName').msg]} \r\n                </span>}\r\n\r\n                <input \r\n                    value={this.state.lastName} \r\n                    onChange={(e) => {this.setState({lastName: e.target.value})}} \r\n                    className=\"input-field\" \r\n                    type=\"text\"\r\n                    style={{marginBottom: 0}} \r\n                    placeholder={this.props.langProps.lastName}\r\n                />\r\n                {this.state.errors.find(value => value.param === 'lastName') && <span className=\"input-error-label\">\r\n                    {this.props.langProps[this.state.errors.find(value => value.param === 'lastName').msg]} \r\n                </span>}\r\n\r\n                <input \r\n                    value={this.state.city} \r\n                    onChange={(e) => {this.setState({city: e.target.value})}} \r\n                    className=\"input-field\" \r\n                    type=\"text\"\r\n                    placeholder={this.props.langProps.city}\r\n                />\r\n\r\n                {(this.state.firstName !== this.props.user.name.first || this.state.lastName !== this.props.user.name.last || this.state.city !== this.props.user.city) && <button className=\"button-blue\" type=\"submit\" style={{width: 'max-content', marginTop: 25}}>{this.props.langProps.save}</button>}\r\n                {(this.state.firstName === this.props.user.name.first && this.state.lastName === this.props.user.name.last && this.state.city === this.props.user.city) && <button className=\"button-gray\" onClick={() => {\r\n                        this.props.history.goBack()\r\n                    }} style={{width: 'max-content', marginTop: 25}}>{this.props.langProps.back}</button>}\r\n            </form>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(withCookies(Settings))))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withCookies } from 'react-cookie'\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport store from '../Redux/store';\r\nimport { USER_SET_LANG } from '../Redux/constants';\r\nimport { urlApi } from '../config';\r\nimport { withLang } from 'react-multi-language';\r\nimport languages from '../languages';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nclass Settings extends React.Component {\r\n    setLang(lang) {\r\n        store.dispatch({\r\n            type: USER_SET_LANG,\r\n            payload: lang\r\n        })\r\n\r\n        fetch(`${urlApi}/api/user/set-lang`, {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                lang\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return <Modal\r\n            isOpen={this.props.isOpen}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Contacts\"\r\n        >\r\n            <h2 className=\"modal-title\">{this.props.langProps.select_language}</h2>\r\n\r\n            <p className={`settings-item ${this.props.user.lang === 'en' ? 'active' : ''}`} onClick={() => {\r\n                if(this.props.user.lang !== 'en')\r\n                this.setLang('en')\r\n            }}>{this.props.langProps.english}</p>\r\n            <p className={`settings-item ${this.props.user.lang === 'ru' ? 'active' : ''}`} onClick={() => {\r\n                if(this.props.user.lang !== 'ru')\r\n                this.setLang('ru')\r\n            }}>{this.props.langProps.russian}</p>\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(withCookies(Settings))))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Material\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withCookies } from 'react-cookie'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\nimport { CircularProgress, Button, Radio, withStyles } from '@material-ui/core'\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { urlApi, timeStamps } from '../config';\r\nimport languages from '../languages';\r\nimport { withLang } from 'react-multi-language';\r\nimport Avatar from '../Partials/User/Avatar';\r\nimport { toast } from 'react-toastify';\r\n\r\nlet waitSearch = false\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nconst radioStyles = theme => ({\r\n    root: {\r\n        color: '#CCD1D6',\r\n        display: 'flex',\r\n        '&$checked': {\r\n            color: '#008FF7',\r\n            border: 'none'\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        }\r\n    },\r\n    checked: {},\r\n})\r\n\r\nconst CustomRadio = withStyles(radioStyles)(Radio);\r\n\r\nclass RoomItem extends React.Component {\r\n    render() {\r\n        return <>\r\n            <Button className=\"room-item\" title={`Room ${this.props.room.title}`} onClick={() => {\r\n                this.props.selectRoom(this.props.room._id)\r\n            }}>\r\n                <Avatar style={{minWidth: 40, maxWidth: 40, height: 40, fontSize: 14, fontWeight: 600, backgroundColor: `rgb(${this.props.room.color})`}} name={this.props.room.title.charAt(0)} />\r\n                <div style={{\r\n                    flexGrow: 1,\r\n                    minWidth: 0,\r\n                    maxWidth: '100%',\r\n                    paddingRight: 10\r\n                }}>\r\n                    <p>{this.props.room.isPrivate && <LockOutlinedIcon />}<span>{this.props.room.title}</span></p>\r\n                </div>\r\n                <CustomRadio\r\n                    checked={this.props.selectRoomId === this.props.room._id}\r\n                />\r\n            </Button>\r\n        </>\r\n    }\r\n}\r\n\r\nclass Settings extends React.Component {\r\n    state = {\r\n        error: false,\r\n        errors: [],\r\n        isFetching: false,\r\n        rooms: [],\r\n        selectRoomId: false,\r\n        time: 0,\r\n        q: '',\r\n        step: 'room', // room, time\r\n    }\r\n\r\n    onSearch(e) {\r\n        let q = e.target.value\r\n        this.setState({q})\r\n\r\n        if(waitSearch)\r\n            clearTimeout(waitSearch)\r\n\r\n        if(!!q.length && /\\S/.test(q)) {\r\n            this.setState({isFetching: true})\r\n            waitSearch = setTimeout(() => {\r\n                fetch(`${urlApi}/api/room/search`, {\r\n                    method: \"post\",\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Content-Type': 'application/json',\r\n                        Authorization: `Bearer ${this.props.user.apiToken}`,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        q: this.state.q\r\n                    })\r\n                })\r\n                .then(response => response.json())\r\n                .then(rooms => {\r\n                    this.setState({isFetching: false})\r\n                    this.setState({rooms})\r\n                })\r\n            }, 500);\r\n        }\r\n\r\n        if(!q.length)\r\n            this.setState({rooms: []})\r\n    }\r\n\r\n    onSubmit(e) {\r\n        this.setState({error: false, errors: []})\r\n\r\n        fetch(`${urlApi}/api/room/mute`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                roomId: this.state.selectRoomId,\r\n                userId: this.props.userId,\r\n                time: this.state.time\r\n            })\r\n        })\r\n        .then(() => {\r\n            this.props.history.push({\r\n                search: `?user=${this.props.userId}`\r\n            })\r\n            toast.success(\"Mute sent\", {\r\n                position: toast.POSITION.TOP_CENTER\r\n            });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return <Modal\r\n            isOpen={true}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Contacts\"\r\n        >   \r\n            <h2 className=\"modal-title\">Mute</h2>\r\n\r\n            {this.state.step === 'room' && <>\r\n                <input type=\"text\" value={this.state.q} onChange={(e) => {this.onSearch(e)}} className=\"friends-search-input\" placeholder={this.props.langProps.search} />\r\n\r\n                <Scrollbars\r\n                    ref={(ref) => {this.roomsBlock = ref}}\r\n                    renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                    renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                    className=\"scroll\"\r\n                    style={{height: 340}}\r\n                    autoHide\r\n                >\r\n                    {this.state.isFetching && <CircularProgress style={{\r\n                        color: '#008FF7',\r\n                        position: 'absolute',\r\n                        left: 0,\r\n                        right: 0,\r\n                        margin: 'auto',\r\n                        top: 'calc(50% - 20px)'\r\n                    }} />}\r\n                    {!!this.state.q.length && !this.state.isFetching && this.state.rooms.map((room, index) => {\r\n                        return (\r\n                            <RoomItem selectRoom={(id) => {\r\n                                this.setState({selectRoomId: id})\r\n                            }} key={index} room={room} selectRoomId={this.state.selectRoomId} />\r\n                        )\r\n                    })}\r\n                    {!this.state.q.length && !this.state.isFetching && !this.state.rooms.length && <div className=\"data-empty\">\r\n                        <p>Start typing room name</p>\r\n                    </div>}\r\n\r\n                    {!!this.state.q.length && !this.state.isFetching && !this.state.rooms.length && <div className=\"data-empty\">\r\n                        <p>Rooms not find</p>\r\n                    </div>}\r\n                </Scrollbars>\r\n\r\n                {!!this.state.selectRoomId && <button className=\"button-blue\" onClick={() => {\r\n                    this.setState({step: 'time'})\r\n                }} style={{width: 'max-content', marginTop: 25}}>{this.props.langProps.next}</button>}\r\n                {!this.state.selectRoomId && <button className=\"button-gray\" onClick={() => {\r\n                    this.props.history.goBack()\r\n                }} style={{width: 'max-content', marginTop: 25}}>{this.props.langProps.back}</button>}\r\n            </>}\r\n            \r\n\r\n            {this.state.step === 'time' && <>\r\n                {timeStamps.map((time, index) => \r\n                        <Button key={index} className=\"room-item\" style={{height: 40}} onClick={() => {\r\n                            this.setState({time: time.time})\r\n                        }}>\r\n                            <div style={{\r\n                                flexGrow: 1,\r\n                                minWidth: 0,\r\n                                maxWidth: '100%',\r\n                                paddingRight: 10\r\n                            }}>\r\n                                <p><span>{time.label}</span></p>\r\n                            </div>\r\n                            <CustomRadio\r\n                                checked={this.state.time === time.time}\r\n                            />\r\n                        </Button>\r\n                )}\r\n                {!!this.state.time && <button className=\"button-blue\" onClick={() => {\r\n                    this.onSubmit()\r\n                }} style={{width: 'max-content', marginTop: 25}}>Mute</button>}\r\n                {!this.state.time && <button className=\"button-gray\" onClick={() => {\r\n                    this.setState({step: 'room'})\r\n                }} style={{width: 'max-content', marginTop: 25}}>{this.props.langProps.back}</button>}\r\n            </>}\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(withCookies(Settings))))","// App\r\nimport React from 'react'\r\nimport Modal from 'react-modal';\r\n\r\n// Redux\r\nimport { connect } from 'react-redux'\r\nimport * as usersActions from '../Redux/actions/users'\r\nimport * as roomsActions from '../Redux/actions/rooms'\r\nimport { bindActionCreators } from 'redux'\r\nimport { withCookies } from 'react-cookie'\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\nimport { CircularProgress, Button, Radio, withStyles } from '@material-ui/core'\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { urlApi } from '../config';\r\nimport languages from '../languages';\r\nimport { withLang } from 'react-multi-language';\r\nimport Avatar from '../Partials/User/Avatar';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst customStylesModal = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\r\n        zIndex: 4\r\n    },\r\n    content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        minWidth              : '300px',\r\n        marginRight           : '-50%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        borderRadius          : '10px',\r\n        boxShadow             : '0px 5px 30px rgba(0, 0, 0, 0.16)',\r\n        display               : 'flex',\r\n        justifyContent        : 'center',\r\n        flexWrap              : 'wrap',\r\n        width                 : 'max-content',\r\n        maxWidth              : '320px',\r\n        padding               : '20px 0'\r\n    }\r\n};\r\n\r\nconst radioStyles = theme => ({\r\n    root: {\r\n        color: '#CCD1D6',\r\n        display: 'flex',\r\n        '&$checked': {\r\n            color: '#008FF7',\r\n            border: 'none'\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: 'transparent',\r\n        }\r\n    },\r\n    checked: {},\r\n})\r\n\r\nconst CustomRadio = withStyles(radioStyles)(Radio);\r\n\r\nclass RoomItem extends React.Component {\r\n    render() {\r\n        return <>\r\n            <Button className=\"room-item\" title={`Room ${this.props.room.title}`} onClick={() => {\r\n                this.props.selectRoom(this.props.room._id)\r\n            }}>\r\n                <Avatar style={{minWidth: 40, maxWidth: 40, height: 40, fontSize: 14, fontWeight: 600, backgroundColor: `rgb(${this.props.room.color})`}} name={this.props.room.title.charAt(0)} />\r\n                <div style={{\r\n                    flexGrow: 1,\r\n                    minWidth: 0,\r\n                    maxWidth: '100%',\r\n                    paddingRight: 10\r\n                }}>\r\n                    <p>{this.props.room.isPrivate && <LockOutlinedIcon />}<span>{this.props.room.title}</span></p>\r\n                </div>\r\n                <CustomRadio\r\n                    checked={this.props.selectRoomId === this.props.room._id}\r\n                />\r\n            </Button>\r\n        </>\r\n    }\r\n}\r\n\r\nclass Settings extends React.Component {\r\n    state = {\r\n        error: false,\r\n        errors: [],\r\n        isFetching: true,\r\n        rooms: [],\r\n        selectRoomId: false,\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(`${urlApi}/api/user/get-mute`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                userId: this.props.userId\r\n            })\r\n        })\r\n        .then(response => response.json())\r\n        .then(limits => {\r\n            let rooms = limits.map(x => x.room)\r\n            this.setState({isFetching: false, rooms})\r\n        })\r\n    }\r\n\r\n    onSubmit(e) {\r\n        this.setState({error: false, errors: []})\r\n\r\n        fetch(`${urlApi}/api/room/unmute`, {\r\n            method: \"post\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${this.props.user.apiToken}`,\r\n            },\r\n            body: JSON.stringify({\r\n                roomId: this.state.selectRoomId,\r\n                userId: this.props.userId\r\n            })\r\n        })\r\n        .then(() => {\r\n            toast.success(\"Unmute sent\", {\r\n                position: toast.POSITION.TOP_CENTER\r\n            });\r\n            this.setState({rooms: [...this.state.rooms.filter(x => x._id !== this.state.selectRoomId)], selectRoomId: 0})\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return <Modal\r\n            isOpen={true}\r\n            onRequestClose={() => {this.props.close()}}\r\n            style={customStylesModal}\r\n            contentLabel=\"Contacts\"\r\n        >   \r\n            <h2 className=\"modal-title\">Unmute</h2>\r\n\r\n            <Scrollbars\r\n                ref={(ref) => {this.roomsBlock = ref}}\r\n                renderTrackVertical={props => <div className=\"track-vertical\"/>}\r\n                renderThumbVertical={props => <div className=\"thumb-vertical\"/>}\r\n                className=\"scroll\"\r\n                style={{height: 340}}\r\n                autoHide\r\n            >\r\n                {this.state.isFetching && <CircularProgress style={{\r\n                    color: '#008FF7',\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    right: 0,\r\n                    margin: 'auto',\r\n                    top: 'calc(50% - 20px)'\r\n                }} />}\r\n                {!this.state.isFetching && this.state.rooms.map((room, index) => {\r\n                    return (\r\n                        <RoomItem selectRoom={(id) => {\r\n                            this.setState({selectRoomId: id})\r\n                        }} key={index} room={room} selectRoomId={this.state.selectRoomId} />\r\n                    )\r\n                })}\r\n                {!this.state.isFetching && !this.state.rooms.length && <div className=\"data-empty\">\r\n                    <p>This user dont have mutes rooms</p>\r\n                </div>}\r\n            </Scrollbars>\r\n\r\n            {!!this.state.selectRoomId && <button className=\"button-blue\" onClick={() => {\r\n                this.onSubmit()\r\n            }} style={{width: 'max-content', marginTop: 25}}>Unmute</button>}\r\n            {!this.state.selectRoomId && <button className=\"button-gray\" onClick={() => {\r\n                this.props.history.goBack()\r\n            }} style={{width: 'max-content', marginTop: 25}}>{this.props.langProps.back}</button>}\r\n        </Modal>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.users,\r\n        user: state.user,\r\n        rooms: state.rooms\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        usersActions: bindActionCreators(usersActions, dispatch),\r\n        roomsActions: bindActionCreators(roomsActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default withLang(languages)(connect(mapStateToProps, mapDispatchToProps)(withRouter(withCookies(Settings))))","// App\r\nimport React from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\nimport CreateRoom from './CreateRoom';\r\nimport qs from 'qs'\r\nimport User from './User';\r\nimport Contacts from './Contacts';\r\nimport CreateDialog from './CreateDialog';\r\nimport { connect } from 'react-redux';\r\nimport Invite from './Invite';\r\nimport EditRoom from './EditRoom';\r\nimport DeleteRoom from './DeleteRoom';\r\nimport Forward from './Forward';\r\nimport { DIALOGS_SET_FORWARD, SLIDER_SET } from '../Redux/constants';\r\nimport Call from './Call';\r\nimport Slider from '../Partials/Chat/Slider';\r\nimport Investments from './Investments';\r\nimport Settings from './Settings';\r\nimport Profile from './Profile';\r\nimport Language from './Language';\r\nimport Mute from './Mute';\r\nimport Unmute from './Unmute';\r\n\r\nclass MainModal extends React.Component {\r\n    state = {\r\n        act: qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).act,\r\n        user: qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).user,\r\n        modal: qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).modal,\r\n        mute: qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).mute,\r\n        unmute: qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).unmute,\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.history.listen((location) => {\r\n            this.setState({\r\n                act: qs.parse(location.search, { ignoreQueryPrefix: true }).act,\r\n                user: qs.parse(location.search, { ignoreQueryPrefix: true }).user,\r\n                modal: qs.parse(location.search, { ignoreQueryPrefix: true }).modal,\r\n                mute: qs.parse(location.search, { ignoreQueryPrefix: true }).mute,\r\n                unmute: qs.parse(location.search, { ignoreQueryPrefix: true }).unmute,\r\n            })\r\n        })\r\n    }\r\n    \r\n    render() {\r\n        return <>\r\n            <CreateRoom isOpen={this.state.act === 'newRoom'} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />\r\n\r\n            <CreateDialog isOpen={this.state.act === 'newChat'} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />\r\n\r\n            {this.state.user && <User userId={this.state.user} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />}\r\n\r\n            {this.state.mute && this.props.user.role !== 'user' && <Mute userId={this.state.mute} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />}\r\n\r\n            {this.state.unmute && this.props.user.role !== 'user' && <Unmute userId={this.state.unmute} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />}\r\n\r\n            <Contacts isOpen={this.state.modal === 'contacts'} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />\r\n\r\n            <Settings isOpen={this.state.modal === 'settings'} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />\r\n            \r\n            {this.state.modal === 'profile' && <Profile isOpen={this.state.modal === 'profile'} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />}\r\n\r\n            {this.state.modal === 'language' && <Language isOpen={this.state.modal === 'language'} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />}\r\n\r\n            <Invite isOpen={this.state.act === 'invite' && this.props.rooms.activeRoom} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />\r\n\r\n            {this.state.act === 'editRoom' && this.props.rooms.activeRoom && (this.props.user._id === this.props.rooms.activeRoom.ownerId) && <EditRoom isOpen={this.state.act === 'editRoom' && this.props.rooms.activeRoom} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />}\r\n\r\n            {this.state.act === 'deleteRoom' && this.props.rooms.activeRoom && (this.props.user._id === this.props.rooms.activeRoom.ownerId) && <DeleteRoom isOpen={this.state.act === 'deleteRoom' && this.props.rooms.activeRoom} close={() => {\r\n                this.props.history.push({\r\n                    search: \"\"\r\n                })\r\n            }} />}\r\n\r\n            <Forward isOpen={!!this.props.dialogs.forwardMessages.length} close={(status) => {\r\n                this.props.dispatch({\r\n                    type: DIALOGS_SET_FORWARD,\r\n                    payload: []\r\n                })\r\n            }} />\r\n\r\n            {this.state.modal === 'slider' && !!this.props.slider.images.length && <Slider index={this.props.slider.index} images={this.props.slider.images} close={() => {\r\n                this.props.dispatch({\r\n                    type: SLIDER_SET,\r\n                    payload: {\r\n                        images: [],\r\n                        index: 0\r\n                    }\r\n                })\r\n                this.props.history.goBack()\r\n            }} />}\r\n            \r\n            {this.props.match.params.id && this.state.modal === 'investments' && <Investments \r\n                isOpen={this.props.match.params.id && this.state.modal === 'investments'} \r\n                dialogId={this.props.match.params.id} \r\n                close={() => {\r\n                    this.props.history.push({\r\n                        search: \"\"\r\n                    })\r\n                }}\r\n            />}\r\n\r\n            {this.props.call.user && <Call isOpen={true} />}\r\n        </>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        rooms: state.rooms,\r\n        user: state.user,\r\n        dialogs: state.dialogs,\r\n        call: state.call,\r\n        slider: state.slider\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(MainModal))","// App\r\nimport React from \"react\";\r\nimport { withCookies } from \"react-cookie\";\r\nimport SocketController from '../Controllers/SocketController'\r\n\r\n// Router\r\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\r\nimport routes from './config'\r\n\r\n// Redux\r\nimport { connect } from \"react-redux\";\r\nimport * as userActions from \"../Redux/actions/user\";\r\nimport * as usersActions from \"../Redux/actions/users\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nimport NoMatch from '../Pages/NoMatch'\r\nimport { setTitle } from \"../Controllers/FunctionsController\";\r\nimport {urlApi} from '../config'\r\nimport MainModal from \"../Modals/MainModal\";\r\nclass AppRouter extends React.Component {\r\n  state = {\r\n    isRender: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.history.listen(() => {\r\n      setTitle(this.props.history.location.pathname, routes);\r\n    });\r\n    \r\n    setTitle(this.props.history.location.pathname, routes);\r\n    \r\n    const { cookies } = this.props;\r\n    let apiToken = cookies.get(\"apiToken\");\r\n\r\n    if (apiToken) {\r\n      fetch(`${urlApi}/api/user/me`, {\r\n        method: \"get\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${apiToken}`,\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then(({user, dialogs, noReadCount, noReadNotifications}) => {\r\n          SocketController.init(apiToken)\r\n          this.props.userActions.loginUser(user, dialogs, noReadCount, noReadNotifications, apiToken);\r\n          this.setState({isRender: true})\r\n        })\r\n        .catch(() => {\r\n          localStorage.setItem('drafts', JSON.stringify([]));\r\n          this.setState({isRender: true})\r\n        })\r\n    } else {\r\n      localStorage.setItem('drafts', JSON.stringify([]));\r\n      this.setState({isRender: true})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return this.state.isRender && (<>\r\n      <Switch>\r\n          {routes.map((route, index) => {\r\n              switch (route.type) {\r\n                  case 'auth':\r\n                      return <this.AuthRoute\r\n                          key={index}\r\n                          path={route.path}\r\n                          exact={route.exact}\r\n                      >\r\n                          <route.component />\r\n                      </this.AuthRoute>\r\n\r\n                  case 'user':\r\n                      return <this.PrivateRoute\r\n                          key={index}\r\n                          path={route.path}\r\n                          exact={route.exact}\r\n                      >\r\n                          <route.component />\r\n                      </this.PrivateRoute>\r\n              \r\n                  default:\r\n                      return false\r\n              }            \r\n          })}\r\n\r\n          {/* Auth routes */}\r\n          {/* <this.AuthRoute exact path=\"/reset/:token\" component={Reset}/> */}\r\n          {/* Auth routes end */}\r\n\r\n          <Route component={NoMatch} />\r\n      </Switch></>\r\n    );\r\n  }\r\n\r\n  PrivateRoute = ({ children, ...rest }) => {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={() =>\r\n          this.props.user.isAuth ? (\r\n            (<>\r\n              {children}\r\n              <MainModal />\r\n            </>)\r\n          ) : (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n              }}\r\n            />\r\n          )\r\n        }\r\n      />\r\n    );\r\n  };\r\n\r\n  AuthRoute = ({ children, ...rest }) => {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={() =>\r\n          !this.props.user.isAuth ? (\r\n            children\r\n          ) : (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/\",\r\n              }}\r\n            />\r\n          )\r\n        }\r\n      />\r\n    );\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    userActions: bindActionCreators(userActions, dispatch),\r\n    usersActions: bindActionCreators(usersActions, dispatch),\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withCookies(withRouter(AppRouter)));\r\n","// App\nimport React from 'react'\nimport './App.css'\nimport {PageSettings} from './Pages/PageSettings'\nimport 'react-toastify/dist/ReactToastify.css';\nimport { MultiLang } from \"react-multi-language\";\n\n// Partials\nimport UserSidebar from './Partials/UserSidebar'\n\n// Router\nimport AppRouter from './Router'\nimport { connect } from 'react-redux'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.toggleHeader = (value) => {\n            this.setState({userHeader: value})\n        }\n\n        this.state = {\n            userHeader: false,\n            toggleHeader: this.toggleHeader\n        }\n    }\n\n    \n\n    render() {\n        return (\n            <PageSettings.Provider value={this.state}>\n                <div className=\"container-fluid\">\n                    <div className=\"row\">\n                        {this.props.user.isAuth && <UserSidebar show={this.state.userHeader} />}\n                        <AppRouter />\n                        <MultiLang lang={this.props.user.isAuth ? this.props.user.lang : 'en'}/>\n                    </div>\n                </div>\n            </PageSettings.Provider>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        user: state.user\n    }\n}\n\nexport default connect(mapStateToProps)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","// App\nimport 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/ie11';\nimport 'core-js/features/array/find';\nimport 'core-js/features/array/includes';\nimport 'core-js/features/number/is-nan';\nimport 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { CookiesProvider } from 'react-cookie'\nimport {\n    BrowserRouter as Router,\n} from \"react-router-dom\"\nimport Modal from \"react-modal\";\nimport { ToastContainer } from 'react-toastify';\n\n\n// Redux\nimport store from './Redux/store'\nimport { Provider } from 'react-redux'\n\nModal.setAppElement(\"#root\");\n\nReactDOM.render(\n    <CookiesProvider>\n        <Provider store={store}>\n            <Router>\n                <App />\n                <ToastContainer />\n            </Router>\n        </Provider>\n    </CookiesProvider>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}